/*Version 1.0.12.0*/
(function(n){var t={settings:{barWidth:1,barHeight:50,moduleSize:5,showHRI:!0,addQuietZone:!0,marginHRI:5,bgColor:"#FFFFFF",color:"#000000",fontSize:10,output:"css",posX:0,posY:0},intval:function(n){var t=typeof n;return t=="string"?(n=n.replace(/[^0-9-.]/g,""),n=parseInt(n*1,10),isNaN(n)||!isFinite(n)?0:n):t=="number"&&isFinite(n)?Math.floor(n):0},i25:{encoding:["NNWWN","WNNNW","NWNNW","WWNNN","NNWNW","WNWNN","NWWNN","NNNWW","WNNWN","NWNWN"],compute:function(n,i,r){var u,f,o,e;if(i){for(r=="int25"&&n.length%2==0&&(n="0"+n),u=!0,o=0,e=n.length-1;e>-1;e--){if(f=t.intval(n.charAt(e)),isNaN(f))return"";o+=u?3*f:f;u=!u}n+=((10-o%10)%10).toString()}else n.length%2!=0&&(n="0"+n);return n},getDigit:function(n,t,i){var r,u,f,e,o;if(n=this.compute(n,t,i),n=="")return"";if(result="",i=="int25"){for(result+="1010",r=0;r<n.length/2;r++)for(f=n.charAt(2*r),e=n.charAt(2*r+1),u=0;u<5;u++)result+="1",this.encoding[f].charAt(u)=="W"&&(result+="1"),result+="0",this.encoding[e].charAt(u)=="W"&&(result+="0");result+="1101"}else if(i=="std25"){for(result+="11011010",r=0;r<n.length;r++)for(o=n.charAt(r),u=0;u<5;u++)result+="1",this.encoding[o].charAt(u)=="W"&&(result+="11"),result+="0";result+="11010110"}return result}},ean:{encoding:[["0001101","0100111","1110010"],["0011001","0110011","1100110"],["0010011","0011011","1101100"],["0111101","0100001","1000010"],["0100011","0011101","1011100"],["0110001","0111001","1001110"],["0101111","0000101","1010000"],["0111011","0010001","1000100"],["0110111","0001001","1001000"],["0001011","0010111","1110100"]],first:["000000","001011","001101","001110","010011","011001","011100","010101","010110","011010"],getDigit:function(n,i){var e=i=="ean8"?7:12,f,u,o,r;if(n=n.substring(0,e),n.length!=e)return"";for(r=0;r<n.length;r++)if(f=n.charAt(r),f<"0"||f>"9")return"";if(n=this.compute(n,i),u="101",i=="ean8"){for(r=0;r<4;r++)u+=this.encoding[t.intval(n.charAt(r))][0];for(u+="01010",r=4;r<8;r++)u+=this.encoding[t.intval(n.charAt(r))][2]}else{for(o=this.first[t.intval(n.charAt(0))],r=1;r<7;r++)u+=this.encoding[t.intval(n.charAt(r))][t.intval(o.charAt(r-1))];for(u+="01010",r=7;r<13;r++)u+=this.encoding[t.intval(n.charAt(r))][2]}return u+"101"},compute:function(n,r){var e=r=="ean13"?12:7,f,u;for(n=n.substring(0,e),f=0,u=!0,i=n.length-1;i>-1;i--)f+=(u?3:1)*t.intval(n.charAt(i)),u=!u;return n+((10-f%10)%10).toString()}},upc:{getDigit:function(n){return n.length<12&&(n="0"+n),t.ean.getDigit(n,"ean13")},compute:function(n){return n.length<12&&(n="0"+n),t.ean.compute(n,"ean13").substr(1)}},msi:{encoding:["100100100100","100100100110","100100110100","100100110110","100110100100","100110100110","100110110100","100110110110","110100100100","110100100110"],compute:function(n,t){return typeof t=="object"?(t.crc1=="mod10"?n=this.computeMod10(n):t.crc1=="mod11"&&(n=this.computeMod11(n)),t.crc2=="mod10"?n=this.computeMod10(n):t.crc2=="mod11"&&(n=this.computeMod11(n))):typeof t=="boolean"&&t&&(n=this.computeMod10(n)),n},computeMod10:function(n){for(var r=n.length%2,u=0,f=0,e,i=0;i<n.length;i++)r?u=10*u+t.intval(n.charAt(i)):f+=t.intval(n.charAt(i)),r=!r;for(e=(2*u).toString(),i=0;i<e.length;i++)f+=t.intval(e.charAt(i));return n+((10-f%10)%10).toString()},computeMod11:function(n){for(var u=0,i=2,r=n.length-1;r>=0;r--)u+=i*t.intval(n.charAt(r)),i=i==7?2:i+1;return n+((11-u%11)%11).toString()},getDigit:function(n){var t=0,r="";for(n=this.compute(n,!1),r="110",i=0;i<n.length;i++){if(t="0123456789".indexOf(n.charAt(i)),t<0)return"";r+=this.encoding[t]}return r+"1001"}},code11:{encoding:["101011","1101011","1001011","1100101","1011011","1101101","1001101","1010011","1101001","110101","101101"],getDigit:function(n){for(var h="0123456789-",i,r="",u="0",s,l,r="1011001"+u,t=0;t<n.length;t++){if(i=h.indexOf(n.charAt(t)),i<0)return"";r+=this.encoding[i]+u}var f=0,c=0,e=1,o=0;for(t=n.length-1;t>=0;t--)f=f==10?1:f+1,e=e==10?1:e+1,i=h.indexOf(n.charAt(t)),c+=f*i,o+=e*i;return s=c%11,o+=s,l=o%11,r+=this.encoding[s]+u,n.length>=10&&(r+=this.encoding[l]+u),r+"1011001"}},code39:{encoding:["101001101101","110100101011","101100101011","110110010101","101001101011","110100110101","101100110101","101001011011","110100101101","101100101101","110101001011","101101001011","110110100101","101011001011","110101100101","101101100101","101010011011","110101001101","101101001101","101011001101","110101010011","101101010011","110110101001","101011010011","110101101001","101101101001","101010110011","110101011001","101101011001","101011011001","110010101011","100110101011","110011010101","100101101011","110010110101","100110110101","100101011011","110010101101","100110101101","100100100101","100100101001","100101001001","101001001001","100101101101"],getDigit:function(n){var t,i,r="";if(n.indexOf("*")>=0)return"";for(n=("*"+n+"*").toUpperCase(),t=0;t<n.length;t++){if(i="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%*".indexOf(n.charAt(t)),i<0)return"";t>0&&(r+="0");r+=this.encoding[i]}return r}},code93:{encoding:["100010100","101001000","101000100","101000010","100101000","100100100","100100010","101010000","100010010","100001010","110101000","110100100","110100010","110010100","110010010","110001010","101101000","101100100","101100010","100110100","100011010","101011000","101001100","101000110","100101100","100010110","110110100","110110010","110101100","110100110","110010110","110011010","101101100","101100110","100110110","100111010","100101110","111010100","111010010","111001010","101101110","101110110","110101110","100100110","111011010","111010110","100110010","101011110"],getDigit:function(n,t){var s="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%____*",u="",r,c;if(n.indexOf("*")>=0)return"";for(n=n.toUpperCase(),u+=this.encoding[47],i=0;i<n.length;i++){if(r=n.charAt(i),index=s.indexOf(r),r=="_"||index<0)return"";u+=this.encoding[index]}if(t){var f=0,h=0,e=1,o=0;for(i=n.length-1;i>=0;i--)f=f==20?1:f+1,e=e==15?1:e+1,index=s.indexOf(n.charAt(i)),h+=f*index,o+=e*index;r=h%47;o+=r;c=o%47;u+=this.encoding[r];u+=this.encoding[c]}return u+=this.encoding[47],u+"1"}},code128:{encoding:["11011001100","11001101100","11001100110","10010011000","10010001100","10001001100","10011001000","10011000100","10001100100","11001001000","11001000100","11000100100","10110011100","10011011100","10011001110","10111001100","10011101100","10011100110","11001110010","11001011100","11001001110","11011100100","11001110100","11101101110","11101001100","11100101100","11100100110","11101100100","11100110100","11100110010","11011011000","11011000110","11000110110","10100011000","10001011000","10001000110","10110001000","10001101000","10001100010","11010001000","11000101000","11000100010","10110111000","10110001110","10001101110","10111011000","10111000110","10001110110","11101110110","11010001110","11000101110","11011101000","11011100010","11011101110","11101011000","11101000110","11100010110","11101101000","11101100010","11100011010","11101111010","11001000010","11110001010","10100110000","10100001100","10010110000","10010000110","10000101100","10000100110","10110010000","10110000100","10011010000","10011000010","10000110100","10000110010","11000010010","11001010000","11110111010","11000010100","10001111010","10100111100","10010111100","10010011110","10111100100","10011110100","10011110010","11110100100","11110010100","11110010010","11011011110","11011110110","11110110110","10101111000","10100011110","10001011110","10111101000","10111100010","11110101000","11110100010","10111011110","10111101110","11101011110","11110101110","11010000100","11010010000","11010011100","11000111010"],getDigit:function(n){for(var c=" !\"#$%&'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[\\]^_`abcdefghijklmnopqrstuvwxyz{|}~",f="",e=0,h=0,i=0,r=0,o=0,u,s,i=0;i<n.length;i++)if(c.indexOf(n.charAt(i))==-1)return"";for(u=n.length>1,s="",i=0;i<3&&i<n.length;i++)s=n.charAt(i),u&=s>="0"&&s<="9";for(e=u?105:104,f=this.encoding[e],i=0;i<n.length;){if(u)(i==n.length||n.charAt(i)<"0"||n.charAt(i)>"9"||n.charAt(i+1)<"0"||n.charAt(i+1)>"9")&&(u=!1,f+=this.encoding[100],e+=++h*100);else{for(r=0;i+r<n.length&&n.charAt(i+r)>="0"&&n.charAt(i+r)<="9";)r++;u=r>5||i+r-1==n.length&&r>3;u&&(f+=this.encoding[99],e+=++h*99)}u?(o=t.intval(n.charAt(i)+n.charAt(i+1)),i+=2):(o=c.indexOf(n.charAt(i)),i+=1);f+=this.encoding[o];e+=++h*o}return f+=this.encoding[e%103],f+=this.encoding[106],f+"11"}},codabar:{encoding:["101010011","101011001","101001011","110010101","101101001","110101001","100101011","100101101","100110101","110100101","101001101","101100101","1101011011","1101101011","1101101101","1011011011","1011001001","1010010011","1001001011","1010011001"],getDigit:function(n){var t,i,r="",u="0";for(r+=this.encoding[16]+u,t=0;t<n.length;t++){if(i="0123456789-$:/.+".indexOf(n.charAt(t)),i<0)return"";r+=this.encoding[i]+u}return r+this.encoding[16]}},datamatrix:{lengthRows:[10,12,14,16,18,20,22,24,26,32,36,40,44,48,52,64,72,80,88,96,104,120,132,144,8,8,12,12,16,16],lengthCols:[10,12,14,16,18,20,22,24,26,32,36,40,44,48,52,64,72,80,88,96,104,120,132,144,18,32,26,36,36,48],dataCWCount:[3,5,8,12,18,22,30,36,44,62,86,114,144,174,204,280,368,456,576,696,816,1050,1304,1558,5,10,16,22,32,49],solomonCWCount:[5,7,10,12,14,18,20,24,28,36,42,48,56,68,84,112,144,192,224,272,336,408,496,620,7,11,14,18,24,28],dataRegionRows:[8,10,12,14,16,18,20,22,24,14,16,18,20,22,24,14,16,18,20,22,24,18,20,22,6,6,10,10,14,14],dataRegionCols:[8,10,12,14,16,18,20,22,24,14,16,18,20,22,24,14,16,18,20,22,24,18,20,22,16,14,24,16,16,22],regionRows:[1,1,1,1,1,1,1,1,1,2,2,2,2,2,2,4,4,4,4,4,4,6,6,6,1,1,1,1,1,1],regionCols:[1,1,1,1,1,1,1,1,1,2,2,2,2,2,2,4,4,4,4,4,4,6,6,6,1,2,1,2,2,2],interleavedBlocks:[1,1,1,1,1,1,1,1,1,1,1,1,1,1,2,2,4,4,4,4,6,6,8,8,1,1,1,1,1,1],logTab:[-255,255,1,240,2,225,241,53,3,38,226,133,242,43,54,210,4,195,39,114,227,106,134,28,243,140,44,23,55,118,211,234,5,219,196,96,40,222,115,103,228,78,107,125,135,8,29,162,244,186,141,180,45,99,24,49,56,13,119,153,212,199,235,91,6,76,220,217,197,11,97,184,41,36,223,253,116,138,104,193,229,86,79,171,108,165,126,145,136,34,9,74,30,32,163,84,245,173,187,204,142,81,181,190,46,88,100,159,25,231,50,207,57,147,14,67,120,128,154,248,213,167,200,63,236,110,92,176,7,161,77,124,221,102,218,95,198,90,12,152,98,48,185,179,42,209,37,132,224,52,254,239,117,233,139,22,105,27,194,113,230,206,87,158,80,189,172,203,109,175,166,62,127,247,146,66,137,192,35,252,10,183,75,216,31,83,33,73,164,144,85,170,246,65,174,61,188,202,205,157,143,169,82,72,182,215,191,251,47,178,89,151,101,94,160,123,26,112,232,21,51,238,208,131,58,69,148,18,15,16,68,17,121,149,129,19,155,59,249,70,214,250,168,71,201,156,64,60,237,130,111,20,93,122,177,150],aLogTab:[1,2,4,8,16,32,64,128,45,90,180,69,138,57,114,228,229,231,227,235,251,219,155,27,54,108,216,157,23,46,92,184,93,186,89,178,73,146,9,18,36,72,144,13,26,52,104,208,141,55,110,220,149,7,14,28,56,112,224,237,247,195,171,123,246,193,175,115,230,225,239,243,203,187,91,182,65,130,41,82,164,101,202,185,95,190,81,162,105,210,137,63,126,252,213,135,35,70,140,53,106,212,133,39,78,156,21,42,84,168,125,250,217,159,19,38,76,152,29,58,116,232,253,215,131,43,86,172,117,234,249,223,147,11,22,44,88,176,77,154,25,50,100,200,189,87,174,113,226,233,255,211,139,59,118,236,245,199,163,107,214,129,47,94,188,85,170,121,242,201,191,83,166,97,194,169,127,254,209,143,51,102,204,181,71,142,49,98,196,165,103,206,177,79,158,17,34,68,136,61,122,244,197,167,99,198,161,111,222,145,15,30,60,120,240,205,183,67,134,33,66,132,37,74,148,5,10,20,40,80,160,109,218,153,31,62,124,248,221,151,3,6,12,24,48,96,192,173,119,238,241,207,179,75,150,1],champGaloisMult:function(n,t){return!n||!t?0:this.aLogTab[(this.logTab[n]+this.logTab[t])%255]},champGaloisDoub:function(n,t){return n?t?this.aLogTab[(this.logTab[n]+t)%255]:n:0},champGaloisSum:function(n,t){return n^t},selectIndex:function(n,t){if((n<1||n>1558)&&!t||(n<1||n>49)&&t)return-1;var i=0;for(t&&(i=24);this.dataCWCount[i]<n;)i++;return i},encodeDataCodeWordsASCII:function(n){for(var u=[],r=0,t,i=0;i<n.length;i++)t=n.charCodeAt(i),t>127?(u[r]=235,t=t-127,r++):t>=48&&t<=57&&i+1<n.length&&n.charCodeAt(i+1)>=48&&n.charCodeAt(i+1)<=57?(t=(t-48)*10+(n.charCodeAt(i+1)-48),t+=130,i++):t++,u[r]=t,r++;return u},addPadCW:function(n,t,i){if(!(t>=i)){n[t]=129;for(var u,r=t+1;r<i;r++)u=149*(r+1)%253+1,n[r]=(129+u)%254}},calculSolFactorTable:function(n){for(var r=[],i,t=0;t<=n;t++)r[t]=1;for(t=1;t<=n;t++)for(i=t-1;i>=0;i--)r[i]=this.champGaloisDoub(r[i],t),i>0&&(r[i]=this.champGaloisSum(r[i],r[i-1]));return r},addReedSolomonCW:function(n,t,i,r,u){for(var c=0,h=n/u,o=[],f,e,s=0;s<u;s++){for(f=0;f<h;f++)o[f]=0;for(f=s;f<i;f=f+u)for(c=this.champGaloisSum(r[f],o[h-1]),e=h-1;e>=0;e--)o[e]=c?this.champGaloisMult(c,t[e]):0,e>0&&(o[e]=this.champGaloisSum(o[e-1],o[e]));for(e=i+s,f=h-1;f>=0;f--)r[e]=o[f],e=e+u}return r},getBits:function(n){for(var i=[],t=0;t<8;t++)i[t]=n&128>>t?1:0;return i},next:function(n,t,i,r,u,f){var s=0,e=4,o=0;do{e==t&&o==0?(this.patternShapeSpecial1(u,f,r[s],t,i),s++):n<3&&e==t-2&&o==0&&i%4!=0?(this.patternShapeSpecial2(u,f,r[s],t,i),s++):e==t-2&&o==0&&i%8==4?(this.patternShapeSpecial3(u,f,r[s],t,i),s++):e==t+4&&o==2&&i%8==0&&(this.patternShapeSpecial4(u,f,r[s],t,i),s++);do e<t&&o>=0&&f[e][o]!=1&&(this.patternShapeStandard(u,f,r[s],e,o,t,i),s++),e-=2,o+=2;while(e>=0&&o<i);e+=1;o+=3;do e>=0&&o<i&&f[e][o]!=1&&(this.patternShapeStandard(u,f,r[s],e,o,t,i),s++),e+=2,o-=2;while(e<t&&o>=0);e+=3;o+=1}while(e<t||o<i)},patternShapeStandard:function(n,t,i,r,u,f,e){this.placeBitInDatamatrix(n,t,i[0],r-2,u-2,f,e);this.placeBitInDatamatrix(n,t,i[1],r-2,u-1,f,e);this.placeBitInDatamatrix(n,t,i[2],r-1,u-2,f,e);this.placeBitInDatamatrix(n,t,i[3],r-1,u-1,f,e);this.placeBitInDatamatrix(n,t,i[4],r-1,u,f,e);this.placeBitInDatamatrix(n,t,i[5],r,u-2,f,e);this.placeBitInDatamatrix(n,t,i[6],r,u-1,f,e);this.placeBitInDatamatrix(n,t,i[7],r,u,f,e)},patternShapeSpecial1:function(n,t,i,r,u){this.placeBitInDatamatrix(n,t,i[0],r-1,0,r,u);this.placeBitInDatamatrix(n,t,i[1],r-1,1,r,u);this.placeBitInDatamatrix(n,t,i[2],r-1,2,r,u);this.placeBitInDatamatrix(n,t,i[3],0,u-2,r,u);this.placeBitInDatamatrix(n,t,i[4],0,u-1,r,u);this.placeBitInDatamatrix(n,t,i[5],1,u-1,r,u);this.placeBitInDatamatrix(n,t,i[6],2,u-1,r,u);this.placeBitInDatamatrix(n,t,i[7],3,u-1,r,u)},patternShapeSpecial2:function(n,t,i,r,u){this.placeBitInDatamatrix(n,t,i[0],r-3,0,r,u);this.placeBitInDatamatrix(n,t,i[1],r-2,0,r,u);this.placeBitInDatamatrix(n,t,i[2],r-1,0,r,u);this.placeBitInDatamatrix(n,t,i[3],0,u-4,r,u);this.placeBitInDatamatrix(n,t,i[4],0,u-3,r,u);this.placeBitInDatamatrix(n,t,i[5],0,u-2,r,u);this.placeBitInDatamatrix(n,t,i[6],0,u-1,r,u);this.placeBitInDatamatrix(n,t,i[7],1,u-1,r,u)},patternShapeSpecial3:function(n,t,i,r,u){this.placeBitInDatamatrix(n,t,i[0],r-3,0,r,u);this.placeBitInDatamatrix(n,t,i[1],r-2,0,r,u);this.placeBitInDatamatrix(n,t,i[2],r-1,0,r,u);this.placeBitInDatamatrix(n,t,i[3],0,u-2,r,u);this.placeBitInDatamatrix(n,t,i[4],0,u-1,r,u);this.placeBitInDatamatrix(n,t,i[5],1,u-1,r,u);this.placeBitInDatamatrix(n,t,i[6],2,u-1,r,u);this.placeBitInDatamatrix(n,t,i[7],3,u-1,r,u)},patternShapeSpecial4:function(n,t,i,r,u){this.placeBitInDatamatrix(n,t,i[0],r-1,0,r,u);this.placeBitInDatamatrix(n,t,i[1],r-1,u-1,r,u);this.placeBitInDatamatrix(n,t,i[2],0,u-3,r,u);this.placeBitInDatamatrix(n,t,i[3],0,u-2,r,u);this.placeBitInDatamatrix(n,t,i[4],0,u-1,r,u);this.placeBitInDatamatrix(n,t,i[5],1,u-3,r,u);this.placeBitInDatamatrix(n,t,i[6],1,u-2,r,u);this.placeBitInDatamatrix(n,t,i[7],1,u-1,r,u)},placeBitInDatamatrix:function(n,t,i,r,u,f,e){r<0&&(r+=f,u+=4-(f+4)%8);u<0&&(u+=e,r+=4-(e+4)%8);t[r][u]!=1&&(n[r][u]=i,t[r][u]=1)},addFinderPattern:function(n,t,i,r,u){var h=(r+2)*t,s=(u+2)*i,o=[],e,f;for(o[0]=[],f=0;f<s+2;f++)o[0][f]=0;for(e=0;e<h;e++)for(o[e+1]=[],o[e+1][0]=0,o[e+1][s+1]=0,f=0;f<s;f++)e%(r+2)==0?o[e+1][f+1]=f%2==0?1:0:e%(r+2)==r+1?o[e+1][f+1]=1:f%(u+2)==u+1?o[e+1][f+1]=e%2==0?0:1:f%(u+2)==0?o[e+1][f+1]=1:(o[e+1][f+1]=0,o[e+1][f+1]=n[e-1-2*parseInt(e/(r+2))][f-1-2*parseInt(f/(u+2))]);for(o[h+1]=[],f=0;f<s+2;f++)o[h+1][f]=0;return o},getDigit:function(n,t){var s=this.encodeDataCodeWordsASCII(n),a=s.length,f=this.selectIndex(a,t),h=this.dataCWCount[f],c=this.solomonCWCount[f],b=h+c,k=this.lengthRows[f],d=this.lengthCols[f],v=this.regionRows[f],y=this.regionCols[f],g=this.dataRegionRows[f],nt=this.dataRegionCols[f],u=k-2*v,i=d-2*y,p=this.interleavedBlocks[f],tt=c/p,w,l,e,o,r;for(this.addPadCW(s,a,h),w=this.calculSolFactorTable(tt),this.addReedSolomonCW(c,w,h,s,p),l=[],r=0;r<b;r++)l[r]=this.getBits(s[r]);for(e=[],o=[],r=0;r<i;r++)e[r]=[],o[r]=[];return u*i%8==4&&(e[u-2][i-2]=1,e[u-1][i-1]=1,e[u-1][i-2]=0,e[u-2][i-1]=0,o[u-2][i-2]=1,o[u-1][i-1]=1,o[u-1][i-2]=1,o[u-2][i-1]=1),this.next(0,u,i,l,e,o),this.addFinderPattern(e,v,y,g,nt)}},lec:{cInt:function(n,t){for(var r="",i=0;i<t;i++)r+=String.fromCharCode(n&255),n=n>>8;return r},cRgb:function(n,t,i){return String.fromCharCode(i)+String.fromCharCode(t)+String.fromCharCode(n)},cHexColor:function(n){var t=parseInt("0x"+n.substr(1)),u=t&255,i,r;return t=t>>8,i=t&255,r=t>>8,this.cRgb(r,i,u)}},hexToRGB:function(n){var t=parseInt("0x"+n.substr(1)),u=t&255,i,r;return t=t>>8,i=t&255,r=t>>8,{r:r,g:i,b:u}},isHexColor:function(n){var t=new RegExp("#[0-91-F]","gi");return n.match(t)},base64Encode:function(n){for(var s="",e,t,i,h,c,o,r,u="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",f=0;f<n.length;)e=n.charCodeAt(f++),t=n.charCodeAt(f++),i=n.charCodeAt(f++),h=e>>2,c=(e&3)<<4|t>>4,o=(t&15)<<2|i>>6,r=i&63,isNaN(t)?o=r=64:isNaN(i)&&(r=64),s+=u.charAt(h)+u.charAt(c)+u.charAt(o)+u.charAt(r);return s},bitStringTo2DArray:function(n){var i=[],t;for(i[0]=[],t=0;t<n.length;t++)i[0][t]=n.charAt(t);return i},resize:function(n,t){return n.css("padding","0px").css("overflow","auto").css("width",t+"px").html(""),n},digitToBmpRenderer:function(n,t,i,r,u,f){for(var a=i.length,o=i[0].length,e=0,g=this.isHexColor(t.bgColor)?this.lec.cHexColor(t.bgColor):this.lec.cRgb(255,255,255),nt=this.isHexColor(t.color)?this.lec.cHexColor(t.color):this.lec.cRgb(0,0,0),w="",b="",y,s,h,c,p,l,e=0;e<u;e++)w+=g,b+=nt;var v=(4-u*o*3%4)%4,k=(u*o+v)*f*a,d="";for(e=0;e<v;e++)d+='\0';for(y="BM"+this.lec.cInt(54+k,4)+'\0\0\0\0'+this.lec.cInt(54,4)+this.lec.cInt(40,4)+this.lec.cInt(u*o,4)+this.lec.cInt(f*a,4)+this.lec.cInt(1,2)+this.lec.cInt(24,2)+'\0\0\0\0'+this.lec.cInt(k,4)+this.lec.cInt(2835,4)+this.lec.cInt(2835,4)+this.lec.cInt(0,4)+this.lec.cInt(0,4),s=a-1;s>=0;s--){for(h="",c=0;c<o;c++)h+=i[s][c]=="0"?w:b;for(h+=d,p=0;p<f;p++)y+=h}l=document.createElement("object");l.setAttribute("type","image/bmp");l.setAttribute("data","data:image/bmp;base64,"+this.base64Encode(y));this.resize(n,u*o+v).append(l)},digitToBmp:function(n,i,r,u){var f=t.intval(i.barWidth),e=t.intval(i.barHeight);this.digitToBmpRenderer(n,i,this.bitStringTo2DArray(r),u,f,e)},digitToBmp2D:function(n,i,r,u){var f=t.intval(i.moduleSize);this.digitToBmpRenderer(n,i,r,u,f,f)},digitToCssRenderer:function(n,t,i,r,u,f){for(var y=i.length,l=i[0].length,c="",a='<div style="float: left; font-size: 0px; background-color: '+t.bgColor+"; height: "+f+'px; width: &Wpx"><\/div>',v='<div style="float: left; font-size: 0px; width:0; border-left: &Wpx solid '+t.color+"; height: "+f+'px;"><\/div>',e,s,h,o=0;o<y;o++){for(e=0,s=i[o][0],h=0;h<l;h++)s==i[o][h]?e++:(c+=(s=="0"?a:v).replace("&W",e*u),s=i[o][h],e=1);e>0&&(c+=(s=="0"?a:v).replace("&W",e*u))}t.showHRI&&(c+='<div style="clear:both; width: 100%; background-color: '+t.bgColor+"; color: "+t.color+"; text-align: center; font-size: "+t.fontSize+"px; margin-top: "+t.marginHRI+'px;">'+r+"<\/div>");this.resize(n,u*l).html(c)},digitToCss:function(n,i,r,u){var f=t.intval(i.barWidth),e=t.intval(i.barHeight);this.digitToCssRenderer(n,i,this.bitStringTo2DArray(r),u,f,e)},digitToCss2D:function(n,i,r,u){var f=t.intval(i.moduleSize);this.digitToCssRenderer(n,i,r,u,f,f)},digitToSvgRenderer:function(n,i,r,u,f,e){var k=r.length,w=r[0].length,a=f*w,v=e*k,y,o,b,s,l,h,c,p;for(i.showHRI&&(y=t.intval(i.fontSize),v+=t.intval(i.marginHRI)+y),o='<svg xmlns="http://www.w3.org/2000/svg" version="1.1" width="'+a+'" height="'+v+'">',o+='<rect width="'+a+'" height="'+v+'" x="0" y="0" fill="'+i.bgColor+'" />',b='<rect width="&W" height="'+e+'" x="&X" y="&Y" fill="'+i.color+'" />',h=0;h<k;h++){for(s=0,l=r[h][0],c=0;c<w;c++)l==r[h][c]?s++:(l=="1"&&(o+=b.replace("&W",s*f).replace("&X",(c-s)*f).replace("&Y",h*e)),l=r[h][c],s=1);s>0&&l=="1"&&(o+=b.replace("&W",s*f).replace("&X",(w-s)*f).replace("&Y",h*e))}i.showHRI&&(o+='<g transform="translate('+Math.floor(a/2)+' 0)">',o+='<text y="'+(v-Math.floor(y/2))+'" text-anchor="middle" style="font-family: Arial; font-size: '+y+'px;" fill="'+i.color+'">'+u+"<\/text>",o+="<\/g>");o+="<\/svg>";p=document.createElement("object");p.setAttribute("type","image/svg+xml");p.setAttribute("data","data:image/svg+xml,"+o);this.resize(n,a).append(p)},digitToSvg:function(n,i,r,u){var f=t.intval(i.barWidth),e=t.intval(i.barHeight);this.digitToSvgRenderer(n,i,this.bitStringTo2DArray(r),u,f,e)},digitToSvg2D:function(n,i,r,u){var f=t.intval(i.moduleSize);this.digitToSvgRenderer(n,i,r,u,f,f)},digitToCanvasRenderer:function(n,t,i,r,u,f,e,o){var y=n.get(0),h,c,a,l,w;if(y&&y.getContext){var p=i.length,v=i[0].length,s=y.getContext("2d");for(s.lineWidth=1,s.lineCap="butt",s.fillStyle=t.bgColor,s.fillRect(u,f,v*e,p*o),s.fillStyle=t.color,h=0;h<p;h++){for(c=0,a=i[h][0],l=0;l<v;l++)a==i[h][l]?c++:(a=="1"&&s.fillRect(u+(l-c)*e,f+h*o,e*c,o),a=i[h][l],c=1);c>0&&a=="1"&&s.fillRect(u+(v-c)*e,f+h*o,e*c,o)}t.showHRI&&(w=s.measureText(r),s.fillText(r,u+Math.floor((v*e-w.width)/2),f+p*o+t.fontSize+t.marginHRI))}},digitToCanvas:function(n,i,r,u){var f=t.intval(i.barWidth),e=t.intval(i.barHeight),o=t.intval(i.posX),s=t.intval(i.posY);this.digitToCanvasRenderer(n,i,this.bitStringTo2DArray(r),u,o,s,f,e)},digitToCanvas2D:function(n,i,r,u){var f=t.intval(i.moduleSize),e=t.intval(i.posX),o=t.intval(i.posY);this.digitToCanvasRenderer(n,i,r,u,e,o,f,f)}};n.fn.extend({barcode:function(i,r,u){var e="",o="",f="",s=!0,v=!1,c=!1,h,l,a;if(typeof i=="string"?f=i:typeof i=="object"&&(f=typeof i.code=="string"?i.code:"",s=typeof i.crc!="undefined"?i.crc:!0,v=typeof i.rect!="undefined"?i.rect:!1),f=="")return!1;typeof u=="undefined"&&(u=[]);for(h in t.settings)u[h]==undefined&&(u[h]=t.settings[h]);switch(r){case"std25":case"int25":e=t.i25.getDigit(f,s,r);o=t.i25.compute(f,s,r);break;case"ean8":case"ean13":e=t.ean.getDigit(f,r);o=t.ean.compute(f,r);break;case"upc":e=t.upc.getDigit(f);o=t.upc.compute(f);break;case"code11":e=t.code11.getDigit(f);o=f;break;case"code39":e=t.code39.getDigit(f);o=f;break;case"code93":e=t.code93.getDigit(f,s);o=f;break;case"code128":e=t.code128.getDigit(f);o=f;break;case"codabar":e=t.codabar.getDigit(f);o=f;break;case"msi":e=t.msi.getDigit(f,s);o=t.msi.compute(f,s);break;case"datamatrix":e=t.datamatrix.getDigit(f,v);o=f;c=!0}return e.length==0?n(this):(!c&&u.addQuietZone&&(e="0000000000"+e+"0000000000"),l=n(this),a="digitTo"+u.output.charAt(0).toUpperCase()+u.output.substr(1)+(c?"2D":""),typeof t[a]=="function"&&t[a](l,u,e,o),l)}})})(jQuery),function(n){function i(n,t){if(!(n.originalEvent.touches.length>1)){n.preventDefault();var i=n.originalEvent.changedTouches[0],r=document.createEvent("MouseEvents");r.initMouseEvent(t,!0,!0,window,1,i.screenX,i.screenY,i.clientX,i.clientY,!1,!1,!1,!1,0,null);n.target.dispatchEvent(r)}}if(n.support.touch="ontouchend"in document,n.support.touch){var t=n.ui.mouse.prototype,u=t._mouseInit,f=t._mouseDestroy,r;t._touchStart=function(n){var t=this;!r&&t._mouseCapture(n.originalEvent.changedTouches[0])&&(r=!0,t._touchMoved=!1,i(n,"mouseover"),i(n,"mousemove"),i(n,"mousedown"))};t._touchMove=function(n){r&&(this._touchMoved=!0,i(n,"mousemove"))};t._touchEnd=function(n){r&&(i(n,"mouseup"),i(n,"mouseout"),this._touchMoved||i(n,"click"),r=!1)};t._mouseInit=function(){var t=this;t.element.bind({touchstart:n.proxy(t,"_touchStart"),touchmove:n.proxy(t,"_touchMove"),touchend:n.proxy(t,"_touchEnd")});u.call(t)};t._mouseDestroy=function(){var t=this;t.element.unbind({touchstart:n.proxy(t,"_touchStart"),touchmove:n.proxy(t,"_touchMove"),touchend:n.proxy(t,"_touchEnd")});f.call(t)}}}(jQuery);VA005=window.VA005||{},function(n,t){n.ProductMgtForm=function(){function ua(){var r,n;kr=t("<td class='VA005-Left-Bar'>");er=t("<div class='VA005-apanel-lb'>");pe=t("<div class='vis-apanel-lb-toggle' ><i class='fa fa-bars' aria-hidden='true'><\/i><\/div>");ss=t('<div class="VA005-Serach-Query"><span>'+VIS.Msg.getMsg("VA005_SearchQuery")+"<\/span><Select id = queryCat_"+i.windowNo+' class="VA005-left-panel"><\/Select><\/div>');fc=t('<div class="VA005-Serach-Query"><span>'+VIS.Msg.getMsg("VA005_SearchBy")+'<\/span><Select id = "searchBy_'+i.windowNo+'" class="VA005-left-panel"><option selected="selected" value="C">'+VIS.Msg.getMsg("VA005_SearchByCat")+'<\/option><option value="T">'+VIS.Msg.getMsg("VA005_SearchByTree")+"<\/option><\/Select><\/div>");af=t('<div class="VA005-left-input-panel"><input id = VA005_searchCat_'+i.windowNo+' class="VA005-left-panelInput" type="text" value="" placeholder="'+VIS.Msg.getMsg("Search")+'"><button class=" vis-group-pointer vis-group-ass-btns vis-group-search-icon"><i class="vis vis-search"><\/i><\/button><\/div>');vi=t("<ul id= leftUi_"+i.windowNo+">");ot=t('<div class="vis-apanel-lb-main VA005-div-left-main">');ot.append(ss);ot.append(fc);ot.append('<div class="VA005-left-cat-panel"> <h4>'+VIS.Msg.getMsg("VA005_Categories")+"<\/h4><\/div>");ot.append(af);ot.append(vi);ot.append(oi);er.append(pe);er.append(ot);kr.append(er);ir=t('<div class="VA005-middle-head"><div class="VA005-middle-search"><button class="vis-group-add-btn vis-group-pointer vis-group-addLeft vis-group-ass-btns" ><i class="vis vis-plus"><\/i><\/button><input class="vis-group-SearchText vis-group-addLeft" style="border-radius:0;height:29px;" value="" placeholder="'+VIS.Msg.getMsg("Search")+'" type="text"><button class="vis-group-pointer vis-group-ass-btns vis-group-search-icon"><i class="vis vis-search"><\/i><\/button><\/div><div class="VA005-middle-icons"><ul><li id="btnRefreshForm_'+i.windowNo+'"><span class="glyphicon glyphicon-refresh VA005-icons-font" title="'+VIS.Msg.getMsg("VA005_Refresh")+'"><\/span><\/li><li id="btnCopy_'+i.windowNo+'"><span class="vis vis-copy VA005-icons-font" title="'+VIS.Msg.getMsg("Copy")+'"><\/span><\/li><li id="btnImage_'+i.windowNo+'"><span class="glyphicon glyphicon-picture VA005-icons-font" title="'+VIS.Msg.getMsg("VA005_UploadImage")+'"><\/span><\/li><li id="btnSupplier_'+i.windowNo+'"><span class="glyphicon glyphicon-user VA005-icons-font" title="'+VIS.Msg.getMsg("VA005_UpdateSupplier")+'"><\/span><\/li><li id="btnPriceList_'+i.windowNo+'"><span class="glyphicon glyphicon-usd VA005-icons-font" title="'+VIS.Msg.getMsg("VA005_UpdatePrice")+'"><\/span><\/li><li id="btnAddCart_'+i.windowNo+'"><span class="glyphicon glyphicon-shopping-cart VA005-icons-font" title="'+VIS.Msg.getMsg("VA005_AddCart")+'"><\/span><\/li><li id="btnEditMuLtiple_'+i.windowNo+'"><span class="glyphicon glyphicon-edit VA005-icons-font" title="'+VIS.Msg.getMsg("VA005_UpdateProduct")+'"><\/span><\/li><\/ul><\/div><\/div><div class="VA005-middle-cat-bar"><span style="font-weight:bold;">'+VIS.Msg.getMsg("VA005_Categories")+' : <\/span><span id="btnShowAll_'+i.windowNo+'" class="vis-group-pointer" style="color:#1aa0ed;">'+VIS.Msg.getMsg("All")+'<\/span> <span id="catInfo_'+i.windowNo+'" style="display:none;"><\/span><\/div><div class="VA005-middle-cart-bar"><input type="checkbox" id="VA005_chkAll_'+i.windowNo+'"><\/input><span>'+VIS.Msg.getMsg("SelectAll")+'<\/span><div style="float:right;margin-right:20px;"><span style="font-weight:bold;">'+VIS.Msg.getMsg("VA005_SelectedCart")+' : <\/span><span id="VA005_cartInfo_'+i.windowNo+'">'+VIS.Msg.getMsg("None")+"<\/span><\/div><\/div>");lr=t('<div class="VA005-right-head VA005-tab-control"><ul class="VA005-tabs" style="overflow: auto;white-space: nowrap;"><li id="VA005_btnDetails_'+i.windowNo+'" class="VA005-selectedTab" style="margin: 0 0px 0 2px;">'+VIS.Msg.getMsg("Details")+'<\/li><li id="VA005_btnVarient_'+i.windowNo+'" style="margin: 0 0px 0 2px;">'+VIS.Msg.getMsg("VA005_Varients")+'<\/li><li id="VA005_btnUom_'+i.windowNo+'" style="margin: 0 0px 0 2px;">'+VIS.Msg.getElement(VIS.Env.getCtx(),"C_UOM_ID")+'<\/li><li id="VA005_btnRelated_'+i.windowNo+'" style="margin: 0 0px 0 2px;">'+VIS.Msg.getMsg("Related")+'<\/li><li id="VA005_btnCart_'+i.windowNo+'" style="margin: 0 0px 0 2px;float:right;">'+VIS.Msg.getMsg("VA005_Cart")+"<\/li><\/ul><\/div>");wo=t('<div style="float:right;margin-right:15px;position:absolute;right:0;width:100%"><p id="VA005_SelectedNodeText_'+i.windowNo+'" style="float: left;padding-left: 15px;color: #1aa0ed;font-size: 16px;font-weight: bold;">bfehfh<\/p><div style="float:right"><span id="VA005_btnDeleteAttVal_'+i.windowNo+'"  class="VA005-RemoveLinkeImage VA005-AttValOpacity" style="font-size:18px;margin-right:6px" title="'+VIS.Msg.getMsg("VA005_RemoveImage")+'"><\/span><span id="VA005_btnDeleteCross_'+i.windowNo+'"  style="font-size: 18px;" class="glyphicon glyphicon-remove-circle " title="'+VIS.Msg.getMsg("VA005_Close")+'"><\/span><\/div><\/div>');y=t('<div class="VA005-AttributesValMainDiv"><\/div>');ci=t('<div class="VA005-middle-left-main" style="height:98%" >').append(ir);o=t('<div class="VA005-middle-right-main">');or=t('<div class="VA005-middle-right-main">');r='<div class="VA005-Image-panel-top"><div class="VA005-Image-panel-div"><i id="VA005_btnerase_'+i.windowNo+'" class="fa fa-eraser" title="'+VIS.Msg.getMsg("Clear")+'"><\/i><span id="VA005_ImgDelete_'+i.windowNo+'" class="glyphicon glyphicon-trash " style="font-size: 22px !important;" title="'+VIS.Msg.getMsg("DeleteActivity")+'"><\/span><span id="VA005_btnUpload_'+i.windowNo+'" class="glyphicon glyphicon-upload " title="'+VIS.Msg.getMsg("VA005_UploadImage")+'"><\/span><span id="VA005_btnImgCancel_'+i.windowNo+'" class="glyphicon glyphicon-remove-circle " title="'+VIS.Msg.getMsg("Cancel")+'"><\/span><\/div><\/div>';or.append(r);n=t('<div class="VA005-div-images"><ul class="VA005-productimgul"><\/ul><\/div>');or.append(n);vu=n.find(".VA005-productimgul");or.hide();vf=t("<td>");we=t('<div style="position: relative;width: 100%;height: 100%;background-color:white;">');ec=t('<div class="VA005-middle-div-main">').append(ci).append(o).append(or);we.append(ec);vf.append(we);hs=t("<tr>").append(kr).append(vf);lf=t("<table style='width:100%;height:100%;'>");lf.append(hs);f.append(lf);o.append(lr);ft=f.find("#queryCat_"+i.windowNo);yf=f.find("#searchBy_"+i.windowNo);cs=f.find("#leftUi_"+i.windowNo);ls=f.find(".VA005-left-cat-panel");di=ot.find("#VA005_searchCat_"+i.windowNo);oc=ot.find(".vis-group-search-icon");th=f.find("#btnCopy_"+i.windowNo);ge=f.find("#btnImage_"+i.windowNo);ih=f.find("#btnPriceList_"+i.windowNo);rh=f.find("#btnSupplier_"+i.windowNo);uh=f.find("#btnEditMuLtiple_"+i.windowNo);te=f.find("#btnAddCart_"+i.windowNo);fh=f.find("#btnShowAll_"+i.windowNo);ct=f.find("#VA005_chkAll_"+i.windowNo);gu=f.find("#VA005_btnDetails_"+i.windowNo);su=f.find("#VA005_btnVarient_"+i.windowNo);hu=f.find("#VA005_btnUom_"+i.windowNo);nf=f.find("#VA005_btnRelated_"+i.windowNo);ie=f.find("#VA005_btnCart_"+i.windowNo);to=f.find("#VA005_ImgDelete_"+i.windowNo);uo=f.find("#VA005_btnerase_"+i.windowNo);no=f.find("#VA005_btnUpload_"+i.windowNo);ch=f.find("#VA005_btnImgCancel_"+i.windowNo);yc=f.find("#btnRefreshForm_"+i.windowNo);du=f.find("#catInfo_"+i.windowNo);fa();ea();br=t('<ul class="vis-apanel-rb-ul"><li data-action="zoom" style="opacity: 1" title="'+VIS.Msg.getMsg("VA005_Zoom")+'"><img data-action="zoom" src="Areas/VIS/Images/Zoom16.png"><\/li><li data-action="refresh" title="'+VIS.Msg.getMsg("VA005_Refresh")+'"><img data-action="refresh" src="Areas/VIS/Images/Refresh16.png"><\/li><\/ul');$ImageZoom=t('<div id="popupPhotoLandscape" class="VA005-large"><\/div>');f.append($ImageZoom);$ImageZoom.hide();er.height(kr.height());ot.height(er.height()-43);po=ot.height()-f.find(".VA005-Serach-Query").height()*2-30}function yu(n,i,u){t.ajax({url:VIS.Application.contextUrl+"VA005/ProductManagement/GetProdCats",type:"GET",datatype:"json",contentType:"application/json; charset=utf-8",data:{searchText:n,pageNo:i,pageSize:u},success:function(n){var t=JSON.parse(n);if(t.length>0){i==1&&(bh=Math.ceil(t[0].TotalRecords/u));for(item in t)vi.append("<li procatid = "+t[item].M_ProdCatID+"><span procatid = "+t[item].M_ProdCatID+">"+VIS.Utility.encodeText(t[item].Catname)+" ("+t[item].ProdCount+")<\/span><\/li>")}i>1&&(r[0].style.visibility="hidden")},error:function(){VIS.ADialog.error("VA005_ErrorLoadingProdCats");r[0].style.visibility="hidden"}})}function fa(){yt=ir.find(".vis-group-SearchText");as=ir.find(".vis-group-search-icon");vs=ir.find(".vis-group-add-btn");ht=t('<div style="width:100%">');e=t('<div class="vis-group-users-container" style="margin:0;">');e.height(t(f.parent()).height()-95);ht.append(e);ko=t('<div style="height:100%">');ko.append(ht).append(t('<div class="VA005-attrValuesWraperDiv" >').append(y));ci.append(ko);ra=ko.find(".VA005-attrValuesWraperDiv");ht.resizable({handles:"s,se"});ht.find(".ui-resizable-s").css("display","none");ht.find(".ui-resizable-se").css("display","none");f.find(".ui-resizable-s").css("height","10px")}function ea(){var r,n;ys='<div id="VA005_divUom_'+i.windowNo+'" class="VA005-right-head-btn"><div class="VA005-Add-Btn" id="VA005_btnAddUom_'+i.windowNo+'"><span class="glyphicon glyphicon-plus" ><\/span><span style="margin-left:10px;">'+VIS.Msg.getMsg("VA005_AddUom")+'<\/span><\/div><div id="VA005_divConversion_'+i.windowNo+'" class="VA005-conv-form"><div class="VA005-conv-data"><select id="cmbUomTo_'+i.windowNo+'"><\/select><\/div><div class="VA005-conv-data"><div class="VA005-conversion-data"><label>'+VIS.Msg.getElement(VIS.Env.getCtx(),"MultiplyRate")+'<\/label><input type="number" step="any" maxlength="26" class="vis-gc-vpanel-table-mandatory" style="display: inline-block;" id="VA005_txtMul_'+i.windowNo+'"><\/div><div class="VA005-conversion-data"><label>'+VIS.Msg.getElement(VIS.Env.getCtx(),"DivideRate")+'<\/label><input type="number" step="any" maxlength="26" class="vis-gc-vpanel-table-mandatory" style="display: inline-block;" id="VA005_txtDiv_'+i.windowNo+'"><\/div><\/div><div class="VA005-conv-data"><div class="VA005-conversion-data"><label>'+VIS.Msg.getElement(VIS.Env.getCtx(),"UPC")+'<\/label><input id="VA005_uomUPC_'+i.windowNo+'"><\/div><div class="VA005-conversion-icons" style="margin-top:29px;"><span id="VA005_btnSaveUom_'+i.windowNo+'" class="VA005-icons glyphicon glyphicon-floppy-disk VA005-icons-font VA005-disabled" tabindex="0" title="'+VIS.Msg.getMsg("Save")+'"><\/span><span id="VA005_btnCancelUom_'+i.windowNo+'" class="VA005-icons glyphicon glyphicon-remove-circle VA005-icons-font" tabindex="0" title="'+VIS.Msg.getMsg("Cancel")+'"><\/span><\/div><\/div>';o.append(ys);v=t('<div class="VA005-uom-list">');o.append(v);sr=o.find("#VA005_divUom_"+i.windowNo);sr.hide();v.hide();tf=o.find("#VA005_btnAddUom_"+i.windowNo);bu=o.find("#VA005_divConversion_"+i.windowNo);bu.hide();bi=o.find("#cmbUomTo_"+i.windowNo);vr=o.find("#VA005_txtMul_"+i.windowNo);yr=o.find("#VA005_txtDiv_"+i.windowNo);ee=o.find("#VA005_uomUPC_"+i.windowNo);re=o.find("#VA005_btnSaveUom_"+i.windowNo);hh=o.find("#VA005_btnCancelUom_"+i.windowNo);v.on("click",sy);o.append('<div id="VA005_divVarient_'+i.windowNo+'" class="VA005-right-head-btn"><div class="VA005-Add-Btn" id="VA005_btnAddVarient_'+i.windowNo+'"><span class="glyphicon glyphicon-plus" ><\/span><span style="margin-left:10px;">'+VIS.Msg.getMsg("VA005_AddVarient")+'<\/span><\/div><div class="VA005-Gen-Btn" id="VA005_btnGenerate_'+i.windowNo+'"><span class="glyphicon glyphicon-list-alt" ><\/span><span style="margin-left:10px;">'+VIS.Msg.getMsg("VA005_GenVariant")+'<\/span><\/div><div class="VA005-conv-form"><div class="VA005-conv-data" id="VA005_divAttr_'+i.windowNo+'"><\/div><\/div>');c=t('<div class="VA005-uom-list">');pt=t('<div class="VA005-tree-list">');kt=t('<div class="VA005-tree-data">');pt.append('<div style="float:right;margin-top: 5px;"><span id="VA005_SaveAttribute_'+i.windowNo+'" class="VA005-icons glyphicon glyphicon-floppy-disk VA005-icons-font" title="'+VIS.Msg.getMsg("Save")+'"><\/span><span id="VA005_btnCancelGenerate_'+i.windowNo+'" class="VA005-icons glyphicon glyphicon-remove-circle VA005-icons-font" title="'+VIS.Msg.getMsg("Cancel")+'"><\/span><\/div>').append(kt);o.append(c).append(pt);tr=o.find("#VA005_divVarient_"+i.windowNo);tr.hide();c.hide();pt.hide();cr=o.find("#VA005_divAttr_"+i.windowNo);cr.hide();rf=o.find("#VA005_btnAddVarient_"+i.windowNo);nu=o.find("#VA005_btnGenerate_"+i.windowNo);eh=o.find("#VA005_SaveAttribute_"+i.windowNo);oh=o.find("#VA005_btnCancelGenerate_"+i.windowNo);r=new VIS.MPAttributeLookup(VIS.context,i.windowNo);rr=new VIS.Controls.VPAttribute("M_AttributeSetInstance_ID",!1,!1,!0,VIS.DisplayType.PAttribute,r,i.windowNo,!1,!1,!1,!0);rr.getControl().css("width","55%");rr.getControl().css("float","left");rr.getControl().css("height","29px");rr.getBtn(0).css("height","29px");rr.getBtn(0).css("float","left");cr.append(rr.getControl());cr.append(rr.getBtn(0));cr.append('<span id="VA005_btnCancelVarient_'+i.windowNo+'" class="VA005-icons glyphicon glyphicon-remove-circle VA005-icons-color" style="font-size:29px;float:left;" title="'+VIS.Msg.getMsg("Cancel")+'"><\/span>');sh=o.find("#VA005_btnCancelVarient_"+i.windowNo);c.on("click",hy);o.append('<div id="VA005_divCart_'+i.windowNo+'" class="VA005-right-head"><div class="VA005-conversion-data"><label>'+VIS.Msg.getMsg("VA005_Cart")+'<\/label><\/div><div class="VA005-conversion-data"><span class="VA005-cart-update" style="display:none;"><\/span><\/div><div id="VA005_divCartList_'+i.windowNo+'" class="VA005-conv-data"><div class="VA005-conversion-data"><select id="VA005_cmbCart_'+i.windowNo+'"><\/select><\/div><div style="float:left;margin-top: 5px;"><span class="VA005-icons glyphicon glyphicon-plus VA005-icons-font" title="'+VIS.Msg.getMsg("VA005_AddNewCart")+'"><\/span><span class="VA005-icons glyphicon glyphicon-edit VA005-icons-font" title="'+VIS.Msg.getMsg("Edit")+'"><\/span><span class="VA005-icons glyphicon glyphicon-refresh VA005-icons-font" title="'+VIS.Msg.getMsg("VA005_Refresh")+'"><\/span><span class="VA005-icons glyphicon glyphicon-print VA005-icons-font" title="'+VIS.Msg.getMsg("Print")+'"><\/span><\/div><\/div><div id="VA005_divNewCart_'+i.windowNo+'" class="VA005-conv-data"><div class="VA005-conversion-data"><input id="VA005_scanName_'+i.windowNo+'"><\/div><div style="float:left;margin-top: 5px;"><span id="VA005_SaveScanName_'+i.windowNo+'" class="VA005-icons glyphicon glyphicon-floppy-disk VA005-icons-font" tabindex="0" title="'+VIS.Msg.getMsg("Save")+'"><\/span><span id="VA005_btnCancelScan_'+i.windowNo+'" class="VA005-icons glyphicon glyphicon-remove-circle VA005-icons-font" tabindex="0" title="'+VIS.Msg.getMsg("Cancel")+'"><\/span><\/div><\/div><\/div>');yi=t('<div class="VA005-uom-list">');yi.append(bs);o.append(yi);ti=o.find("#VA005_divCart_"+i.windowNo);hr=o.find("#VA005_divCartList_"+i.windowNo);nr=o.find("#VA005_divNewCart_"+i.windowNo);ti.hide();nr.hide();yi.hide();lh=ti.find(".glyphicon-plus");ah=ti.find(".glyphicon-edit");vh=ti.find(".glyphicon-refresh");pc=ti.find(".glyphicon-print");it=ti.find("#VA005_cmbCart_"+i.windowNo);tu=o.find("#VA005_scanName_"+i.windowNo);io=o.find("#VA005_SaveScanName_"+i.windowNo);ro=o.find("#VA005_btnCancelScan_"+i.windowNo);o.find(".VA005-cart-update").text(VIS.Msg.getMsg("Updated"));gi=t('<div class="VA005-uom-list">');dr=t('<div class="VA005-right-head" ><div class="VA005-form-top-fields"><div id="VA005_ProdDetZoomName_'+i.windowNo+'" style= "display:none"><h4 id="VA005_prodName_'+i.windowNo+'" style="float:left;word-wrap:break-word;width:85%"><\/h4><span id="VA005_ZoomProduct" title='+VIS.Msg.getMsg("VA005_ZoomToProduct")+' class="VA005-icons VA005-icons-font glyphicon glyphicon-edit" style="margin-top:5px"><\/span><\/div><div style="float:left; width:100%" class="VA005-data-wrap" id="VA005_UPC_'+i.windowNo+'"><p>'+VIS.Msg.getElement(VIS.Env.getCtx(),"UPC")+'<\/p><\/div><div style="float:left;" class="VA005-data-wrap" id="VA005_AttributeSet_'+i.windowNo+'"><p>'+VIS.Msg.getElement(VIS.Env.getCtx(),"M_AttributeSet_ID")+'<\/p><\/div><\/div><!-- end of form-top-fields --><div class="VA005-image-wrap" style="text-align: center; line-height: 146px;"><\/div><\/div>');o.append(gi);gi.append(dr);fr=dr.find(".VA005-image-wrap");vo=t('<img style="max-height: 100%; max-width: 100%;" src='+VIS.Application.contextUrl+"Areas/VA005/Images/img-defult.png>");fr.append(t('<i style="max-height: 100%; max-width: 100%;" class="fa fa-picture-o" ><\/i>'));gr=t('<div class="VA005-form-fullFields"><div id="VA005_ProductType_'+i.windowNo+'" class="VA005-data-wrap"><p>'+VIS.Msg.getElement(VIS.Env.getCtx(),"ProductType")+'<\/p><\/div><div id="VA005_ProdCategory_'+i.windowNo+'" class="VA005-data-wrap"><p>'+VIS.Msg.getElement(VIS.Env.getCtx(),"M_Product_Category_ID")+'<\/p><\/div><div id="VA005_prodTaxCat_'+i.windowNo+'" class="VA005-data-wrap"><p>'+VIS.Msg.getElement(VIS.Env.getCtx(),"C_TaxCategory_ID")+'<\/p><\/div><div id="VA005_prodUOM_'+i.windowNo+'" class="VA005-data-wrap"><p>'+VIS.Msg.getElement(VIS.Env.getCtx(),"C_UOM_ID")+'<\/p><\/div><div id="VA005_ProdParent_'+i.windowNo+'" class="VA005-data-wrap"><p>'+VIS.Msg.getElement(VIS.Env.getCtx(),"IsSummary")+"<\/p><\/div><\/div><!-- end of form-fullFields -->");gi.append(gr);be=t("#VA005_ProdDetZoomName_"+i.windowNo);ke=dr.find("#VA005_prodName_"+i.windowNo);pf=dr.find("#VA005_UPC_"+i.windowNo);wf=dr.find("#VA005_AttributeSet_"+i.windowNo);df=gr.find("#VA005_ProductType_"+i.windowNo);bf=gr.find("#VA005_ProdCategory_"+i.windowNo);kf=gr.find("#VA005_prodTaxCat_"+i.windowNo);gf=gr.find("#VA005_prodUOM_"+i.windowNo);de=gr.find("#VA005_ProdParent_"+i.windowNo);sc=dr.find(".glyphicon-edit");li=t('<div class="VA005-uom-list">');o.append(li);li.hide();o.append("<div class='VA005-popup'><input type='text' maxlength=40 id='VA005_upcTxt_"+i.windowNo+"'><\/input><span id='VA005_upcOK_"+i.windowNo+"' class='glyphicon glyphicon-ok' title='"+VIS.Msg.getMsg("Save")+"'><\/span><span id='VA005_btnCancelUpc_"+i.windowNo+"' class='glyphicon glyphicon-remove' title='"+VIS.Msg.getMsg("Cancel")+"'><\/span><\/div>");ue=o.find(".VA005-popup");ar=o.find("#VA005_upcTxt_"+i.windowNo);o.find("#VA005_upcOK_"+i.windowNo).on("click",function(){if(ar.val()!="")ol();else return});n=[];n.push(8);n.push(9);n.push(46);n.push(36);n.push(35);n.push(37);n.push(39);n.push(13);ar.on("keydown",function(t){if(t.keyCode>=48&&t.keyCode<=57||t.keyCode>=65&&t.keyCode<=90||t.keyCode>=97&&t.keyCode<=105||n.indexOf(t.keyCode)!=-1&&t.charCode!=t.keyCode){if(t.keyCode==13)if(ar.val()!="")ol();else return!1}else return!1});o.find("#VA005_btnCancelUpc_"+i.windowNo).on("click",function(){ue.popup("hide");ar.val("");uf=0})}function oa(){g.append(ps);ps.append('<div class="VA005-product-data"><label>'+VIS.Msg.getElement(VIS.Env.getCtx(),"Value")+'<\/label><input id="txtValue_'+i.windowNo+'" type="text"><\/div><div class="VA005-product-data"><label>'+VIS.Msg.getElement(VIS.Env.getCtx(),"AD_Org_ID")+'<\/label><select id="VA005_cmbOrg_'+i.windowNo+'"><\/select><\/div><div class="VA005-product-data"><label>'+VIS.Msg.getElement(VIS.Env.getCtx(),"Name")+'<\/label><input class="vis-gc-vpanel-table-mandatory" id="txtName_'+i.windowNo+'" type="text" ><\/div><div class="VA005-product-data"><div class="VA005-product-dataIcon"><label>'+VIS.Msg.getElement(VIS.Env.getCtx(),"M_Product_Category_ID")+'<\/label><select class="vis-gc-vpanel-table-mandatory" id="cmbCat_'+i.windowNo+'"><\/select><input type="button" id="btnProdCat_'+i.windowNo+'"><\/div><\/div><div class="VA005-product-data"><label>'+VIS.Msg.getElement(VIS.Env.getCtx(),"ProductType")+'<\/label><select id="cmbType_'+i.windowNo+'" ><\/select><\/div><div class="VA005-product-data"><div class="VA005-product-dataIcon"><label>'+VIS.Msg.getElement(VIS.Env.getCtx(),"C_TaxCategory_ID")+'<\/label><select class="vis-gc-vpanel-table-mandatory" id="cmbTax_'+i.windowNo+'"><\/select><input type="button" id="btnTaxCategory_'+i.windowNo+'"><\/div><\/div><div class="VA005-product-data"><div class="VA005-product-dataIcon"><label>'+VIS.Msg.getElement(VIS.Env.getCtx(),"M_AttributeSet_ID")+'<\/label><select id="cmbAttribute_'+i.windowNo+'"><\/select><input type="button" id="btnAttributeSet_'+i.windowNo+'"><\/div><\/div><div class="VA005-product-data"><div class="VA005-product-dataIcon"><label>'+VIS.Msg.getElement(VIS.Env.getCtx(),"C_UOM_ID")+'<\/label><select class="vis-gc-vpanel-table-mandatory" id="cmbUom_'+i.windowNo+'" ><\/select><input type="button" id="btnUom_'+i.windowNo+'"><\/div><\/div><div class="VA005-product-data"><label>'+VIS.Msg.getElement(VIS.Env.getCtx(),"UPC")+'<\/label><input id="txtUpc_'+i.windowNo+'" type="text"><\/div>');iu=g.find("#VA005_cmbOrg_"+i.windowNo);ef=g.find("#txtValue_"+i.windowNo);ff=g.find("#txtName_"+i.windowNo);dt=g.find("#cmbCat_"+i.windowNo);ui=g.find("#cmbTax_"+i.windowNo);pr=g.find("#cmbType_"+i.windowNo);ur=g.find("#cmbUom_"+i.windowNo);wi=g.find("#cmbAttribute_"+i.windowNo);fe=g.find("#txtUpc_"+i.windowNo);so=g.find("#btnAttributeSet_"+i.windowNo);ho=g.find("#btnProdCat_"+i.windowNo);co=g.find("#btnTaxCategory_"+i.windowNo);lo=g.find("#btnUom_"+i.windowNo);dh();gh();go();ns();ts();is(ur);dt.on("change",function(){rl(dt.val())})}function sa(){ws.append(ou);ou.append('<div class="VA005-form-data VA005-popup-head"><label id="lblPriceList_"'+i.windowNo+'">'+VIS.Msg.getMsg("PriceListVersion")+'<\/label><select id="cmbPricelist_'+i.windowNo+'"><\/select><\/div><div style = "float:right;margin-right:15px;margin-top:30px"><label id="CurrInfo_'+i.windowNo+'" style="float:right;"><\/label><\/div><div id="VA005_priceGrid_'+i.windowNo+'" class="VA005-popup-data">');fi=ou.find("#cmbPricelist_"+i.windowNo);ds=ou.find("#VA005_priceGrid_"+i.windowNo);vc=ou.find("#CurrInfo_"+i.windowNo);h=null;h=ds.w2grid({name:"gridprice_"+i.windowNo,recordHeight:25,columns:[{field:"product_ID",caption:"",sortable:!1,size:"80px",display:!1},{field:"ImageUrl",caption:'<div class="imgPrice" style="text-align: center;" ><span>'+VIS.Msg.translate(VIS.Env.getCtx(),"AD_Image_ID")+"<\/span><\/div>",sortable:!1,size:"80px",hidden:!1,render:function(){return'<div style="text-align: center;"><\/div>'}},{field:"Product",caption:'<div style="text-align: center;" ><span>'+VIS.Msg.translate(VIS.Env.getCtx(),"Product")+"<\/span><\/div>",sortable:!1,size:"200px",hidden:!1},{field:"PriceList",caption:'<div style="text-align: center;" ><span>'+VIS.Msg.getElement(VIS.Env.getCtx(),"PriceList")+"<\/span><\/div>",sortable:!1,size:"100px",min:80,hidden:!1,editable:{type:"float"},render:"number:2"},{field:"PriceStd",caption:'<div style="text-align: center;" ><span>'+VIS.Msg.getElement(VIS.Env.getCtx(),"PriceStd")+"<\/span><\/div>",sortable:!1,size:"100px",min:80,hidden:!1,editable:{type:"float"},render:"number:2"},{field:"PriceLimit",caption:'<div style="text-align: center;" ><span>'+VIS.Msg.getElement(VIS.Env.getCtx(),"PriceLimit")+"<\/span><\/div>",sortable:!1,size:"100px",min:80,hidden:!1,editable:{type:"float"},render:"number:2"},{field:"UOM",caption:"",sortable:!1,size:"80px",display:!1},{field:"C_Uom_ID",caption:'<div style="text-align: center;" ><span>'+VIS.Msg.getElement(VIS.Env.getCtx(),"C_UOM_ID")+"<\/span><\/div>",sortable:!1,size:"80px",min:80,hidden:!1,editable:{type:"select",items:vt,showAll:!0},render:function(n,t,i){var u="",r;for(r in vt)vt[r].id==this.getCellValue(t,i)&&(u=vt[r].text);return u}},{field:"Lot",caption:'<div style="text-align: center;" ><span>'+VIS.Msg.getElement(VIS.Env.getCtx(),"Lot")+"<\/span><\/div>",sortable:!1,size:"80px",min:80,hidden:!1,editable:{type:"text"}},{field:"attribute_ID",caption:"",sortable:!1,size:"80px",display:!1},{field:"Attribute",caption:'<div style="text-align: center;" ><span>'+VIS.Msg.translate(VIS.Env.getCtx(),"Attribute")+"<\/span><\/div>",sortable:!1,size:"150px",hidden:!1,render:function(){return'<div><input type=text readonly="readonly" style= "width:85%; border:none" ><\/input><img src="'+VIS.Application.contextUrl+'Areas/VIS/Images/base/MultiX16.png" alt="Attribute Set Instance" title="Attribute Set Instance" style="opacity:1;float:right;"><\/div>'}},{field:"updated",caption:"",sortable:!1,size:"80px",display:!1}],onChange:function(n){h.records[n.index].updated=!0;n.column==3?h.records[n.index].PriceList=n.value_new:n.column==4?h.records[n.index].PriceStd=n.value_new:n.column==5?h.records[n.index].PriceLimit=n.value_new:n.column==7?h.records[n.index].C_Uom_ID=n.value_new:n.column==8&&(h.records[n.index].Lot=n.value_new)},onClick:function(n){var r,u,e,o;if(n.column==1&&h.records.length>0)r=VIS.dataContext.getJSONRecord("VA005/ProductManagement/GetImageUrl",h.records[n.recid-1].product_ID.toString()),u="",r!=null?r!=""?(r=r.substring(r.lastIndexOf("/")+1,r.length),e=new Date,u='<img style="max-height: 100%; max-width: 100%;" src="'+VIS.Application.contextUrl+"Images/Thumb140x120/"+r+"?"+e.getTime()+'">'):u='<i class= "fa fa-picture-o" ><\/i>':u='<i class= "fa fa-picture-o" ><\/i>',$ImageZoom.empty(),$ImageZoom.append(u),$ImageZoom.fadeIn("slow"),$ImageZoom.popup({tooltipanchor:ws,autoopen:!0,type:"tooltip",background:!0,backgroundactive:!1,horizontal:"center"});else if(n.column==10&&h.records.length>0)if(o=VIS.dataContext.getJSONRecord("VA005/ProductManagement/GetAttributeSet",VIS.Utility.Util.getValueOfInt(h.records[n.recid-1].product_ID)),o!=0){var s=of==8418,c=VIS.context.getContextAsInt(i.windowNo,"M_Locator_ID"),l=VIS.context.getContextAsInt(i.windowNo,"C_BPartner_ID"),f=new VIS.PAttributesForm(VIS.Utility.Util.getValueOfInt(h.records[n.recid-1].attribute_ID),VIS.Utility.Util.getValueOfInt(h.records[n.recid-1].product_ID),c,l,s,of,i.windowNo);f.hasAttribute&&f.showDialog();f.onClose=function(r,u){h.records[n.recid-1].attribute_ID!=r&&(h.records[n.recid-1].attribute_ID=r,h.records[n.recid-1].Attribute=u,t("#grid_gridprice_"+i.windowNo+"_rec_"+n.recid).find("input[type=text]").val(u),h.records[n.recid-1].updated=!0)}}else return}});h.hideColumn("UOM");h.hideColumn("attribute_ID");h.hideColumn("product_ID");h.hideColumn("updated")}function ha(){hc.append(ku);ku.append('<div class="VA005-form-data VA005-popup-head"><label id="lblPriceList_"'+i.windowNo+'">'+VIS.Msg.getMsg("VA005_Supplier")+'<\/label><select id="cmbSupplier_'+i.windowNo+'"><\/select><\/div><div id="VA005_supplierGrid_'+i.windowNo+'" class="VA005-popup-data">');ki=ku.find("#cmbSupplier_"+i.windowNo);gs=ku.find("#VA005_supplierGrid_"+i.windowNo);nt=null;nt=gs.w2grid({name:"gridsupplier_"+i.windowNo,recordHeight:25,show:{},columns:[{field:"product_ID",caption:"",sortable:!1,size:"80px",display:!1},{field:"Product",caption:'<div style="text-align: center;" ><span>'+VIS.Msg.translate(VIS.Env.getCtx(),"Product")+"<\/span><\/div>",sortable:!1,size:"200px",hidden:!1},{field:"OrderMin",caption:'<div style="text-align: center;" ><span>'+VIS.Msg.getElement(VIS.Env.getCtx(),"Order_Min")+"<\/span><\/div>",sortable:!1,size:"120px",min:80,hidden:!1,editable:{type:"float"},render:"number:2"},{field:"OrderPack",caption:'<div style="text-align: center;" ><span>'+VIS.Msg.getElement(VIS.Env.getCtx(),"Order_Pack")+"<\/span><\/div>",sortable:!1,size:"100px",min:80,hidden:!1,editable:{type:"float"},render:"number:2"},{field:"C_Uom_ID",caption:'<div style="text-align: center;" ><span>'+VIS.Msg.getElement(VIS.Env.getCtx(),"C_UOM_ID")+"<\/span><\/div>",sortable:!1,size:"80px",min:80,hidden:!1,editable:{type:"select",items:vt,showAll:!0},render:function(n,t,i){var u="",r;for(r in vt)vt[r].id==this.getCellValue(t,i)&&(u=vt[r].text);return u}},{field:"C_Currency_ID",caption:'<div style="text-align: center;" ><span>'+VIS.Msg.getElement(VIS.Env.getCtx(),"C_Currency_ID")+"<\/span><\/div>",sortable:!1,size:"80px",min:80,hidden:!1,editable:{type:"select",items:ru,showAll:!0},render:function(n,t,i){var u="",r;for(r in ru)ru[r].id==this.getCellValue(t,i)&&(u=ru[r].text);return u}},{field:"PriceList",caption:'<div style="text-align: center;" ><span>'+VIS.Msg.getElement(VIS.Env.getCtx(),"PriceList")+"<\/span><\/div>",sortable:!1,size:"80px",min:80,hidden:!1,editable:{type:"float"},render:"number:2"},{field:"DeliveryTime",caption:'<div style="text-align: center;" ><span>'+VIS.Msg.getElement(VIS.Env.getCtx(),"DeliveryTime_Promised")+"<\/span><\/div>",sortable:!1,size:"100px",min:80,hidden:!1,editable:{type:"int"}},{field:"updated",caption:"",sortable:!1,size:"80px",display:!1}],onChange:function(n){nt.records[n.index].updated=!0;n.column==2?nt.records[n.index].OrderMin=n.value_new:n.column==3?nt.records[n.index].OrderPack=n.value_new:n.column==4?nt.records[n.index].C_Uom_ID=n.value_new:n.column==5?nt.records[n.index].C_Currency_ID=n.value_new:n.column==6?nt.records[n.index].PriceList=n.value_new:n.column==7&&(nt.records[n.index].DeliveryTime=n.value_new)},onClick:function(){}});nt.hideColumn("product_ID");nt.hideColumn("updated");nt.hideColumn("DeliveryTime")}function ca(){ne.append(cc);cc.append('<div class="VA005-form-data"><label>'+VIS.Msg.getMsg("VA005_StickerHeader")+'<\/label><input class="vis-gc-vpanel-table-mandatory" id="txtHeader_'+i.windowNo+'" type="text" maxlength="40"><\/div><div class="VA005-form-data"><label>'+VIS.Msg.getElement(VIS.Env.getCtx(),"M_PriceList_Version_ID")+'<\/label><select class="vis-gc-vpanel-table-mandatory" id="cmbVarsion_'+i.windowNo+'"><\/select><\/div>');fo=ne.find("#txtHeader_"+i.windowNo);cu=ne.find("#cmbVarsion_"+i.windowNo)}function la(){li.append(lc);bt=null;bt=lc.w2grid({name:"VA005_gridRelated_"+i.windowNo,recordHeight:25,show:{toolbar:!0,selectColumn:!0,toolbarReload:!1,toolbarColumns:!0,toolbarSearch:!1,toolbarAdd:!1,toolbarDelete:!0,toolbarSave:!0},columns:[{field:"Product",caption:VIS.Msg.getElement(VIS.Env.getCtx(),"Name"),sortable:!1,size:"36%",editable:{type:"text"}},{field:"RelatedProduct",caption:VIS.Msg.getElement(VIS.Env.getCtx(),"RelatedProduct_ID"),sortable:!1,size:"36%"},{field:"RelatedType",caption:'<div style="text-align: center;" ><span>'+VIS.Msg.getElement(VIS.Env.getCtx(),"RelatedProductType")+"<\/span><\/div>",sortable:!1,size:"32%",hidden:!1,editable:{type:"select",items:au,showAll:!0},render:function(n,t,i){var u="",r;for(r in au)au[r].id==this.getCellValue(t,i)&&(u=au[r].text);return u}},{field:"M_Product_ID",caption:"M_Product_ID",sortable:!1,size:"80px",display:!1},{field:"updated",caption:VIS.Msg.getElement(VIS.Env.getCtx(),"Updated"),sortable:!1,size:"80px",display:!1}],records:[],onChange:function(n){bt.records[n.index].updated=!0;n.column==0?bt.records[n.index].Product=n.value_new:n.column==2&&(bt.records[n.index].RelatedType=n.value_new)},onClick:function(){},onDelete:function(n){n.preventDefault();gv()},onSubmit:function(n){n.preventDefault();dv()}});bt.hideColumn("M_Product_ID");bt.hideColumn("updated")}function aa(){bs.append(ks);s=null;s=ks.w2grid({name:"gridcart_"+i.windowNo,recordHeight:25,show:{toolbar:!0,selectColumn:!0,toolbarReload:!1,toolbarColumns:!0,toolbarSearch:!1,toolbarAdd:!1,toolbarDelete:!0,toolbarSave:!0},records:[],columns:[{field:"product_ID",caption:"product_ID",sortable:!1,size:"80px",display:!1},{field:"Product",caption:'<div style="text-align: center;" ><span>'+VIS.Msg.translate(VIS.Env.getCtx(),"Product")+"<\/span><\/div>",sortable:!1,size:"35%",hidden:!1},{field:"Qty",caption:'<div style="text-align: center;" ><span>'+VIS.Msg.getElement(VIS.Env.getCtx(),"Quantity")+"<\/span><\/div>",sortable:!1,size:"15%",hidden:!1,editable:{type:"float"},render:"number:2"},{field:"C_Uom_ID",caption:'<div style="text-align: center;" ><span>'+VIS.Msg.getElement(VIS.Env.getCtx(),"C_UOM_ID")+"<\/span><\/div>",sortable:!1,size:"15%",hidden:!1,editable:{type:"select",items:vt,showAll:!0},render:function(n,t,i){var u="",r;for(r in vt)vt[r].id==this.getCellValue(t,i)&&(u=vt[r].text);return u}},{field:"attribute_ID",caption:VIS.Msg.getElement(VIS.Env.getCtx(),"M_AttributeSetInstance_ID"),sortable:!1,size:"80px",display:!1},{field:"Attribute",caption:'<div style="text-align: center;" ><span>'+VIS.Msg.translate(VIS.Env.getCtx(),"Attribute")+"<\/span><\/div>",sortable:!1,size:"35%",hidden:!1,render:function(){return'<div><input type=text readonly="readonly" style= "width:85%; border:none" ><\/input><img src="'+VIS.Application.contextUrl+'Areas/VIS/Images/base/MultiX16.png" alt="Attribute Set Instance" title="Attribute Set Instance" style="opacity:1;float:right;"><\/div>'}},{field:"UPC",caption:VIS.Msg.getElement(VIS.Env.getCtx(),"UPC"),sortable:!1,size:"80px",editable:{type:"text"}},{field:"LineID",caption:VIS.Msg.getElement(VIS.Env.getCtx(),"VAICNT_InventoryCountLine_ID"),sortable:!1,size:"80px",display:!1},{field:"updated",caption:VIS.Msg.getElement(VIS.Env.getCtx(),"Updated"),sortable:!1,size:"80px",display:!1}],onChange:function(n){s.records[n.index].updated=!0;n.column==2?s.records[n.index].Qty=n.value_new:n.column==3&&(s.records[n.index].C_Uom_ID=n.value_new)},onClick:function(n){var u;if(n.column==5&&s.records.length>0)if(u=VIS.dataContext.getJSONRecord("VA005/ProductManagement/GetAttributeSet",VIS.Utility.Util.getValueOfInt(s.records[n.recid-1].product_ID)),u!=0){var f=of==8418,e=VIS.context.getContextAsInt(i.windowNo,"M_Locator_ID"),o=VIS.context.getContextAsInt(i.windowNo,"C_BPartner_ID"),r=new VIS.PAttributesForm(VIS.Utility.Util.getValueOfInt(s.records[n.recid-1].attribute_ID),VIS.Utility.Util.getValueOfInt(s.records[n.recid-1].product_ID),e,o,f,of,i.windowNo);r.hasAttribute&&r.showDialog();r.onClose=function(r,u){s.records[n.recid-1].attribute_ID!=r&&(s.records[n.recid-1].attribute_ID=r,s.records[n.recid-1].Attribute=u,t("#grid_gridcart_"+i.windowNo+"_rec_"+n.recid).find("input[type=text]").val(u),s.records[n.recid-1].updated=!0)}}else return},onDelete:function(n){n.preventDefault();kv()},onSubmit:function(n){n.preventDefault();bv()},onColumnOnOff:function(n){n.onComplete=function(){wu()}},onSelect:function(n){n.all&&(n.onComplete=function(){for(var r,n=0;n<s.records.length;n++)t("#grid_gridcart_"+i.windowNo+"_rec_"+s.records[n].recid).find("input[type=text]").val(s.records[n].Attribute),r=VIS.dataContext.getJSONRecord("VA005/ProductManagement/GetAttributeSet",s.records[n].product_ID),r<=0&&(t("#grid_gridcart_"+i.windowNo+"_rec_"+s.records[n].recid).find("input:not([type='checkbox'])").hide(),t("#grid_gridcart_"+i.windowNo+"_rec_"+s.records[n].recid).find("img").hide())})}});s.hideColumn("product_ID");s.hideColumn("attribute_ID");s.hideColumn("UPC");s.hideColumn("LineID");s.hideColumn("updated");rs()}function va(n){var i,r,t;if(n.length>0)for(t in n)i=VIS.Utility.Util.getValueOfInt(n[t].AD_Org_ID),r=VIS.Utility.Util.getValueOfString(n[t].Name),iu.append(" <option value="+i+">"+VIS.Utility.encodeText(r)+"<\/option>");iu.val(eo)}function ya(n){var i,r,t;if(n.length>0)for(t in n)i=VIS.Utility.Util.getValueOfString(n[t].Value),r=VIS.Utility.Util.getValueOfString(n[t].Name),pr.append(" <option value="+i+">"+VIS.Utility.encodeText(r)+"<\/option>")}function pa(n){var i,r,t;if(wi.append(" <option value = 0><\/option>"),n.length>0)for(t in n)i=VIS.Utility.Util.getValueOfInt(n[t].M_AttributeSet_ID),r=VIS.Utility.Util.getValueOfString(n[t].Name),wi.append(" <option value="+i+">"+VIS.Utility.encodeText(r)+"<\/option>")}function wa(n){var i,r,t;if(ui.append(" <option value = 0><\/option>"),n.length>0)for(t in n)i=VIS.Utility.Util.getValueOfInt(n[t].C_TaxCategory_ID),r=VIS.Utility.Util.getValueOfString(n[t].Name),ui.append(" <option value="+i+">"+VIS.Utility.encodeText(r)+"<\/option>")}function ba(n){var i,r,t;if(dt.append(" <option value = 0><\/option>"),n.length>0)for(t in n)i=VIS.Utility.Util.getValueOfInt(n[t].M_Product_Category_ID),r=VIS.Utility.Util.getValueOfString(n[t].Name),dt.append(" <option value="+i+">"+VIS.Utility.encodeText(r)+"<\/option>")}function ka(n){var i,r,t;if(ao.append(" <option value = 0><\/option>"),n.length>0)for(t in n)i=VIS.Utility.Util.getValueOfInt(n[t].C_UOM_ID),r=VIS.Utility.Util.getValueOfString(n[t].Name),ao.append(" <option value="+i+">"+VIS.Utility.encodeText(r)+"<\/option>")}function da(n){var i,r,t;if(n.length>0)for(t in n)i=VIS.Utility.Util.getValueOfInt(n[t].C_UOM_ID),r=VIS.Utility.Util.getValueOfString(n[t].Name),vt.push({id:i,text:r});aa();sa();ha();ca();ov()}function ga(n){var i,r,t;if(n.length>0)for(t in n)i=VIS.Utility.Util.getValueOfInt(n[t].C_Currency_ID),r=VIS.Utility.Util.getValueOfString(n[t].ISO_Code),ru.push({id:i,text:r});gc()}function nv(n){var i,r,t;if(bi.append(" <option value = -1>"+VIS.Msg.getMsg("VA005_UomTo")+"<\/option>"),n.length>0)for(t in n)i=VIS.Utility.Util.getValueOfInt(n[t].C_UOM_ID),r=VIS.Utility.Util.getValueOfString(n[t].Name),bi.append(" <option value="+i+">"+VIS.Utility.encodeText(r)+"<\/option>")}function tv(n){var i,r,t;if(fi.append(" <option value = 0><\/option>"),n.length>0)for(t in n)i=VIS.Utility.Util.getValueOfInt(n[t].M_PriceList_Version_ID),r=VIS.Utility.Util.getValueOfString(n[t].Name),fi.append(" <option value="+i+">"+VIS.Utility.encodeText(r)+"<\/option>");fi.prop("selectedIndex",1);cl()}function iv(n){var i,r,t;if(ki.append(" <option value = 0>"+VIS.Msg.getMsg("VA005_SelSupplier")+"<\/option>"),n.length>0)for(t in n)i=VIS.Utility.Util.getValueOfInt(n[t].C_BPartner_ID),r=VIS.Utility.Util.getValueOfString(n[t].Name),ki.append(" <option value="+i+">"+VIS.Utility.encodeText(r)+"<\/option>");ki.prop("selectedIndex",0);ll()}function rv(n){var r,u,t;if(it.append(" <option value = 0><\/option>"),n.length>0)for(t in n)r=n[t].VAICNT_InventoryCount_ID,u=n[t].Name,it.append(" <option value="+r+">"+VIS.Utility.encodeText(u)+"<\/option>");it.val(oo);oo>0?ir.find("#VA005_cartInfo_"+i.windowNo).text(it.find("option:selected").text()):ir.find("#VA005_cartInfo_"+i.windowNo).text(VIS.Msg.getMsg("None"))}function uv(n){var i,r,t;if(ft.append(" <option value = 0><\/option>"),n!=null)for(t in n)i=n[t].AD_UserQuery_ID,r=n[t].Name,ft.append(" <option value="+i+">"+VIS.Utility.encodeText(r)+"<\/option>")}function ev(n){n!=null&&(kh=n._countDTD001,kh&&pr.val(n.ProductType),n.C_TaxCategory_ID>0?ui.val(n.C_TaxCategory_ID).prop("selected",!0):ui.val(-1),n.M_AttributeSet_ID>0?wi.val(n.M_AttributeSet_ID).prop("selected",!0):wi.val(-1))}function ov(){au=[];VIS.dataContext.getJSONData(VIS.Application.contextUrl+"VA005/ProductManagement/LoadRelatedType","",sv)}function sv(n){var i,r,t;if(au.push({id:"-1",text:""}),n!=null)for(t in n)i=n[t].Value,r=n[t].Name,au.push({id:i,text:VIS.Utility.encodeText(r)});la()}function hv(){cu.empty();VIS.dataContext.getJSONData(VIS.Application.contextUrl+"VA005/ProductManagement/LoadPriceList","",cv)}function cv(n){var i,r,t;if(cu.append(" <option value = 0><\/option>"),n.length>0)for(t in n)i=VIS.Utility.Util.getValueOfInt(n[t].M_PriceList_Version_ID),r=VIS.Utility.Util.getValueOfString(n[t].Name),cu.append(" <option value="+i+">"+VIS.Utility.encodeText(r)+"<\/option>")}function lv(){r=t("<div class='vis-apanel-busy'>");r.css({position:"absolute",width:"98%",height:"97%","text-align":"center","z-index":"999"});r[0].style.visibility="visible";f.append(r)}function av(){e.find(".vis-group-user-wrap").remove();hi("",0,0,k,tt,0);e.on("click",oy)}function hi(n,i,f,o,s,h){ai();var c=(o-1)*s;f==null&&(f=0);t.ajax({url:VIS.Application.contextUrl+"VA005/ProductManagement/GetProdInfo",type:"GET",datatype:"json",contentType:"application/json; charset=utf-8",data:{searchText:n,proCategory:i,SearchQuery:f,pageNo:o,pageSize:s,Parent_ID:h},success:function(n){var i,f,h;if(e.css("width","100%"),i=JSON.parse(n),i.length>0)if(o==1&&(ph=i[0].productCount,wh=Math.ceil(ph/tt)),ct.prop("checked"))for(f in i){c=c+1;var v=VIS.Utility.encodeText(i[f].Prodname),y=VIS.Utility.encodeText(i[f].ProCatName),s=i[f].M_ProductID,p=VIS.Utility.encodeText(i[f].SearchKey),w=i[f].C_UomID,b=VIS.Utility.encodeText(i[f].UOM),k=VIS.Utility.encodeText(i[f].UPC),d=new Date,l=i[f].ProdImage,a="";l==""?a='<i class="fa fa-user" alt="prod-img"><\/i>':(l=VIS.Application.contextUrl+l,a='<img src="'+l+"?"+d.getTime()+'" alt="prod-img">');u.push(s);h=t('<div class="vis-group-user-wrap vis-group-selected-op vis-group-selected-opbackground" style="width:98%;" data-UID="'+s+'"><input type="checkbox" data-UID="'+s+'"style="margin-left:0px;" class="vis-group-addLeft VA005-checkbox" checked="true"><div draggable="true" class="vis-group-user-profile" data-UID="'+s+'"><div style="height:46px;width:46px" class="vis-group-user-img vis-chatimgwrap">'+a+'<\/div><div class="vis-group-user-text" style="width:calc(100% - 70px);"><p class="VA005-NameOfSelectedNode" style="font-weight: bold">'+v+"<\/p><span>"+y+'<\/span><span style="display:list-item;">'+p+'<\/span><\/div><\/div><div class="vis-group-user-right"><div class="vis-group-user-right"><span id="VA005_Barcode_'+c+'" style="float:left;"><\/span><span class="VA005-uom-icons glyphicon glyphicon-picture VA005-icons-color" data-UID="'+s+'" title="'+VIS.Msg.getMsg("VA005_ShowAllImages")+'"><\/span><span class="VA005-uom-icons glyphicon glyphicon-edit VA005-icons-color" data-UID="'+s+'" title="'+VIS.Msg.getMsg("Edit")+'"><\/span><span class="VA005-uom-icons glyphicon glyphicon-shopping-cart VA005-icons-color" data-UID="'+s+'" title="'+VIS.Msg.getMsg("VA005_AddCart")+'"><\/span><\/div><div><span class="VA005-Uom-span" data-UID="'+w+'">'+b+"<\/span><\/div><\/div><\/div>");e.append(h);es(k,e.find("#VA005_Barcode_"+c));h.find(".vis-group-user-profile").width(h.width()-h.find(".vis-group-user-right:eq(0)").width()-20)}else for(f in i){c=c+1;var v=VIS.Utility.encodeText(i[f].Prodname),y=VIS.Utility.encodeText(i[f].ProCatName),s=i[f].M_ProductID,p=VIS.Utility.encodeText(i[f].SearchKey),w=i[f].C_UomID,b=VIS.Utility.encodeText(i[f].UOM),k=VIS.Utility.encodeText(i[f].UPC),d=new Date,l=i[f].ProdImage,a="";l==""?a='<i class="fa fa-user" alt="prod-img"><\/i>':(l=VIS.Application.contextUrl+l,a='<img src="'+l+"?"+d.getTime()+'" alt="prod-img">');h=t('<div class="vis-group-user-wrap" style="width:98%;" data-UID="'+s+'"><input type="checkbox" data-UID="'+s+'" style="margin-left:0px;" class="vis-group-addLeft VA005-checkbox"><div draggable="true" class="vis-group-user-profile" data-UID="'+s+'"><div style="height:46px;width:46px" class="vis-group-user-img vis-chatimgwrap">'+a+'<\/div><div class="vis-group-user-text" style="width:calc(100% - 70px);"><p class="VA005-NameOfSelectedNode" style="font-weight: bold">'+v+"<\/p><span>"+y+'<\/span><span style="display:list-item;">'+p+'<\/span><\/div><\/div><div class="vis-group-user-right"><div class="vis-group-user-right"><span id="VA005_Barcode_'+c+'" style="float:left;"><\/span><span class="VA005-uom-icons glyphicon glyphicon-picture VA005-icons-color" data-UID="'+s+'" title="'+VIS.Msg.getMsg("VA005_ShowAllImages")+'"><\/span><span class="VA005-uom-icons glyphicon glyphicon-edit VA005-icons-color" data-UID="'+s+'" title="'+VIS.Msg.getMsg("Edit")+'"><\/span><span class="VA005-uom-icons glyphicon glyphicon-shopping-cart VA005-icons-color" data-UID="'+s+'" title="'+VIS.Msg.getMsg("VA005_AddCart")+'"><\/span><\/div><div><span class="VA005-Uom-span" data-UID="'+w+'">'+b+"<\/span><\/div><\/div><\/div>");e.append(h);es(k,e.find("#VA005_Barcode_"+c));h.find(".vis-group-user-profile").width(h.width()-h.find(".vis-group-user-right:eq(0)").width()-20)}else VIS.ADialog.info("TMRecordNotFound");bc=t(t(".vis-group-user-wrap")[0]).width();os();window.setTimeout(function(){ht.css("float","left");r[0].style.visibility="hidden"},500)},error:function(){VIS.ADialog.error("VA005_ErrorLoadingProducts");r[0].style.visibility="hidden"}});ye()}function vv(){r[0].style.visibility="visible";t.ajax({type:"POST",url:VIS.Application.contextUrl+"VA005/ProductManagement/Save",dataType:"json",data:{id:lu,Org:iu.val(),Name:VIS.Utility.Util.getValueOfString(ff.val()),Value:VIS.Utility.Util.getValueOfString(ef.val()),ProductType:pr.val(),attrSet:VIS.Utility.Util.getValueOfInt(wi.val()),taxcat:VIS.Utility.Util.getValueOfInt(ui.val()),prodCat:VIS.Utility.Util.getValueOfInt(dt.val()),UOM:VIS.Utility.Util.getValueOfInt(ur.val()),UPC:VIS.Utility.Util.getValueOfString(fe.val()),Parent_ID:wr},success:function(n){var t=JSON.parse(n);t.error==""?(lu==0&&(lu=t.M_Product_ID),hf(),u=[],b=[],k=1,vi.find("li").remove(),yu(di.val(),1,tt),e.find(".vis-group-user-wrap").remove(),hi(yt.val(),at,ft.val(),k,tt,wr),a.close(),r[0].style.visibility="hidden",VIS.ADialog.info("RecSaved")):(r[0].style.visibility="hidden",VIS.ADialog.error(t.error))},error:function(n,t,i){console.log(t);r[0].style.visibility="hidden";alert(i)}})}function yv(){r[0].style.visibility="visible";var n=[];for(item in h.records)h.records[item].updated==!0&&n.push(h.records[item]);t.ajax({type:"POST",url:VIS.Application.contextUrl+"VA005/ProductManagement/UpdatePrice",dataType:"json",contentType:"application/json; charset=utf-8",data:JSON.stringify({id:fi.val(),priceData:n}),success:function(n){var t=n.result;r[0].style.visibility="hidden";t==""?(ii.close(),VIS.ADialog.info("Updated")):VIS.ADialog.error("","",t,"")},error:function(n,t,i){console.log(t);r[0].style.visibility="hidden";alert(i);return}})}function pv(){r[0].style.visibility="visible";t.ajax({type:"POST",url:VIS.Application.contextUrl+"VA005/ProductManagement/UpdateSupplier",dataType:"json",contentType:"application/json; charset=utf-8",data:JSON.stringify({Supplier:ki.val(),ColumnName:nt.records}),success:function(n){var t=n.result;r[0].style.visibility="hidden";t==""?(ri.close(),VIS.ADialog.info("Updated")):VIS.ADialog.error("","",t,"")},error:function(n,t,i){console.log(t);r[0].style.visibility="hidden";alert(i);return}})}function ul(){r[0].style.visibility="visible";t.ajax({type:"POST",url:VIS.Application.contextUrl+"VA005/ProductManagement/saveInventoryCount",dataType:"json",contentType:"application/json; charset=utf-8",data:JSON.stringify({ColumnName:tu.val()}),success:function(n){n.result!=""?(nr.hide(),hr.show(),tu.val(""),oo=n.result,rs(),wu()):(r[0].style.visibility="hidden",VIS.ADialog.error(RecordNotSaved))},error:function(n,t,i){console.log(t);r[0].style.visibility="hidden";alert(i);return}})}function wv(){l.length>0?t.ajax({type:"POST",url:VIS.Application.contextUrl+"VA005/ProductManagement/saveInventory",dataType:"json",contentType:"application/json; charset=utf-8",data:JSON.stringify({prodIDs:u,count_id:it.val(),ColumnName:l}),success:function(n){n.result==""?wu():(ei=!1,VIS.ADialog.error(n.result),r[0].style.visibility="hidden")},error:function(n,t){ei=!1;console.log(t);r[0].style.visibility="hidden";alert("RecordNotSaved");return}}):(ei=!1,r[0].style.visibility="hidden")}function bv(){var n=[];for(item in s.records)s.records[item].updated==!0&&n.push(s.records[item]);n.length>0&&(r[0].style.visibility="visible",t.ajax({type:"POST",url:VIS.Application.contextUrl+"VA005/ProductManagement/updateInventory",dataType:"json",async:!1,contentType:"application/json; charset=utf-8",data:JSON.stringify({count_id:it.val(),ColumnName:n}),success:function(n){r[0].style.visibility="hidden";n.result==""?(wu(),t(".VA005-cart-update").fadeIn(),t(".VA005-cart-update").fadeOut(2e3)):VIS.ADialog.error(n.result)},error:function(n,t){console.log(t);r[0].style.visibility="hidden";alert("RecordNotSaved");return}}))}function kv(){r[0].style.visibility="visible";var n=[],i=s.getSelection();for(item in i)n.push(s.get(i[item]));t.ajax({type:"POST",url:VIS.Application.contextUrl+"VA005/ProductManagement/deleteInventory",dataType:"json",async:!1,contentType:"application/json; charset=utf-8",data:JSON.stringify({ColumnName:n}),success:function(n){r[0].style.visibility="hidden";n.result==""?(wu(),s.selectNone()):(VIS.ADialog.error(n.result),wu())},error:function(n,t){console.log(t);r[0].style.visibility="hidden";alert("DeleteError");return}})}function dv(){var n=[];for(item in bt.records)bt.records[item].updated==!0&&n.push(bt.records[item]);n.length>0&&(r[0].style.visibility="visible",t.ajax({type:"POST",url:VIS.Application.contextUrl+"VA005/ProductManagement/UpdateRelatedProduct",dataType:"json",contentType:"application/json; charset=utf-8",data:JSON.stringify({id:u[0],relatedData:n}),success:function(n){r[0].style.visibility="hidden";n.result==""?cf():VIS.ADialog.error(n.result)},error:function(n,t){console.log(t);r[0].style.visibility="hidden";alert("RecordNotSaved");return}}))}function gv(){r[0].style.visibility="visible";var n=[],i=bt.getSelection();for(item in i)n.push(bt.get(i[item]));t.ajax({type:"POST",url:VIS.Application.contextUrl+"VA005/ProductManagement/deleteRelatedProduct",dataType:"json",async:!1,contentType:"application/json; charset=utf-8",data:JSON.stringify({id:u[0],relatedData:n}),success:function(n){r[0].style.visibility="hidden";n.result==""?(cf(),bt.selectNone()):(VIS.ADialog.error(n.result),cf())},error:function(n,t){console.log(t);r[0].style.visibility="hidden";alert("DeleteError");return}})}function ny(n){n!=null&&(iu.val(n.AD_Org_ID),ff.val(n.Name),lu==0?ef.val(""):ef.val(n.Value),ur.val(n.C_UOM_ID),wi.val(n.M_AttributeSet_ID),dt.val(n.M_Product_Category_ID),pr.val(n.ProductType),ui.val(n.C_TaxCategory_ID),fe.val(n.UPC))}function fl(){fo.val("");cu.val(0)}function ty(){y.on("click",function(n){var i=t(n.target),r;i.hasClass("VA005-AttValofbindingImg")?y.find(".VA005-AttValueImgaeBorderSelect").removeClass("VA005-AttValueImgaeBorderSelect"):i.hasClass("VA005-Image-AttValImg")?(r=i.parent(),r.hasClass("VA005-AttValueImgaeBorderSelect")?r.removeClass("VA005-AttValueImgaeBorderSelect"):r.addClass("VA005-AttValueImgaeBorderSelect")):i.hasClass("VA005-Image-AttValPar")?(r=i.parent(),r.hasClass("VA005-AttValueImgaeBorderSelect")?r.removeClass("VA005-AttValueImgaeBorderSelect"):r.addClass("VA005-AttValueImgaeBorderSelect")):i.hasClass("VA005-AttributesValuesImgTop")&&(i.hasClass("VA005-AttValueImgaeBorderSelect")?i.removeClass("VA005-AttValueImgaeBorderSelect"):i.addClass("VA005-AttValueImgaeBorderSelect"));y.find(".VA005-AttValueImgaeBorderSelect").length>0?le.removeClass("VA005-AttValOpacity"):le.addClass("VA005-AttValOpacity")});ht.on("resize",function(n,t){kc=t.size.height;f.find(".vis-group-users-container").height(kc);y.parent().height(ci.height()-(f.find(".vis-group-users-container").height()+108));y.height(ci.height()-(f.find(".vis-group-users-container").height()+128));var i=ci.height()-90;ht.css("max-height",i);f.find(".vis-group-users-container").css("max-height",i);ht.css("width","100%");f.find(".vis-group-users-container").css("width","100%");e.height(e.height()-20);window.setTimeout(function(){y.height(y.parent().height()-15)},200)});if(y.mouseover(function(){f.find(".vis-group-users-container .vis-group-user-wrap").hasClass("ui-droppable")&&f.find(".vis-group-users-container .vis-group-user-wrap").droppable("destroy")}),f.find(".vis-group-users-container").mouseover(function(){f.find(".vis-group-users-container .vis-group-user-wrap").droppable({drop:function(n,i){al(t(i.draggable).attr("path"),t(i.draggable).attr("filename"),parseInt(t(this).attr("data-uid")),t(this))}})}),$ImageZoom.click(function(){$ImageZoom.fadeOut("slow")}),vi)vi.on("click","LI",function(n){at=VIS.Utility.Util.getValueOfInt(t(n.target).attr("procatid"));var i=t(n.target).text();i=" -> "+i.substr(0,i.indexOf("("));at>0&&(k=1,u=[],b=[],ft.val(0),yt.val(""),ct.prop("checked",!1),ai(),du.text(i).show(),ni==!0&&si.trigger("click"),e.find(".vis-group-user-wrap").remove(),hi("",at,0,k,tt,0))});if(br!=null)br.on("click","LI",function(n){var i=t(n.target).data("action");i==VIS.Actions.refresh?w.Attribute=="Y"?go():w.Category=="Y"?ts(dt):w.Tax=="Y"?ns():w.UOM=="Y"&&is(ur):i==VIS.Actions.zoom&&(w.Attribute=="Y"&&pu(VIS.Utility.Util.getValueOfInt(wi.val()),"Attribute Set"),w.Category=="Y"?pu(VIS.Utility.Util.getValueOfInt(dt.val()),"Product Category"):w.Tax=="Y"?pu(VIS.Utility.Util.getValueOfInt(ui.val()),"Tax Category"):w.UOM=="Y"&&pu(VIS.Utility.Util.getValueOfInt(ur.val()),"Unit of Measure"))});yf.on("change",function(){yf.val()!=""&&(yf.val()=="C"?(f.find(".VA005-middle-cat-bar").show(),ls.css({display:"block"}),af.show(),di.val(""),vi.find("li").remove(),yu(di.val(),1,tt),cs.css({display:"block"}),oi.css({display:"none"}),at=0,k=1,u=[],b=[],wr=0,parentAttribute=0,oe=0,parentQuality=0,se=0,ft.val(0),yt.val(""),ct.prop("checked",!1),ai(),ni==!0&&si.trigger("click"),e.find(".vis-group-user-wrap").remove(),hi("",at,0,k,tt,0)):yf.val()=="T"&&(du.text(""),f.find(".VA005-middle-cat-bar").hide(),ls.css({display:"none"}),af.hide(),cs.css({display:"none"}),r[0].style.visibility="visible",op(),at=0,k=1,u=[],b=[],parentAttribute=0,oe=0,parentQuality=0,se=0,ft.val(0),yt.val(""),ct.prop("checked",!1),ai(),ni==!0&&si.trigger("click"),e.find(".vis-group-user-wrap").remove(),hi("",at,0,k,tt,wr)))});yc.on("click",function(){r[0].style.visibility="visible";window.setTimeout(function(){ni==!0&&si.trigger("click");tc();nc();dh();gh();go();ns();ts();is(ur);ye();os();ai();o.show();or.hide();k=1;u=[];vi.find("li").remove();yu(di.val(),1,tt);e.find(".vis-group-user-wrap").remove();hi(yt.val(),at,0,k,tt,wr)},1e3)});no.on("click",function(){no!=null&&n.uploadImage(0,0,0,0,vu,i)});to.on("click",function(){to!=null&&rp()});uo.on("click",function(){uo!=null&&(fu=[],vu.find("li").removeClass("VA005-highlighted"))});oc.on("click",function(){r[0].style.visibility="visible";vi.find("li").remove();yu(di.val(),1,tt);window.setTimeout(function(){r[0].style.visibility="hidden"},1e3)});di.on("keydown",function(n){(n.keyCode==9||n.keyCode==13)&&(r[0].style.visibility="visible",vi.find("li").remove(),yu(di.val(),1,tt),window.setTimeout(function(){r[0].style.visibility="hidden"},1e3))});as.on("click",function(){r[0].style.visibility="visible";k=1;u=[];b=[];ai();ct.prop("checked",!1);ni==!0&&si.trigger("click");e.find(".vis-group-user-wrap").remove();hi(yt.val(),at,ft.val(),k,tt,0)});yt.on("keydown",function(n){(n.keyCode==9||n.keyCode==13)&&(r[0].style.visibility="visible",k=1,u=[],b=[],ai(),ct.prop("checked",!1),ni==!0&&si.trigger("click"),e.find(".vis-group-user-wrap").remove(),hi(yt.val(),at,ft.val(),k,tt,0))});e.on("scroll",py);ft&&ft.change(function(){k=1;u=[];b=[];at=0;ct.prop("checked",!1);yt.val("");du.hide();ai();ni==!0&&si.trigger("click");e.find(".vis-group-user-wrap").remove();hi("",0,ft.val(),k,tt,wr)});ot.on("scroll",wy);pe.on("click",function(n){n.stopPropagation();var t=kr.width(),i=vf.width();t>50&&ot.hide();kr.animate({width:t>50?40:250},300,"swing",function(){t<50&&ot.show();s.resize()})});vs.on("click",function(){r[0].style.visibility="visible";dt.val(oe);ui.val(se);a=new VIS.ChildDialog;a.setContent(g);g.show();a.setHeight(470);a.setWidth(600);a.setTitle(VIS.Msg.getMsg("VA005_AddProduct"));a.setModal(!0);a.onClose=function(){hf()};a.show();uc();r[0].style.visibility="hidden"});th.on("click",function(){if(u.length==0)return VIS.ADialog.error("VA005_SelectProduct"),!1;if(u.length>1)return!1;r[0].style.visibility="visible";lu=0;ic();a=new VIS.ChildDialog;a.setContent(g);g.show();a.setHeight(470);a.setWidth(600);a.setTitle(VIS.Msg.getMsg("VA005_AddProduct"));a.setModal(!0);a.onClose=function(){hf()};a.show();uc();r[0].style.visibility="hidden"});sc.on("click",function(){r[0].style.visibility="visible";lu=u[0];ic();a=new VIS.ChildDialog;a.setContent(g);g.show();a.setHeight(470);a.setWidth(600);a.setTitle(VIS.Msg.getMsg("VA005_AddProduct"));a.setModal(!0);a.onClose=function(){hf()};a.show();uc();r[0].style.visibility="hidden"});ge.on("click",function(){o.hide();or.show();i.GetImages()});ch.on("click",function(){o.show();or.hide()});vu.on("click","li",function(){t(this).hasClass("VA005-highlighted")?(t(this).removeClass("VA005-highlighted"),fu.splice(fu.indexOf(t(this).attr("filename")),1)):(t(this).addClass("VA005-highlighted"),fu.push(t(this).attr("filename")))});ih.on("click",function(){if(u.length==0)return VIS.ADialog.error("VA005_SelectProduct"),!1;r[0].style.visibility="visible";ii=new VIS.ChildDialog;ii.setContent(ws);ou.show();ii.setHeight(500);ii.setWidth(853);ii.setTitle(VIS.Msg.getMsg("VA005_UpdatePrice"));ii.setModal(!0);ii.onClose=function(){fi.val(0);h.clear();$ImageZoom.fadeOut("slow")};ii.show();tl();by()});rh.on("click",function(){if(u.length==0)return VIS.ADialog.error("VA005_SelectProduct"),!1;r[0].style.visibility="visible";ri=new VIS.ChildDialog;ri.setContent(hc);ku.show();ri.setHeight(500);ri.setWidth(703);ri.setTitle(VIS.Msg.getMsg("VA005_UpdateSupplier"));ri.setModal(!0);ri.onClose=function(){ki.val(0);nt.clear()};ri.show();il();tp()});uh.on("click",function(){if(u.length==0)return VIS.ADialog.error("VA005_SelectProduct"),!1;var t=new n.updateProductPanel(i.windowNo,140,208,u);t.onClose=function(){t.okBtnPressed&&(u=[],b=[],e.find(".vis-group-user-wrap").remove(),hi(yt.val(),at,ft.val(),1,tt,0));t.dispose()};t.show()});fh.on("click",function(){ai();k=1;ft.val(0);yt.val("");at=0;ct.prop("checked",!1);du.hide();u=[];ni==!0&&si.trigger("click");e.find(".vis-group-user-wrap").remove();hi("",0,0,k,tt,0)});ct.on("click",function(){window.setTimeout(function(){if(ct.is(":checked")){u=[];for(var n=0;n<e.find(".vis-group-user-wrap").length;n++)u.push(t(e.find(".vis-group-user-wrap")[n]).data("uid"));e.find(".vis-group-user-wrap").addClass("vis-group-selected-op vis-group-selected-opbackground");e.find(".VA005-checkbox").prop("checked",!0);ai()}else u=[],e.find(".vis-group-user-wrap").removeClass("vis-group-selected-op vis-group-selected-opbackground"),e.find(".VA005-checkbox").prop("checked",!1);ni==!0&&si.trigger("click")},200)});te.on("click",function(){if(!ei){if(it.val()==0){VIS.ADialog.error("VA005_selectCart");return}(u.length!=0||et.length!=0||rt.length!=0)&&(r[0].style.visibility="visible",ei=!0,te.find("span").css("color","lime"),window.setTimeout(function(){te.find("span").css("color","#616364")},1e3),us("A"))}});gu.on("click",function(){if(u.length==0)return VIS.ADialog.error("VA005_SelectProduct"),!1;if(u.length>1)return!1;lr.find("li").removeClass("VA005-selectedTab");gu.addClass("VA005-selectedTab");ae();tr.hide();eu();sr.hide();v.hide();rt=[];d=0;et=[];p={};st=0;c.find(".VA005-checkbox").prop("checked",!1);c.find(".VA005-uom-wrap").removeClass("vis-group-selected-op vis-group-selected-opbackground");v.find(".VA005-checkbox").prop("checked",!1);v.find(".VA005-uom-wrap").removeClass("vis-group-selected-op vis-group-selected-opbackground");c.hide();pt.hide();ti.hide();hr.show();nr.hide();yi.hide();li.hide();gi.show();rc()});su.on("click",function(){if(u.length==0)return VIS.ADialog.error("VA005_SelectProduct"),!1;if(u.length>1)return!1;su.hasClass("VA005-selectedTab")||(lr.find("li").removeClass("VA005-selectedTab"),su.addClass("VA005-selectedTab"),eu(),sr.hide(),v.hide(),rt=[],d=0,v.find(".VA005-checkbox").prop("checked",!1),v.find(".VA005-uom-wrap").removeClass("vis-group-selected-op vis-group-selected-opbackground"),ti.hide(),hr.show(),nr.hide(),yi.hide(),gi.hide(),li.hide(),tr.show(),c.show(),ve())});hu.on("click",function(){if(u.length==0)return VIS.ADialog.error("VA005_SelectProduct"),!1;if(u.length>1)return!1;hu.hasClass("VA005-selectedTab")||(lr.find("li").removeClass("VA005-selectedTab"),hu.addClass("VA005-selectedTab"),ae(),tr.hide(),et=[],p={},st=0,c.find(".VA005-checkbox").prop("checked",!1),c.find(".VA005-uom-wrap").removeClass("vis-group-selected-op vis-group-selected-opbackground"),c.hide(),pt.hide(),ti.hide(),hr.show(),nr.hide(),yi.hide(),gi.hide(),li.hide(),sr.show(),v.show(),fs())});nf.on("click",function(){if(u.length==0)return VIS.ADialog.error("VA005_SelectProduct"),!1;if(u.length>1)return!1;nf.hasClass("VA005-selectedTab")||(lr.find("li").removeClass("VA005-selectedTab"),nf.addClass("VA005-selectedTab"),eu(),sr.hide(),v.hide(),ae(),tr.hide(),c.hide(),p={},pt.hide(),gi.hide(),ti.hide(),yi.hide(),li.show(),li.css("height","92%"),cf())});ie.on("click",function(){ie.hasClass("VA005-selectedTab")||(lr.find("li").removeClass("VA005-selectedTab"),ie.addClass("VA005-selectedTab"),eu(),sr.hide(),v.hide(),ae(),tr.hide(),c.hide(),p={},pt.hide(),gi.hide(),li.hide(),ti.show(),yi.show(),yi.css("height","75%"),s.resize())});tf.on("click",function(){bu.show();tf.hide();d=0;v.css("height","55%")});rf.on("click",function(){uu>0&&(cr.show(),rf.hide(),nu.hide(),c.css("height","75%"))});eh.on("click",function(){for(var i,n=0;n<he.length;n++)i=he[n],p[i]&&(p[i]=p[i].join(","));p&&(r[0].style.visibility="visible",t.ajax({type:"POST",url:VIS.Application.contextUrl+"VA005/ProductManagement/SaveAttribute",dataType:"json",contentType:"application/json; charset=utf-8",data:JSON.stringify({id:u[0],AttributeSet:uu,ColumnName:he,ColumnValue:p}),success:function(n){var t=n.result;t==""||t==null?(p={},pt.hide(),ve(),c.show()):(p={},kt.find(".VA005-checkbox").prop("checked",!1),VIS.ADialog.error(t));r[0].style.visibility="hidden"},error:function(n,t){p={};kt.find(".VA005-checkbox").prop("checked",!1);console.log(t);r[0].style.visibility="hidden";alert("RecordNotSaved");return}}))});oh.on("click",function(){p={};tr.show();c.show();pt.hide()});nu.on("click",function(){c.hide();pt.show();hl()});sh.on("click",function(){cr.hide();pt.hide();rf.show();nu.show();c.show();c.css("height","85%")});re.on("click",function(){if(bi.val()==-1){VIS.ADialog.error("VA005_SelectUom");return}iy()});hh.on("click",function(){eu()});lh.on("click",function(){hr.hide();nr.show()});ah.on("click",function(){pu(it.val(),"VAICNT_InventoryCount")});vh.on("click",function(){rs()});io.on("click",function(){if(VIS.Utility.Util.getValueOfString(tu.val())==""){VIS.ADialog.error("VA005_EnterScanName");return}ul()});io.on("keydown",function(n){if(n.keyCode==13){if(VIS.Utility.Util.getValueOfString(tu.val())==""){VIS.ADialog.error("VA005_EnterScanName");return}ul()}});ro.on("click",function(){nr.hide();hr.show();tu.val("")});ro.on("keydown",function(n){n.keyCode==13&&(nr.hide(),hr.show(),tu.val(""))});pc.on("click",function(){var n=s.getSelection();if(n.length>0){r[0].style.visibility="visible";yh=[];for(item in n)yh.push(s.get(n[item]));pi=new VIS.ChildDialog;pi.setContent(ne);ne.show();pi.setHeight(300);pi.setWidth(300);pi.setTitle(VIS.Msg.getMsg("VA005_PrintStickers"));pi.setModal(!0);pi.onClose=function(){fl()};pi.show();hv();dy();r[0].style.visibility="hidden"}else VIS.ADialog.info("NoRecordsSelected")});it.on("change",function(){oo=it.val();it.val()==0?ir.find("#VA005_cartInfo_"+i.windowNo).text(VIS.Msg.getMsg("None")):ir.find("#VA005_cartInfo_"+i.windowNo).text(it.find("option:selected").text());wu()});bi.on("change",function(){bi.val()>0?re.removeClass("VA005-disabled"):re.removeClass("VA005-disabled")});vr.on("keyup",function(){var n=this.value,t=VIS.Env.ZERO;VIS.Utility.Util.getValueOfDouble(n)!=0&&(t=(1/n).toFixed(12));sf=!0;yr.val(t)});vr.on("change",function(){var n=this.value,t=VIS.Env.ZERO;VIS.Utility.Util.getValueOfDouble(n)!=0&&(t=(1/n).toFixed(12));sf=!0;yr.val(t)});yr.on("keyup",function(){if(sf){sf=!1;return}var n=this.value,t=VIS.Env.ZERO;VIS.Utility.Util.getValueOfDouble(n)!=0&&(t=(1/n).toFixed(12));vr.val(t)});yr.on("change",function(){if(sf){sf=!1;return}var n=this.value,t=VIS.Env.ZERO;VIS.Utility.Util.getValueOfDouble(n)!=0&&(t=(1/n).toFixed(12));vr.val(t)})}function us(n){var f=n,r=0,i,t;if(f=="U")t=VIS.dataContext.getJSONData(VIS.Application.contextUrl+"VA005/ProductManagement/LoadUOMConversionData",{C_UOM_Conversion_ID:d}),t!=null&&l.push({recid:r,product_ID:t.M_Product_ID,Product:t.Name,C_Uom_ID:t.C_UOM_To_ID,attribute_ID:0,Attribute:"",UPC:t.UPC,Qty:1});else if(f=="V")lt==""&&(lt=" "),t=VIS.dataContext.getJSONData(VIS.Application.contextUrl+"VA005/ProductManagement/LoadProdAttributeData",{M_Product_ID:u[0],M_AttributeSetInstance_ID:st,UPC:lt}),t!=null&&l.push({recid:r,product_ID:t.M_Product_ID,Product:t.Name,C_Uom_ID:t.C_UOM_ID,attribute_ID:t.M_AttributeSetInstance_ID,Attribute:t.Description,UPC:t.UPC,Qty:1});else if(f=="P")t=VIS.dataContext.getJSONData(VIS.Application.contextUrl+"VA005/ProductManagement/LoadProductCartData",{M_Product_ID:ut}),t!=null&&l.push({recid:r,product_ID:ut,Product:t.Name,C_Uom_ID:t.C_UOM_ID,attribute_ID:t.M_AttributeSetInstance_ID,Attribute:t.Description,UPC:t.UPC,Qty:1});else if(f=="A")if(rt.length>0)for(i in rt)t=VIS.dataContext.getJSONData(VIS.Application.contextUrl+"VA005/ProductManagement/LoadUOMConversionData",{C_UOM_Conversion_ID:rt[i]}),t!=null&&l.push({recid:r,product_ID:t.M_Product_ID,Product:t.Name,C_Uom_ID:t.C_UOM_To_ID,attribute_ID:0,Attribute:"",UPC:t.UPC,Qty:1});else if(et.length>0)for(i in et)wt[i]==""&&(wt[i]=" "),t=VIS.dataContext.getJSONData(VIS.Application.contextUrl+"VA005/ProductManagement/LoadProdAttributeData",{M_Product_ID:u[0],M_AttributeSetInstance_ID:et[i],UPC:wt[i]}),t!=null&&l.push({recid:r,product_ID:t.M_Product_ID,Product:t.Name,C_Uom_ID:t.C_UOM_ID,attribute_ID:t.M_AttributeSetInstance_ID,Attribute:t.Description,UPC:t.UPC,Qty:1});else if(u.length>0)for(i in u)t=VIS.dataContext.getJSONData(VIS.Application.contextUrl+"VA005/ProductManagement/LoadProductCartData",{M_Product_ID:u[i]}),t!=null&&l.push({recid:r,product_ID:u[i],Product:t.Name,C_Uom_ID:t.C_UOM_ID,attribute_ID:t.M_AttributeSetInstance_ID,Attribute:t.Description,UPC:t.UPC,Qty:1});wv()}function iy(){r[0].style.visibility="visible";t.ajax({type:"POST",url:VIS.Application.contextUrl+"VA005/ProductManagement/SaveConversion",dataType:"json",data:{id:u[0],Conv_ID:d,Mul:VIS.Utility.Util.getValueOfDouble(vr.val()),Div:VIS.Utility.Util.getValueOfDouble(yr.val()),UOM:b[0],UomTo:VIS.Utility.Util.getValueOfInt(bi.val()),UOMUPC:VIS.Utility.Util.getValueOfString(ee.val())},success:function(n){var t=n.result;t==""?(eu(),fs(),v.show()):VIS.ADialog.error(t);r[0].style.visibility="hidden"},error:function(n,t){console.log(t);r[0].style.visibility="hidden";alert("RecordNotSaved");return}})}function eu(){bi.val(-1);vr.val(0);yr.val(0);ee.val("");d=0;bu.hide();tf.show();v.css("height","85%")}function ae(){rr.getControl().val("");cr.hide();rf.show()}function ry(){be.css("display","none");ke.text("");pf.find("span").remove();wf.find("span").remove();df.find("span").remove();bf.find("span").remove();kf.find("span").remove();gf.find("span").remove();de.find("span").remove();fr.empty();fr.append(t('<i style="max-height: 100%; max-width: 100%;" class="fa fa-picture-o" ><\/i>'))}function ai(){hu.removeClass("VA005-selectedTab");su.removeClass("VA005-selectedTab");nf.removeClass("VA005-selectedTab");rt=[];et=[];p={};d=0;st=0;c.find(".VA005-checkbox").prop("checked",!1);c.find(".VA005-uom-wrap").removeClass("vis-group-selected-op vis-group-selected-opbackground");v.find(".VA005-checkbox").prop("checked",!1);v.find(".VA005-uom-wrap").removeClass("vis-group-selected-op vis-group-selected-opbackground");eu();ae();ry();sr.hide();v.hide();tr.hide();c.hide();pt.hide();li.hide()}function uy(n,u){r[0].style.visibility="visible";t.ajax({type:"POST",url:VIS.Application.contextUrl+"VA005/ProductManagement/GetAttributeValues",dataType:"json",async:!1,data:{product_id:u},success:function(o){var h=JSON.parse(o),s,c,b,k,d,p,g;if(y.empty(),h!=null&&h.length>0){var w=0,l="",a=null,v=null;for(s=0;s<h.length;s++){if(c=h[s].imageurl,s==0){l=t('<div class="VA005-AttributesValuesBtm VA005-AttValues-Btm"><div><span class="glyphicon glyphicon-minus VA005-glyphicon-plus" style="float: left; margin: 2px 5px 0 0; font-size: 12px;"><\/span><p style="color:#1aa0ed;font-weight:bold;">'+h[s].AttributeName+"<\/p><\/div><\/div>");y.append(l.append(t('<div class="VA005-getDiv_'+s+' VA005-AttValofbindingImg" style="width:100%;">')));a=y.find(".VA005-getDiv_"+s+"");l.find(".VA005-glyphicon-plus").on("click",function(){el(t(this),t(t(this).parents()[1]).find(".VA005-AttValofbindingImg"))})}else if(w!=h[s].attributeID){l=t('<div class="VA005-AttributesValuesDown VA005-AttValues-Btm"><div><span class="glyphicon glyphicon-minus VA005-glyphicon-plus" style="float: left; margin: 2px 5px 0 0; font-size: 12px;"><\/span><p style="color:#1aa0ed;font-weight:bold;">'+h[s].AttributeName+"<\/p><\/div><\/div>");y.append(l.append(t('<div class="VA005-getDiv_'+s+' VA005-AttValofbindingImg" style="width:100%;">')));a=y.find(".VA005-getDiv_"+s+"");l.find(".VA005-glyphicon-plus").on("click",function(){el(t(this),t(t(this).parents()[1]).find(".VA005-AttValofbindingImg"))})}c==""?(c=VIS.Application.contextUrl+"Areas/VA005/Images/img-defult.png",v=t('<div class="vis-group-user-img VA005-AttributesValuesImgTop"><img style="height: 32px;width: 32px;" class="VA005-Image-AttValImg" src="'+c+'" data-uid="'+u+'" data-attimages_id="'+h[s].attimages+'"  data-attvalID="'+h[s].AttributeValueID+'"  alt="prod-img"><p class="VA005-Image-AttValPar">'+h[s].attValueName+"<\/p><\/div>")):(b=new Date,k=b.getTime(),c=VIS.Application.contextUrl+c+"?"+k,v=t('<div class="vis-group-user-img VA005-AttributesValuesImgTop"><img class="VA005-Image-AttValImg" src="'+c+'" data-uid="'+u+'" data-attimages_id="'+h[s].attimages+'"  data-attvalID="'+h[s].AttributeValueID+'"  alt="prod-img"><p class="VA005-Image-AttValPar">'+h[s].attValueName+"<\/p><\/div>"));a.append(v);w=h[s].attributeID}}(h.length==0||h==null)&&(d=t('<span style="float: left;width: 100%;text-align: center;"><p style="padding-top: 5%;">'+VIS.Msg.getMsg("TMRecordNotFound")+"<\/p><\/span>"),y.append(d));ey(n);y.parent().prepend(wo);bo=f.find("#VA005_SelectedNodeText_"+i.windowNo);bo.text(e.find(".vis-group-selected-op").find(".VA005-NameOfSelectedNode").text());p=bo.text();p+=" "+VIS.Msg.getMsg("VA005_Attributelisting");bo.text(p);le=wo.find("#VA005_btnDeleteAttVal_"+i.windowNo);si=wo.find("#VA005_btnDeleteCross_"+i.windowNo);le.on("click",function(){y.find(".VA005-AttValueImgaeBorderSelect").length>0&&VIS.ADialog.confirm("VA005_DoyouWanttoDelete",!0,"","Confirm",function(n){if(n)fy();else return})});si.on("click",function(){e.height(t(f.parent()).height()-95);y.parent().css("display","none");e.css("border-bottom","none");ht.find(".ui-resizable-s").css("display","none");ht.find(".ui-resizable-se").css("display","none");ht.css("border-bottom","none");e.height(e.height()+20);ni=!1});r[0].style.visibility="visible";g=ci.height()-(e.height()+105);y.parent().height(g);ht.height(t(f.parent()).height()-400);e.height(t(f.parent()).height()-400);y.parent().height(ci.height()-(f.find(".vis-group-users-container").height()+130));y.height(ci.height()-(f.find(".vis-group-users-container").height()+130));y.parent().css("display","inherit");ht.find(".ui-resizable-s").css("display","inherit");ht.find(".ui-resizable-se").css("display","inherit");e.height(e.height()-20);ht.css("border-bottom","2px solid #1aa0ed");window.setTimeout(function(){r[0].style.visibility="hidden"},300)},error:function(){r[0].style.visibility="hidden"}})}function fy(){var u,f,i,n;for(r[0].style.visibility="visible",u=[],f=y.find(".VA005-AttValueImgaeBorderSelect"),i=0;i<f.length;i++)(n=t(f.find("img")[i]),n.attr("data-attimages_id")!="")&&u.push({M_AttributeValue_ID:n.attr("data-attvalid"),M_Product_ID:n.attr("data-uid"),AD_Imaeg_ID:n.attr("data-attimages_id")});t.ajax({type:"post",dataType:"json",url:VIS.Application.contextUrl+"VA005/ProductManagement/DeleteAttributeValues",data:{attValueImagesID:JSON.stringify(u)},success:function(n){var u=JSON.parse(n),i,t;u==""&&(i=VIS.Application.contextUrl+"Areas/VA005/Images/img-defult.png",t=y.find(".VA005-AttValueImgaeBorderSelect").find("img"),t.attr("src",i),t.css({height:"32px",width:"32px"}),y.find(".VA005-AttValueImgaeBorderSelect").removeClass("VA005-AttValueImgaeBorderSelect"),le.addClass("VA005-AttValOpacity"));r[0].style.visibility="hidden"},error:function(n){console.log(n);r[0].style.visibility="hidden"}})}function ey(){y.find(".VA005-AttributesValuesImgTop").droppable({drop:function(n,i){var r="";r=t(i.draggable).attr("path").contains("Thumb100x100")?t(i.draggable).attr("path").replace("Thumb100x100\\",""):t(i.draggable).attr("path");ep(r,t(i.draggable).attr("filename"),parseInt(t(this).find("img").attr("data-uid")),t(this),t(this).find("img").attr("data-attvalID"),t(this).find("img").attr("data-attimages_id"))},tolerance:"pointer"})}function el(n,i){t(i).height()=="0"?(t(i).css("height","auto"),n.removeClass("glyphicon glyphicon-plus"),n.addClass("glyphicon glyphicon-minus")):(t(i).css("height","0px"),n.removeClass("glyphicon glyphicon-minus"),n.addClass("glyphicon glyphicon-plus"))}function oy(n){var i=t(n.target);if(i.hasClass("glyphicon-picture"))r[0].style.visibility="visible",ni=!0,ge.trigger("click"),ct.prop("checked",!1),u=[],b=[],e.find(".VA005-checkbox").prop("checked",!1),e.find(".vis-group-user-wrap").removeClass("vis-group-selected-op vis-group-selected-opbackground"),t(i.parents(".vis-group-user-wrap")).addClass("vis-group-selected-op vis-group-selected-opbackground"),t(i.parents(".vis-group-user-wrap")).find(".VA005-checkbox").prop("checked",!0),ut=t(i.parents(".vis-group-user-wrap")).data("uid"),gt=t(i.parents(".vis-group-user-wrap")).find(".VA005-Uom-span").data("uid"),u.push(ut),b.push(gt);else if(i.hasClass("glyphicon-edit"))ut=i.data("uid"),pu(ut,"Product"),dc=ut,ut=0;else if(i.hasClass("glyphicon-shopping-cart")){if(!ei){if(it.val()==0){VIS.ADialog.error("VA005_selectCart");return}ut=i.data("uid");r[0].style.visibility="visible";ei=!0;i.css("color","lime");window.setTimeout(function(){i.css("color","#616364")},1e3);us("P")}}else if(i.hasClass("VA005-checkbox"))ut=i.data("uid"),gt=t(i.parents(".vis-group-user-wrap")).find(".VA005-Uom-span").data("uid"),i.prop("checked")?(window.setTimeout(function(){t(i.parents(".vis-group-user-wrap")).addClass("vis-group-selected-op vis-group-selected-opbackground")},200),u.push(ut),b.push(gt)):(window.setTimeout(function(){t(i.parents(".vis-group-user-wrap")).removeClass("vis-group-selected-op vis-group-selected-opbackground")},200),u.splice(u.indexOf(ut),1),b.splice(b.indexOf(gt),1)),ut=0;else if(i.hasClass("vis-group-user-wrap"))ct.prop("checked",!1),u=[],b=[],e.find(".VA005-checkbox").prop("checked",!1),i.hasClass("vis-group-selected-op vis-group-selected-opbackground")?(e.find(".vis-group-user-wrap").removeClass("vis-group-selected-op vis-group-selected-opbackground"),ut=0,gt=i.find(".VA005-Uom-span").data("uid"),b.splice(b.indexOf(gt),1)):(e.find(".vis-group-user-wrap").removeClass("vis-group-selected-op vis-group-selected-opbackground"),i.addClass("vis-group-selected-op vis-group-selected-opbackground"),i.find(".VA005-checkbox").prop("checked",!0),ut=i.data("uid"),gt=i.find(".VA005-Uom-span").data("uid"),u.push(ut),b.push(gt));else if(t(i.parents(".vis-group-user-wrap")).length>0)ct.prop("checked",!1),u=[],b=[],e.find(".VA005-checkbox").prop("checked",!1),t(i.parents(".vis-group-user-wrap")).hasClass("vis-group-selected-op vis-group-selected-opbackground")?(e.find(".vis-group-user-wrap").removeClass("vis-group-selected-op vis-group-selected-opbackground"),ut=0,gt=t(i.parents(".vis-group-user-wrap")).find(".VA005-Uom-span").data("uid"),b.splice(b.indexOf(gt),1)):(e.find(".vis-group-user-wrap").removeClass("vis-group-selected-op vis-group-selected-opbackground"),t(i.parents(".vis-group-user-wrap")).addClass("vis-group-selected-op vis-group-selected-opbackground"),t(i.parents(".vis-group-user-wrap")).find(".VA005-checkbox").prop("checked",!0),ut=t(i.parents(".vis-group-user-wrap")).data("uid"),gt=t(i.parents(".vis-group-user-wrap")).find(".VA005-Uom-span").data("uid"),u.push(ut),b.push(gt));else return;u.length==0||u.length>1?(ai(),u.length>1&&ni==!0&&si.trigger("click")):(eu(),lr.find("li").hasClass("VA005-selectedTab")?gu.hasClass("VA005-selectedTab")?rc():hu.hasClass("VA005-selectedTab")?fs():su.hasClass("VA005-selectedTab")?(ve(),hl()):nf.hasClass("VA005-selectedTab")&&cf():(gu.addClass("VA005-selectedTab"),gi.show(),rc()));window.setTimeout(function(){if(ni==!0&&(r[0].style.visibility="visible",!i.hasClass("glyphicon-edit"))){var u=0;u=t(e.find(".vis-group-selected-opbackground")[0]).attr("data-uid")==0||t(e.find(".vis-group-selected-opbackground")[0]).attr("data-uid")==""?dc:t(e.find(".vis-group-selected-opbackground")[0]).attr("data-uid");uy(n,u)}window.setTimeout(function(){r[0].style.visibility="hidden"},500)},100)}function sy(n){var i=t(n.target),u;if(i.hasClass("glyphicon-edit"))d=i.attr("conversionid"),tf.hide(),bu.show(),cy(d);else if(i.hasClass("glyphicon-trash"))u=i.attr("conversionid"),ly(u);else if(i.hasClass("glyphicon-shopping-cart")){if(!ei){if(it.val()==0){VIS.ADialog.error("VA005_selectCart");return}d=i.attr("conversionid");r[0].style.visibility="visible";ei=!0;i.css("color","lime");window.setTimeout(function(){i.css("color","#616364")},1e3);us("U")}}else if(i.hasClass("VA005-checkbox"))d=t(i.parents(".VA005-uom-wrap")).attr("conversionid"),i.prop("checked")?(rt.push(d),window.setTimeout(function(){t(i.parents(".VA005-uom-wrap")).addClass("vis-group-selected-op vis-group-selected-opbackground")},200)):(rt.splice(rt.indexOf(d),1),window.setTimeout(function(){t(i.parents(".VA005-uom-wrap")).removeClass("vis-group-selected-op vis-group-selected-opbackground")},200));else if(i.hasClass("VA005-uom-wrap"))rt=[],v.find(".VA005-checkbox").prop("checked",!1),i.hasClass("vis-group-selected-op vis-group-selected-opbackground")?(v.find(".VA005-uom-wrap").removeClass("vis-group-selected-op vis-group-selected-opbackground"),d=i.attr("conversionid"),rt.splice(rt.indexOf(d),1)):(v.find(".VA005-uom-wrap").removeClass("vis-group-selected-op vis-group-selected-opbackground"),i.addClass("vis-group-selected-op vis-group-selected-opbackground"),i.find(".VA005-checkbox").prop("checked",!0),d=i.attr("conversionid"),rt.push(d));else if(t(i.parents(".VA005-uom-wrap")).length>0)rt=[],v.find(".VA005-checkbox").prop("checked",!1),t(i.parents(".VA005-uom-wrap")).hasClass("vis-group-selected-op vis-group-selected-opbackground")?(v.find(".VA005-uom-wrap").removeClass("vis-group-selected-op vis-group-selected-opbackground"),d=t(i.parents(".VA005-uom-wrap")).attr("conversionid"),rt.splice(rt.indexOf(d),1)):(v.find(".VA005-uom-wrap").removeClass("vis-group-selected-op vis-group-selected-opbackground"),t(i.parents(".VA005-uom-wrap")).addClass("vis-group-selected-op vis-group-selected-opbackground"),t(i.parents(".VA005-uom-wrap")).find(".VA005-checkbox").prop("checked",!0),d=t(i.parents(".VA005-uom-wrap")).attr("conversionid"),rt.push(d));else return}function hy(n){var i=t(n.target),u;if(i.hasClass("VA005-checkbox"))st=t(i.parents(".VA005-uom-wrap")).attr("attr_id"),lt=t(i.parents(".VA005-uom-wrap")).attr("upc"),i.prop("checked")?(et.push(st),wt.push(lt),window.setTimeout(function(){t(i.parents(".VA005-uom-wrap")).addClass("vis-group-selected-op vis-group-selected-opbackground")},200)):(et.splice(et.indexOf(st),1),wt.splice(wt.indexOf(lt),1),window.setTimeout(function(){t(i.parents(".VA005-uom-wrap")).removeClass("vis-group-selected-op vis-group-selected-opbackground")},200));else if(i.hasClass("glyphicon-shopping-cart")){if(!ei){if(it.val()==0){VIS.ADialog.error("VA005_selectCart");return}st=i.attr("attr_id");lt=i.attr("upc");r[0].style.visibility="visible";ei=!0;i.css("color","lime");window.setTimeout(function(){i.css("color","#616364")},1e3);us("V")}}else if(i.hasClass("VA005-Edit-UPC"))ue.popup({tooltipanchor:i,autoopen:!0,type:"tooltip",background:!0,backgroundactive:!0,offsetleft:-43,offsettop:-10}),uf=i.attr("patrid"),u=VIS.dataContext.getJSONRecord("VA005/ProductManagement/GetProductUPC",uf),ar.val(u);else if(i.hasClass("VA005-uom-wrap"))et=[],wt=[],c.find(".VA005-checkbox").prop("checked",!1),i.hasClass("vis-group-selected-op vis-group-selected-opbackground")?(c.find(".VA005-uom-wrap").removeClass("vis-group-selected-op vis-group-selected-opbackground"),st=i.attr("attr_id"),lt=i.attr("upc"),et.splice(et.indexOf(st),1),wt.splice(wt.indexOf(lt),1)):(c.find(".VA005-uom-wrap").removeClass("vis-group-selected-op vis-group-selected-opbackground"),i.addClass("vis-group-selected-op vis-group-selected-opbackground"),i.find(".VA005-checkbox").prop("checked",!0),st=i.attr("attr_id"),lt=i.attr("upc"),et.push(st),wt.push(lt));else if(t(i.parents(".VA005-uom-wrap")).length>0)et=[],wt=[],c.find(".VA005-checkbox").prop("checked",!1),t(i.parents(".VA005-uom-wrap")).hasClass("vis-group-selected-op vis-group-selected-opbackground")?(c.find(".VA005-uom-wrap").removeClass("vis-group-selected-op vis-group-selected-opbackground"),st=t(i.parents(".VA005-uom-wrap")).attr("attr_id"),lt=t(i.parents(".VA005-uom-wrap")).attr("upc"),et.splice(et.indexOf(st),1),wt.splice(wt.indexOf(lt),1)):(c.find(".VA005-uom-wrap").removeClass("vis-group-selected-op vis-group-selected-opbackground"),t(i.parents(".VA005-uom-wrap")).addClass("vis-group-selected-op vis-group-selected-opbackground"),t(i.parents(".VA005-uom-wrap")).find(".VA005-checkbox").prop("checked",!0),st=t(i.parents(".VA005-uom-wrap")).attr("attr_id"),lt=t(i.parents(".VA005-uom-wrap")).attr("upc"),et.push(st),wt.push(lt));else return}function cy(n){var t=VIS.dataContext.getJSONData(VIS.Application.contextUrl+"VA005/ProductManagement/LoadUOMRate",{C_UOM_Conversion_ID:n});t!=null&&(bi.val(t.C_UOM_To_ID),yr.val(t.DivideRate),vr.val(t.MultiplyRate),ee.val(t.UPC))}function ly(n){if(VIS.ADialog.ask("DeleteRecord?")){var t=VIS.dataContext.getJSONData(VIS.Application.contextUrl+"VA005/ProductManagement/DeleteConversion",{C_UOM_Conversion_ID:n});t>0?fs():VIS.ADialog.error("VA005_ConversionNotDeleted")}}function fs(){r[0].style.visibility="visible";rt=[];d=0;v.find(".VA005-uom-wrap").remove();VIS.dataContext.getJSONData(VIS.Application.contextUrl+"VA005/ProductManagement/LoadUomGroup",{M_Product_ID:u[0]},ay)}function ay(n){var i=0,t;if(n!=null)for(t in n){i=i+1;var f=n[t].Name,c=n[t].C_UOM_To_ID,e=n[t].DivideRate,o=n[t].MultiplyRate,u=n[t].C_UOM_Conversion_ID,s=n[t].UPC,h='<div class="VA005-uom-wrap" conversionid = '+u+'><div class="VA005-item-top"><div class="VA005-item-name"><input class="VA005-checkbox" type="checkbox"><label>'+f+'<\/label><\/div><div class="VA005-item-icons"><span id = "VA005_BarCode_'+i+'" style="float:left;"><\/span><span conversionid = '+u+' class="VA005-uom-icons glyphicon glyphicon-trash VA005-icons-color" title="'+VIS.Msg.getMsg("DeleteActivity")+'"><\/span><span conversionid = '+u+' class="VA005-uom-icons glyphicon glyphicon-edit VA005-icons-color" title="'+VIS.Msg.getMsg("Edit")+'"><\/span><span class="VA005-uom-icons glyphicon glyphicon-shopping-cart VA005-icons-color" conversionid = '+u+' title="'+VIS.Msg.getMsg("VA005_AddCart")+'"><\/span><\/div><\/div><div><span class="VA005-multiplier">'+VIS.Msg.getElement(VIS.Env.getCtx(),"MultiplyRate")+" : "+o+'<\/span><span class="VA005-divide">'+VIS.Msg.getElement(VIS.Env.getCtx(),"DivideRate")+" : "+e+"<\/span><\/div><\/div>";v.append(h);es(s,v.find("#VA005_BarCode_"+i))}window.setTimeout(function(){r[0].style.visibility="hidden"},60)}function ve(){if(r[0].style.visibility="visible",c.empty(),VIS.Env.getCtx().setContext(i.windowNo,"M_Product_ID",VIS.Utility.Util.getValueOfInt(u[0])),uu=VIS.dataContext.getJSONRecord("VA005/ProductManagement/GetAttributeSet",u[0]),uu>0)VIS.dataContext.getJSONData(VIS.Application.contextUrl+"VA005/ProductManagement/LoadVarients",{M_Product_ID:u[0]},vy);else{var n='<div style="float: left;width: 100%;"><span style="font-style:italic;font-weight:bold;">'+VIS.Msg.getMsg("PAttributeNoAttributeSet")+"<\/span><\/div>";c.append(n);r[0].style.visibility="hidden"}}function vy(n){var i=0,t;if(n!=null)for(t in n){i=i+1;var u=n[t].UPC,f=n[t].M_AttributeSetInstance_ID,e=n[t].Description,o=n[t].M_ProductAttributes_ID,s='<div class="VA005-uom-wrap" attr_id = '+f+" upc = "+u+'><div class="VA005-item-top"><div class="VA005-item-name"><input class="VA005-checkbox" type="checkbox" ><label>'+e+'<\/label><\/div><div class="VA005-item-icons"><span id = "VA005_BarCode_'+i+'" style="float:left;"><\/span><span attr_id = '+f+' upc = "'+u+'" class="VA005-uom-icons glyphicon glyphicon-shopping-cart VA005-icons-color" title="'+VIS.Msg.getMsg("VA005_AddCart")+'"><\/span><\/div><\/div><div style="float: left;width: 100%;"><span patrid='+o+' class="VA005-Edit-UPC">'+VIS.Msg.getMsg("VA005_EditUPC")+"<\/span><\/div>";c.append(s);es(u,c.find("#VA005_BarCode_"+i))}window.setTimeout(function(){r[0].style.visibility="hidden"},60)}function rc(){r[0].style.visibility="visible";VIS.dataContext.getJSONData(VIS.Application.contextUrl+"VA005/ProductManagement/GetProductDetails",{M_Product_ID:u[0]},yy)}function yy(n){var i,u;r[0].style.visibility="visible";n.Table[0]!=null&&(be.css("display","block"),ke.text(n.Table[0].NAME),pf.find("span").remove(),pf.append("<span>"+n.Table[0].UPC+"<\/span>"),wf.find("span").remove(),wf.append("<span>"+n.Table[0].ATTRIBUTE+"<\/span>"),df.find("span").remove(),df.append("<span>"+n.Table[0].PRODUCTTYPE+"<\/span>"),bf.find("span").remove(),bf.append("<span>"+n.Table[0].PRODUCTCATEGORY+"<\/span>"),kf.find("span").remove(),kf.append("<span>"+n.Table[0].TAXCATEGORY+"<\/span>"),gf.find("span").remove(),gf.append("<span>"+n.Table[0].UOM+"<\/span>"),de.find("span").remove(),de.append("<span>"+n.Table[0].TREE+"<\/span>"),i=n.Table[0].IMAGEURL,i!=null?i!=""?(i=i.substring(i.lastIndexOf("/")+1,i.length),u=new Date,vo.removeAttr("src"),vo.attr("src",VIS.Application.contextUrl+"Images/Thumb140x120/"+i+"?"+u.getTime()),fr.empty(),fr.append(vo)):(fr.empty(),fr.append(t('<i style="max-height: 100%; max-width: 100%;" class="fa fa-picture-o" ><\/i>'))):(fr.empty(),fr.append(t('<i style="max-height: 100%; max-width: 100%;" class="fa fa-picture-o" ><\/i>'))));window.setTimeout(function(){r[0].style.visibility="hidden"},60)}function ol(){r[0].style.visibility="visible";t.ajax({type:"POST",url:VIS.Application.contextUrl+"VA005/ProductManagement/updateVarient",dataType:"json",data:{id:uf,UpcCode:ar.val()},success:function(n){var t=n.result;t==""?(ue.popup("hide"),ar.val(""),uf=0,ve()):VIS.ADialog.error(t);r[0].style.visibility="hidden"},error:function(n,t){console.log(t);r[0].style.visibility="hidden";alert("RecordNotSaved");return}})}function sl(n){var u=0,i=0,r=t(n.target);r.data("dtype")=="3"&&(u=r.data("nodeid"),i=r.data("parentid"),r.hasClass("VA005-checkbox")?r.prop("checked")?(p[i]||(p[i]=[]),p[i].push(u)):p[i].splice(p[i].indexOf(u),1):t(r.parents(".VA005-attribute")).find(".VA005-checkbox").prop("checked")?(t(r.parents(".VA005-attribute")).find(".VA005-checkbox").prop("checked",!1),p[i].splice(p[i].indexOf(u),1)):(t(r.parents(".VA005-attribute")).find(".VA005-checkbox").prop("checked",!0),p[i]||(p[i]=[]),p[i].push(u)))}function hl(){p={};uu=VIS.dataContext.getJSONRecord("VA005/ProductManagement/GetAttributeSet",u[0]);uu>0?(r[0].style.visibility="visible",t.ajax({url:VIS.Application.contextUrl+"VA005/ProductManagement/AttributeSetListing",type:"Get",data:{AttributeSet_ID:uu},success:function(n){var t=JSON.parse(n),i,u;if(he=[],kt&&kt.data("kendoTreeView")!=undefined&&(kt.data("kendoTreeView").destroy(),kt.empty()),t!=null){nu.show();for(i in t[0].items)he.push(t[0].items[i].NodeID)}else{kt.empty();u='<div style="float: left;width: 100%;"><span style="font-style:italic;font-weight:bold;white-space:normal;">'+VIS.Msg.getMsg("VA005_LotSerialAttribute")+"<\/span><\/div>";kt.append(u);nu.hide();r[0].style.visibility="hidden";return}kt.kendoTreeView({dragAndDrop:!1,dataSource:t,template:"<div style='margin:#= item.margin #;float:left' data-parentid='#= item.ParentID #' data-nodeid='#= item.NodeID #' data-dType= '#= item.Type #' class='VA005-attribute'><div style='width:auto;float:left' data-parentid='#= item.ParentID #' data-nodeid='#= item.NodeID #' data-dType= '#= item.Type #'><input type='checkbox' class='VA005-checkbox' style='vertical-align: text-top;float: left;margin: 11px 16px 0px 15px;display:#= item.checkbox #' data-parentid='#= item.ParentID #' data-nodeid='#= item.NodeID #' data-dType= '#= item.Type #'><img src='"+VIS.Application.contextUrl+"#= item.ImageSource #' style='vertical-align: text-top;float: left;margin: 6px 16px 0px 15px;display:#= item.visibility #' data-parentid='#= item.ParentID #' data-nodeid='#= item.NodeID #' data-dType= '#= item.Type #'><p style='margin:0 0 0 9px;border-radius:4px;padding:#= item.padding #' data-parentid='#= item.ParentID #' data-nodeid='#= item.NodeID #' data-dType= '#= item.Type #'>#= item.text #<\/p><\/div><\/div>"});window.setTimeout(function(){r[0].style.visibility="hidden"},60);kt.off("click",sl);kt.on("click",sl)},error:function(n){alert(n);r[0].style.visibility="hidden"}})):(pt.hide(),nu.hide(),c.show())}function es(n,t){var i={output:"css",bgColor:"#FFFFFF",color:"#000000",barWidth:1,barHeight:30,moduleSize:2,addQuietZone:1};n.length==12?t.barcode(n,"ean13",i):n.length==7?t.barcode(n,"ean8",i):n.length==4?t.barcode(n,"code39",i):t.barcode(n,"code128",i)}function py(){t(this).scrollTop()>0&&t(this).scrollTop()+t(this).innerHeight()+5>=this.scrollHeight&&k<wh&&(r[0].style.visibility="visible",k++,hi(yt.val(),at,ft.val(),k,tt,0))}function wy(){t(this).scrollTop()>0&&t(this).scrollTop()+t(this).innerHeight()>=this.scrollHeight&&yo<bh&&(r[0].style.visibility="visible",yo++,yu(di.val(),yo,tt))}function uc(){a.onOkClick=function(n){return VIS.Utility.Util.getValueOfString(pr.val())==""?(VIS.ADialog.error("VA005_ProductType"),n!=undefined&&n.preventDefault(),!1):VIS.Utility.Util.getValueOfString(ff.val())==""||VIS.Utility.Util.getValueOfInt(ui.val())==0||VIS.Utility.Util.getValueOfInt(dt.val())==0||VIS.Utility.Util.getValueOfInt(ur.val())==0?(VIS.ADialog.error("FillMandatory"),!1):(vv(),!1)};a.onCancelClick=function(){hf()};so.on("click",function(n){w.Attribute="Y";w.Category="N";w.Tax="N";w.UOM="N";so.w2overlay(br.clone(!0));n.stopPropagation()});ho.on("click",function(n){w.Attribute="N";w.Category="Y";w.Tax="N";w.UOM="N";ho.w2overlay(br.clone(!0));n.stopPropagation()});co.on("click",function(n){w.Attribute="N";w.Category="N";w.Tax="Y";w.UOM="N";co.w2overlay(br.clone(!0));n.stopPropagation()});lo.on("click",function(n){w.Attribute="N";w.Category="N";w.Tax="N";w.UOM="Y";lo.w2overlay(br.clone(!0));n.stopPropagation()})}function by(){fi.on("change",function(){r[0].style.visibility="visible";cl()});ii.onOkClick=function(n){return fi.val()==0?(VIS.ADialog.error("VA005_SelectPrice"),n!=undefined&&n.preventDefault(),!1):(yv(),!1)};ii.onCancelClick=function(){ii.close()}}function cl(){l=[];h.clear();ce=2;window.setTimeout(function(){if(fi.val()>0){var n=VIS.dataContext.getJSONData(VIS.Application.contextUrl+"VA005/ProductManagement/LoadPriceListData",{M_PriceList_ID:fi.val()});n!=null&&(ce=n.PricePrecision,wc=n.ISO_Code);vc.text(wc);VIS.dataContext.getJSONData(VIS.Application.contextUrl+"VA005/ProductManagement/GetProductPrices",{M_Product_ID:u,PriceList:fi.val()},ky)}else r[0].style.visibility="hidden",l=[]},200)}function ky(n){var f,e,o,u,c,s;if(n.length>0){for(l=n,f=0;f<h.columns.length;f++)(h.columns[f].field=="PriceList"||h.columns[f].field=="PriceStd"||h.columns[f].field=="PriceLimit")&&(h.columns[f].render="number:"+ce);for(w2utils.encodeTags(l),h.add(l),e=0;e<h.records.length;e++)o="",t("#grid_gridprice_"+i.windowNo+"_rec_"+h.records[e].recid).find("input[type=text]").val(l[e].Attribute),u=l[e].ImageUrl,u!=null?u!=""?(u=u.substring(u.lastIndexOf("/")+1,u.length),c=new Date,o='<img alt="" title="" style="opacity:1;" src="'+VIS.Application.contextUrl+"Images/Thumb16x16/"+u+"?"+c.getTime()+'">'):o='<i class= "fa fa-picture-o" ><\/i>':o='<i class= "fa fa-picture-o" ><\/i>',s=e+1,t(t("#grid_gridprice_"+i.windowNo+"_rec_"+s).find("div")[0]).empty(),t(t("#grid_gridprice_"+i.windowNo+"_rec_"+s).find("div")[0]).append(o)}r[0].style.visibility="hidden";l=[]}function dy(){pi.onOkClick=function(){if(VIS.Utility.Util.getValueOfString(fo.val())==""||VIS.Utility.Util.getValueOfInt(cu.val())==0)return VIS.ADialog.error("FillMandatory"),!1;var t=n.StickerProduct.prototype.create(fo.val(),cu.val(),yh);return pi.close(),!1};pi.onCancelClick=function(){fl()}}function cf(){var n,t;r[0].style.visibility="visible";l=[];n=0;bt.clear();n=n+1;t="";VIS.dataContext.getJSONData(VIS.Application.contextUrl+"VA005/ProductManagement/LoadReleatedData",{M_Product_ID:u[0]},gy)}function gy(n){var i=0,t;if(n!=null)for(t in n)i=i+1,l.push({recid:i,Product:n[t].Product,RelatedProduct:n[t].RelatedProduct,RelatedType:n[t].RelatedProductType,M_Product_ID:n[t].RelatedProduct_ID,updated:!1});w2utils.encodeTags(l);bt.add(l);l=[];window.setTimeout(function(){r[0].style.visibility="hidden"},60)}function wu(){if(r[0].style.visibility="visible",l=[],s.clear(),it.val()>0)VIS.dataContext.getJSONData(VIS.Application.contextUrl+"VA005/ProductManagement/LoadCartData",{VAICNT_InventoryCount_ID:it.val()},np);else ei=!1,r[0].style.visibility="hidden"}function np(n){var e=0,u,f,o;if(n!=null)for(u in n)e=e+1,l.push({recid:e,LineID:n[u].VAICNT_InventoryCountLine_ID,product_ID:n[u].M_Product_ID,Product:n[u].Name,C_Uom_ID:n[u].C_UOM_ID,attribute_ID:n[u].M_AttributeSetInstance_ID,Attribute:n[u].Description,UPC:n[u].UPC,Qty:n[u].VAICNT_Quantity,updated:!1});for(w2utils.encodeTags(l),s.add(l),f=0;f<s.records.length;f++)t("#grid_gridcart_"+i.windowNo+"_rec_"+s.records[f].recid).find("input[type=text]").val(l[f].Attribute),o=VIS.dataContext.getJSONRecord("VA005/ProductManagement/GetAttributeSet",l[f].product_ID),o<=0&&(t("#grid_gridcart_"+i.windowNo+"_rec_"+s.records[f].recid).find("input:not([type='checkbox'])").hide(),t("#grid_gridcart_"+i.windowNo+"_rec_"+s.records[f].recid).find("img").hide());s.selectNone();l=[];ei=!1;r[0].style.visibility="hidden"}function tp(){ki.on("change",function(){r[0].style.visibility="visible";ll()});ri.onOkClick=function(n){return ki.val()==0?(VIS.ADialog.error("VA005_SelectSupplier"),n!=undefined&&n.preventDefault(),!1):(pv(),!1)};ri.onCancelClick=function(){ri.close()}}function ll(){l=[];nt.clear();ce=2;window.setTimeout(function(){VIS.dataContext.getJSONData(VIS.Application.contextUrl+"VA005/ProductManagement/GetSupplierData",{M_Product_ID:u,Supplier:ki.val()},ip)},200)}function ip(n){if(n.length>0){l=n;for(var t=0;t<nt.columns.length;t++)(nt.columns[t].field=="OrderMin"||nt.columns[t].field=="OrderPack")&&(nt.columns[t].render="number:"+ce);w2utils.encodeTags(l);nt.add(l)}r[0].style.visibility="hidden";l=[]}function rp(){fu.length>0&&t.ajax({async:!1,type:"POST",dataType:"json",contentType:"application/json",url:VIS.Application.contextUrl+"VA005/ProductManagement/DeleteProductImage",data:JSON.stringify({images:fu}),success:function(n){var t=JSON.parse(n);i.GetImages()},error:function(n){console.log(n)}})}function up(n){r[0].style.visibility="visible";VIS.dataContext.getJSONData(VIS.Application.contextUrl+"VA005/ProductManagement/SetRelatedProduct",{M_Product_ID:u[0],RelatedProduct:n},fp)}function fp(n){n==""?cf():(VIS.ADialog.error(n),r[0].style.visibility="hidden")}function al(n,i,r,u){var f=u.find(".vis-group-user-img");t.ajax({type:"GET",dataType:"json",url:VIS.Application.contextUrl+"VA005/ProductManagement/SaveProductImage",data:{imagePath:n,imageName:i,productID:r},success:function(n){var t=JSON.parse(n),i;t!=null&&(i='<img alt="" title="" style="opacity:1;" src="'+t+'">',f.empty(),f.append(i))},error:function(n){console.log(n)}})}function ep(n,i,u,f,e,o){r[0].style.visibility="visible";var s=f.find("img");t.ajax({type:"GET",dataType:"json",url:VIS.Application.contextUrl+"VA005/ProductManagement/SaveAttributeValueImage",data:{imagePath:n,imageName:i,productID:u,attributeValue:e,attimages_id:o},success:function(n){var t=JSON.parse(n);t!=null&&(s.attr("src",t.urls),s.attr("data-attimages_id",t.imgID),s.css({height:"auto",width:"auto"}));r[0].style.visibility="hidden"},error:function(n){console.log(n);r[0].style.visibility="hidden"}})}function op(){t.ajax({type:"POST",dataType:"json",contentType:"application/json; charset=utf-8",url:VIS.Application.contextUrl+"VA005/VA005_Tree/GetTreeAsString",data:JSON.stringify({editable:!0}),success:function(n){if(n!=null){var t=JSON.parse(n);oi&&oi.data("kendoTreeView")!=undefined&&(oi.data("kendoTreeView").destroy(),oi.empty());ia=oi.kendoTreeView({dragAndDrop:!1,dataSource:t,template:"<div class='va005-parentss' id=#= item.NodeID #><div style='float:left'><div  class='va005_mouseover'  style='float:left'><p id=#= item.NodeID # style='margin:0 0 0 9px;border-radius:4px;'>#= item.text #<\/p><\/div><\/div><\/div>"});oi.off("click","p",vl);oi.on("click","p",vl)}r[0].style.visibility="hidden";oi.css({display:"block","margin-top":"10px",color:"#fff",cursor:"pointer",height:"70%",width:"100%"});f.find(".k-treeview .k-icon").css({"background-color":"#cccccc","border-radius":"4px"});f.find(".k-top k-bot").css({"background-color":"#cccccc"});f.find(".k-widget k-treeview").css({height:"70%",position:"absolute"});f.find(".VA005-apanel-lb").css({overflow:"inherit",position:"relative"});oi.height(po)},error:function(n){r[0].style.visibility="hidden";console.log(n)}})}function vl(n){k=1;u=[];b=[];ft.val(0);yt.val("");ct.prop("checked",!1);var i=t(n.target);wr=i.attr("id");ai();sp();ni==!0&&si.trigger("click");e.find(".vis-group-user-wrap").remove();hi("",0,ft.val(),k,tt,wr)}function sp(){var n=VIS.dataContext.getJSONData(VIS.Application.contextUrl+"VA005/ProductManagement/LoadParentData",{M_Product_ID:wr});n!=null&&(se=n.C_TaxCategory_ID,oe=n.M_Product_Category_ID)}var dh,gh,go,ns,ts,is,gc,nl,nc,tl,il,rs,tc,fv,rl,pu,ic,hf,ye,os;this.frame;this.windowNo;var i=this,f=t('<div class="vis-group-assign-content vis-forms-container" style="height:100%;">'),br=null,lf,kr,pe,ss,af,fc,vi,ot,vf,er,hs,yl=t('<div style="display: inline-block;float:left;height:100%;width:250px;background:rgb(87, 87, 87);">'),pl=null,r=null,we=null,ec=null,ci=null,o=null,or=null,yt=null,ft=null,yf=null,cs=null,ls=null,di=null,oc=null,as=null,vs=null,e=null,ys=null,v=null,sr=null,bu=null,c=null,yi=null,gi=null,dr=null,gr=null,li=null,be=null,sc=null,ke=null,pf=null,wf=null,bf=null,kf=null,df=null,gf=null,de=null,ti=null,nr=null,hr=null,pt=null,kt=null,tr=null,cr=null,a=null,ii=null,ri=null,pi=null,wl=!0,g=t('<div class="vis-forms-container" style="display:none;"><\/div>'),ps=t('<div style="overflow-y:auto;margin-right:-2px;"><\/div>'),ws=t('<div style="width:100%;height:100%;"><\/div>'),ou=t('<div style="width:100%;height:100%;display:none;margin-left:6px;"><\/div>'),hc=t('<div style="width:100%;height:100%;"><\/div>'),ku=t('<div style="width:100%;height:100%;display:none;margin-left:6px;"><\/div>'),bs=t('<div style="width:100%;height:100%;"><\/div>'),ks=t('<div style="width:100%;height:100%;"><\/div>'),ne=t('<div style="display:none;"><\/div>'),cc=t('<div style="overflow-y:auto;margin-right:-2px;margin-bottom:15px"><\/div>'),lc=t('<div style="width:100%;height:100%;"><\/div>'),ds=null,gs=null,nh,ac,ir=null,lr=null,du=null,vc=null,th=null,ge=null,ih=null,rh=null,uh=null,te=null,bl=null,kl=null,fh=null,ct=null,gu=null,su=null,hu=null,nf=null,ie=null,tf=null,rf=null,nu=null,eh=null,oh=null,sh=null,re=null,hh=null,no=null,to=null,ch=null,yc=null,lh=null,ah=null,vh=null,io=null,ro=null,pc=null,uo=null,rr=null,ar=null,fo=null,cu=null,ue=null,uf=0,eo=0,tu=null,ff=null,ef=null,fe=null,vr=null,yr=null,ee=!1,iu=null,pr=null,wi=null,ui=null,ur=null,bi=null,dt=null,fi=null,ki=null,dl=null,it=null,oo=0,so=null,ho=null,co=null,lo=null,yh=[],u=[],b=[],rt=[],et=[],wt=[],ut=0,gt=0,d=0,st=0,lt="",at=0,lu=0,wr=0,oe=0,se=0,ph=0,wh=0,bh=0,ao=null,vt=[],ru=[],l=[],au=[],of=0,h=null,nt=null,bt=null,s=null,fr=null,vo=null,k=1,yo=1,tt=50,uu=0,vu=null,fu=[],gl=null,na=[],ta=[],he=[],p={},w={Attribute:"N",Tax:"N",Category:"N",UOM:"N"},ei=!1,ce=2,wc=null,bc=null,kh=!1,ia,oi=t("<div>"),po=0,y=null,kc=null,wo=null,le=null,si=null,ni=!1,bo=null,dc=null,ko=null,ra=null,ht=null,sf=!1;lv();this.Initialize=function(){ua()};this.initData=function(){window.setTimeout(function(){tc();nl();nc();oa();i.GetImages();ye();os();yu(di.val(),yo,tt);oi.css({display:"none"});av();ty()},200)};dh=function(){eo=VIS.context.getContextAsInt("#AD_Org_ID");iu.empty();VIS.dataContext.getJSONData(VIS.Application.contextUrl+"VA005/ProductManagement/LoadOrganization","",va)};gh=function(){pr.empty();VIS.dataContext.getJSONData(VIS.Application.contextUrl+"VA005/ProductManagement/LoadProductType","",ya)};go=function(){wi.empty();VIS.dataContext.getJSONData(VIS.Application.contextUrl+"VA005/ProductManagement/LoadAttributes","",pa)};ns=function(){ui.empty();VIS.dataContext.getJSONData(VIS.Application.contextUrl+"VA005/ProductManagement/LoadTaxCategories","",wa)};ts=function(){dt.empty();VIS.dataContext.getJSONData(VIS.Application.contextUrl+"VA005/ProductManagement/LoadProductCategories","",ba)};is=function(n){ao=n;ao.empty();VIS.dataContext.getJSONData(VIS.Application.contextUrl+"VA005/ProductManagement/LoadUOM","",ka)};gc=function(){vt=[];vt.push({id:0,text:VIS.Msg.getMsg("Select")});VIS.dataContext.getJSONData(VIS.Application.contextUrl+"VA005/ProductManagement/LoadUOM","",da)};nl=function(){ru=[];ru.push({id:0,text:VIS.Msg.getMsg("Select")});VIS.dataContext.getJSONData(VIS.Application.contextUrl+"VA005/ProductManagement/LoadCurrency","",ga)};nc=function(){bi.empty();VIS.dataContext.getJSONData(VIS.Application.contextUrl+"VA005/ProductManagement/LoadUOM","",nv)};tl=function(){fi.empty();VIS.dataContext.getJSONData(VIS.Application.contextUrl+"VA005/ProductManagement/LoadPriceList","",tv)};il=function(){ki.empty();VIS.dataContext.getJSONData(VIS.Application.contextUrl+"VA005/ProductManagement/LoadSupplier","",iv)};rs=function(){it.empty();VIS.dataContext.getJSONData(VIS.Application.contextUrl+"VA005/ProductManagement/LoadCart","",rv)};tc=function(){ft.empty();VIS.dataContext.getJSONData(VIS.Application.contextUrl+"VA005/ProductManagement/LoadQueries","",uv)};fv=function(){kh=VIS.Utility.Util.getValueOfInt(VIS.DB.executeScalar("SELECT COUNT(*) FROM AD_MODULEINFO WHERE PREFIX='DTD001_' "))};rl=function(n){VIS.dataContext.getJSONData(VIS.Application.contextUrl+"VA005/ProductManagement/LoadOnCategorySelect",{ProdCatID:n},ev)};pu=function(n,t){var r=VIS.dataContext.getJSONRecord("VA005/ProductManagement/GetWindow_ID",t),i;try{r>0&&(i=new VIS.Query,t=="Product"?i.addRestriction("M_Product_ID",VIS.Query.prototype.EQUAL,n):t=="Attribute Set"?i.addRestriction("M_AttributeSet_ID",VIS.Query.prototype.EQUAL,n):t=="Product Category"?i.addRestriction("M_Product_Category_ID",VIS.Query.prototype.EQUAL,n):t=="Tax Category"?i.addRestriction("C_TaxCategory_ID",VIS.Query.prototype.EQUAL,n):t=="Unit of Measure"?i.addRestriction("C_Uom_ID",VIS.Query.prototype.EQUAL,n):t=="VAICNT_InventoryCount"?i.addRestriction("VAICNT_InventoryCount_ID",VIS.Query.prototype.EQUAL,n):t=="Vendor Master"&&i.addRestriction("C_BPartner_ID",VIS.Query.prototype.EQUAL,n),i.setRecordCount(1),VIS.viewManager.startWindow(r,i),a!=null&&a.close())}catch(u){console.log(u)}};ic=function(){VIS.dataContext.getJSONData(VIS.Application.contextUrl+"VA005/ProductManagement/LoadProductData",{M_Product_ID:u[0]},ny)};hf=function(){iu.val(eo);ff.val("");ef.val("");ur.val(-1);wi.val(-1);dt.val(oe);pr.val("I");ui.val(se);fe.val("");lu=0};this.GetImages=function(){t.ajax({type:"GET",dataType:"json",url:VIS.Application.contextUrl+"VA005/ProductManagement/GetImages",success:function(n){var i=JSON.parse(n),t;for(fu=[],vu.children().remove(),t=0;t<i.length;t++)vu.append("<li filename='"+i[t].ImageDetail.fileName+"' path='"+i[t].ImageDetail.filePath+"'><img src="+i[t].ImageDetail.fileBase64Data+" ><\/li>");ye()},error:function(n){console.log(n)}})};ye=function(){f.find(".VA005-productimgul li").draggable({revert:"invalid",containment:"document",helper:"clone",cursor:"move",cursorAt:{left:-10,down:-5},start:function(n,t){t.helper.animate({width:80,height:50})}});f.find(".vis-group-users-container .vis-group-user-wrap").droppable({drop:function(n,i){al(t(i.draggable).attr("path"),t(i.draggable).attr("filename"),parseInt(t(this).attr("data-uid")),t(this))},tolerance:"pointer"})};os=function(){e.find(".vis-group-user-profile").draggable({start:function(n,t){t.helper.css("width",bc);t.helper.addClass("VA005-dragging")},stop:function(n,t){t.helper.removeClass("VA005-dragging")},cursor:"move",cursorAt:{left:5},revert:"invalid",helper:"clone"});li.droppable({hoverClass:"VA005-dropping",drop:function(n,i){t(i.draggable).data("uid")>0&&up(t(i.draggable).data("uid"))}})};this.getRoot=function(){return f};this.setSize=function(n){lf.height(n);kr.height(n);er.height(n);ot.height(er.height()-43);po=ot.height()-f.find(".VA005-Serach-Query").height()*2-30;oi.height(po);y.parent().height(ci.height()-(f.find(".vis-group-users-container").height()+130));y.height(ci.height()-(f.find(".vis-group-users-container").height()+130))};this.disposeComponent=function(){i=null;f&&f.remove();f=null;br=null;lf=null;kr=pe=ss=af=vi=ot=vf=null;er=null;hs=null;yl=null;pl=null;r=null;we=null;ci=null;o=null;or=null;yt=null;ft=null;as=null;vs=null;e=null;ys=null;v=null;sr=null;bu=null;c=null;pt=null;kt=null;tr=null;cr=null;yi=null;dr=null;gr=null;be=null;ke=null;pf=null;wf=null;bf=null;kf=null;df=null;gf=null;ti=null;nr=null;hr=null;a=null;ii=null;ri=null;wl=null;g=null;ps=null;ou=null;ku=null;bs=null;ks=null;ds=null;gs=null;nh=ac=null;ir=null;lr=null;du=null;th=null;ge=null;ih=null;rh=null;uh=null;te=null;btnProdCart=null;bl=null;kl=null;fh=null;ct=null;gu=null;su=null;hu=null;ie=null;tf=null;rf=null;nu=null;eh=null;oh=null;sh=null;re=null;hh=null;to=null;no=null;uo=null;ch=null;lh=null;vh=null;ah=null;io=null;ro=null;rr=null;tu=null;ff=null;ef=null;fe=null;vr=null;yr=null;ee=!1;iu=null;pr=null;wi=null;ui=null;ur=null;bi=null;dt=null;fi=null;ki=null;dl=null;it=null;so=null;ho=null;co=null;lo=null;u=[];b=[];rt=[];et=[];wt=[];ut=null;gt=null;d=null;st=null;lt=null;at=null;ph=null;wh=null;bh=null;vu=null;fu=[];gl=null;vt=null;ru=null;l=[];of=0;h=null;nt=null;s=null;this.getRoot=null;this.disposeComponent=null;uu=null;na=[];ta=[];ar=null;ue=null;uf=0;eo=null;w=null}};n.ProductMgtForm.prototype.init=function(n,t){this.frame=t;this.windowNo=n;t.setTitle("VA005_ProductMgt");window.setTimeout(function(n){n.Initialize();n.initData()},10,this);this.frame.getContentGrid().append(this.getRoot())};n.ProductMgtForm.prototype.dispose=function(){this.disposeComponent();this.frame&&this.frame.dispose();this.frame=null};n.ProductMgtForm.prototype.sizeChanged=function(n,t){this.setSize(n,t)};n.updateProductPanel=function(n,i,r,u){function rt(){o=h.find("#VA005_drpColumn_"+f.windowNo);divValue1=h.find("#VA005_divValue1_"+f.windowNo);p=h.find("#VA005_btnSave_"+f.windowNo);w=h.find("#VA005_tblQry_"+f.windowNo);b=w.find("tbody")}function ut(){VIS.AEnv.getGridWindow(f.windowNo,i,function(n){var a,e,c,s,i,h,u;if(n.error!=null){VIS.ADialog.error(n.error);return}if(a=t.parseJSON(n.result),VIS.context.setContextOfWindow(t.parseJSON(n.wCtx),f.windowNo),e=new VIS.GridWindow(a),e!=null){if(e.getTabs().length>0)for(item in e.getTabs())if(e.getTabs()[item].gridTable.AD_Table_ID==r){k=e.getTabs()[item];break}if(k!=null){for(l=k.getFields().sort(st),c='<option value="-1"> <\/option>',s=0;s<l.length;s++)if(i=l[s],!i.getIsEncrypted()){if(h=i.getColumnName(),i.getDisplayType()==VIS.DisplayType.Button){if(i.getAD_Reference_Value_ID()==0)continue;h.endsWith("_ID")?i.setDisplayType(VIS.DisplayType.Table):i.setDisplayType(VIS.DisplayType.List)}(u=i.getHeader(),u!=null&&u.length!=0||(u=VIS.Msg.getElement(VIS.context,h),u!=null&&u.Length!=0))&&(i.getIsKey()&&(u+=" (ID)"),c+='<option value="'+h+'">'+u+"<\/option>")}o.html(c);v(!1)}}})}function ft(){o.on("change",function(){var n=o.val(),t;it(!0);n&&n!="-1"&&(t=ht(n),yt(!0,t),vt(p,!0));at(!0)});w.on("click",function(n){if(n.target.nodeName==="I"){var i=t(n.target).data("index");s.splice(i,1);tt(s)}});p.on("click",nt)}function et(n){v(!0);nt();s&&t.ajax({type:"POST",url:VIS.Application.contextUrl+"VA005/ProductManagement/UpdateProduct",dataType:"json",contentType:"application/json; charset=utf-8",data:JSON.stringify({prodIDs:u,ColumnName:s}),async:!1,success:function(t){var i=t.result;f.okBtnPressed=!0;i!=""&&(VIS.ADialog.error(i),n(i));v(!1)},error:function(n,t){console.log(t);v(!1);alert("RecordNotSaved");f.okBtnPressed=!1;return}})}function nt(){var t=o.val(),n,i;return!t||t=="-1"?!1:(n=o.find("option:selected").text(),i="",n==null||n.trim().length==0)?!1:(i=t.toString(),ot(n,i,lt(!0),ct(!0)),o[0].selectedIndex=0,it(!0),!0)}function ot(n,t,i,r){s==null&&(s=[]);var u={};u.KEYNAME=n;u.KEYVALUE=t;u.VALUE1NAME=i;u.VALUE1VALUE=i==""?"":r==null?"NULL":VIS.Utility.Util.getValueOfString(r);s.push(u);tt(s)}function st(n,t){var i=n.vo.Header.toLowerCase(),r=t.vo.Header.toLowerCase();return i==""&&(i=n.vo.ColumnName.toLowerCase()),r==""&&(r=t.vo.ColumnName.toLowerCase()),i<r?-1:i>r?1:0}function tt(n){var i,f;b.empty();var u="",r="",t=null;if(n)for(i=0,f=n.length;i<f;i++)r='<tr class="vis-advancedSearchTableRow">',t=n[i],r+="<td>"+t.KEYNAME+'<\/td><td style="display:none">'+t.KEYVALUE+"<\/td><td>"+t.VALUE1NAME+'<\/td><td style="display:none">'+t.VALUE1VALUE+'<\/td><td><i style="cursor:pointer" data-index = "'+i+'" class="vis vis-delete"><\/i><\/td>',r+="<\/tr>",u+=r;b.html(u)}function ht(n){var t,i;if(n==null||n.length==0)return null;for(t=0;t<l.length;t++)if(i=l[t],n.equals(i.getColumnName()))return i;return null}function ct(n){var t=null;return(n&&(t=a),t!=null)?t.getDisplayType()==VIS.DisplayType.YesNo?t.getValue().toString().toLowerCase()=="true"?"Y":"N":t.getValue():""}function lt(n){var t=null;return(n&&(t=a),t!=null)?t.getDisplay():""}function it(n){var t=null;n&&(t=a);t!=null&&t.setValue(null)}function at(n){var r=divValue1.children()[1],i=null;divValue1.children().length>2&&(i=divValue1.children()[2]);i?t(i).prop("disabled",!n).prop("readonly",!n):r!=null&&t(r).prop("disabled",!n).prop("readonly",!n)}function vt(n,t){n.prop("disabled",!t)}function yt(n,i){var u,e,r,f;n&&(a=null);g=null;u=null;e=null;n&&(u=divValue1.children()[1],divValue1.children().length>2&&(e=divValue1.children()[2]));u!=null&&(t(u).remove(),e!=null&&t(e).remove(),u=null);r=null;r=i!=null?i.getIsKey()?new VIS.Controls.VNumTextBox(i.getColumnName(),!1,!1,!0,i.getDisplayLength(),i.getFieldLength(),i.getColumnName()):VIS.VControlFactory.getControl(null,i,!0,!0,!1):new VIS.Controls.VTextBox("columnName",!1,!0,!1,20,20,"format","GetObscureType",!1);r!=null&&(r.setReadOnly(!1),VIS.DisplayType.Text==i.getDisplayType()||VIS.DisplayType.TextLong==i.getDisplayType()?(r.getControl().attr("rows","1"),r.getControl().css("width","100%")):VIS.DisplayType.YesNo==i.getDisplayType()?r.getControl().css("clear","both"):VIS.DisplayType.IsDate(i.getDisplayType())&&r.getControl().css("line-height","1"),f=null,r.getBtnCount()>0&&!(r instanceof VIS.Controls.VComboBox)&&(f=r.getBtn(0)),n&&(divValue1.append(r.getControl()),a=r,f&&(divValue1.append(f),r.getControl().css("width","65%"),f.css("max-width","35px"))))}function pt(){y=t("<div class='vis-apanel-busy'>");y.css({position:"absolute",width:"98%",height:"97%","text-align":"center"});c.append(y)}function v(n){isBusy=n;y.css("visibility",isBusy?"visible":"hidden")}function wt(){e.onOkClick=function(){return d=!0,et(bt),d};e.onCancelClick=function(){f.okBtnPressed=!1;e.close()}}function bt(n){n==""?e.close():d=!1}function kt(){o.off("change");w.off("click");p.off("click")}var h=t('<div style="height:100%">'),c=t('<div style="height:100%">'),y=null;this.windowNo=n;var f=this,e=null,d=!0,p,o,w,b,k=null,l=null,a,g,s=null;this.okBtnPressed=!1;c.append(h);pt();v(!0);h.load(VIS.Application.contextUrl+"VA005/ProductManagement/Index/?windowNo="+f.windowNo,function(){rt();ut();ft()});this.show=function(){v(!0);e=new VIS.ChildDialog;e.setHeight(550);e.setWidth(600);e.setTitle(VIS.Msg.getMsg("VA005_UpdateProduct"));e.setModal(!0);e.onClose=function(){f.onClose&&f.onClose()};e.show();e.setContent(c);wt()};this.disposeComponent=function(){kt();p=null;o=null;c&&c.remove();c=null;s=null;a=g=null;y=null;this.windowNo=null;f=null;e=null;w=b=null;k=null;l=null;this.okBtnPressed=null}};n.updateProductPanel.prototype.dispose=function(){this.disposeComponent()}}(VA005,jQuery);VA005=window.VA005||{},function(n,t){n.ProductCategoryForm=function(){function er(){br();n.css("width","100%");n.css("height","100%");n.css("position","relative");n.load(VIS.Application.contextUrl+"VA005/ProductCategory/Index?windowno="+r.windowNo,function(){or()})}function or(){n.find(".VA005-report-tittle").text(VIS.Msg.getElement(VIS.Env.getCtx(),"M_Product_Category_ID"));n.find(".VA005-form-top-fields h4").text(VIS.Msg.getElement(VIS.Env.getCtx(),"M_Product_Category_ID"));n.find("#VA005_Value_"+r.windowNo).text(VIS.Msg.getElement(VIS.Env.getCtx(),"Value"));n.find("#VA005_ProductType_"+r.windowNo).text(VIS.Msg.getElement(VIS.Env.getCtx(),"ProductType")).append("<sup class='.VA005-sup'>*<\/sup>");n.find("#VA005_Attribute_"+r.windowNo).text(VIS.Msg.getElement(VIS.Env.getCtx(),"M_AttributeSet_ID"));n.find("#VA005_MatPol_"+r.windowNo).text(VIS.Msg.getElement(VIS.Env.getCtx(),"MMPolicy"));n.find("#VA005_TaxCat_"+r.windowNo).text(VIS.Msg.getElement(VIS.Env.getCtx(),"C_TaxCategory_ID"));n.find("#VA005_AstGrp_"+r.windowNo).text(VIS.Msg.getElement(VIS.Env.getCtx(),"A_Asset_Group_ID"));n.find(".VA005-effect-on").text(VIS.Msg.getMsg("VA005_multiOn"));n.find(".VA005-effect-off").text(VIS.Msg.getMsg("VA005_multiOff"));n.find("#btnZoomWindow_"+r.windowNo).attr("title",VIS.Msg.getMsg("VA005_Zoom"));n.find("#btnRefresh_"+r.windowNo).attr("title",VIS.Msg.getMsg("VA005_Refresh"));at=n.find("#VA005_zoomWindow_"+r.windowNo);dt=n.find("#divLeft_"+r.windowNo);ut=n.find("#divRight_"+r.windowNo);i=n.find("#VA005_ProductCategory_"+r.windowNo);kt=n.find("#VA005_AddCategory_"+r.windowNo);f=n.find("#btnSave_"+r.windowNo);ct=n.find("#btnClose_"+r.windowNo);lt=n.find("#btnDelete_"+r.windowNo);g=n.find("#btnMultiple_"+r.windowNo);e=n.find("#btnUndo_"+r.windowNo);ti=n.find("#btnZoom_"+r.windowNo);vt=n.find("#btnAttributeSet_"+r.windowNo);yt=n.find("#btnTaxCategory_"+r.windowNo);pt=n.find("#btnAssetGroup_"+r.windowNo);a=n.find("#txtName_"+r.windowNo);nt=n.find("#txtValue_"+r.windowNo);tt=n.find("#txtDesc_"+r.windowNo);w=n.find("#cmbProductType_"+r.windowNo);it=n.find("#cmbMatPolicy_"+r.windowNo);b=n.find("#cmbAttributeSet_"+r.windowNo);k=n.find("#cmbTaxCategory_"+r.windowNo);d=n.find("#cmbAssetGroup_"+r.windowNo);v=n.find("#IsConsumable_"+r.windowNo);wt=n.find("#lblConsumable_"+r.windowNo);wt.text(VIS.Msg.getElement(VIS.Env.getCtx(),"DTD001_IsConsumable"));et=n.find("#fileUpload_"+r.windowNo);rt=n.find("#imgUsrImage_"+r.windowNo);ki=n.find("#lblfileUpload_"+r.windowNo);ot=n.find("#chkMultiple_"+r.windowNo);bt++;li()&&w.val()=="I"||(v.css({display:"none"}),wt.css({display:"none"}));tr(bt,vi);di();yi();pi();sr();hr();i.find("li:eq(1)").addClass("VA005-highlighted");ft(i.find("li:eq(1)").attr("procatid"));e.attr("disabled","disabled").css("opacity",.6);f.attr("disabled","disabled").css("opacity",.6);ti.attr("title",VIS.Msg.getMsg("VA005_Zoom"));vr();s[0].style.visibility="hidden"}function cr(n){for(b.append(" <option value = 0><\/option>");n.read();)key=VIS.Utility.Util.getValueOfInt(n.getString(0)),value=VIS.Utility.encodeText(n.getString(1)),b.append(" <option value="+key+">"+value+"<\/option>");n.close()}function lr(n){for(k.append(" <option value = 0><\/option>");n.read();)key=VIS.Utility.Util.getValueOfInt(n.getString(0)),value=VIS.Utility.encodeText(n.getString(1)),k.append(" <option value="+key+">"+value+"<\/option>");n.close()}function ar(n){for(d.append(" <option value = 0><\/option>");n.read();)key=VIS.Utility.Util.getValueOfInt(n.getString(0)),value=VIS.Utility.encodeText(n.getString(1)),d.append(" <option value="+key+">"+value+"<\/option>");n.close()}function pr(n){while(n.read()){if(ht=n.getString("Name"),ri=n.getString("Value"),ui=n.getInt("M_AttributeSet_ID"),fi=n.getString("ProductType"),ei=n.getString("Description"),oi=n.getString("MMPolicy"),si=n.getInt("C_TaxCategory_ID"),hi=n.getInt("A_Asset_Group_ID"),li()&&(ci=n.getString("DTD001_IsConsumable")),o=n.getString("ImageUrl"),st=n.getInt("AD_Image_ID"),a.val(ht),nt.val(ri),tt.val(ei),b.val(ui),w.val(fi),it.val(oi),k.val(si),d.val(hi),ci=="Y"?v.prop("checked",!0):v.prop("checked",!1),o!=""){o=o.substring(o.lastIndexOf("/")+1,o.length);var t=new Date;rt.removeAttr("src").attr("src",VIS.Application.contextUrl+"Images/Thumb140x120/"+o+"?"+t.getTime())}else rt.removeAttr("src").attr("src",VIS.Application.contextUrl+"Areas/VA005/Images/img-defult.png");e.attr("disabled","disabled").css("opacity",.6);f.attr("disabled","disabled").css("opacity",.6)}n.close();c=[];c.push(u);s[0].style.visibility="hidden"}function wr(n){while(n.read())if(y=VIS.Utility.encodeText(n.getString(0)),u=n.getInt(1),o=n.getString(2),o!=""){o=o.substring(o.lastIndexOf("/")+1,o.length);var t=new Date;i.append("<li class='VA005-pro-cat' procatID="+u+"><div procatID="+u+" class='VA005-cat-img'><img procatID="+u+" style='height: 100%;width: 100%;' src='"+VIS.Application.contextUrl+"Images/Thumb140x120/"+o+"?"+t.getTime()+"'> <\/div> <div class='VA005-cat-caption'> <p procatID="+u+" > "+y+" <\/p> <p style='display:none;width:100%;height:100%;'><input procatID="+u+" type='text' value='"+y+"'><\/p><\/div><\/li>")}else i.append("<li class='VA005-pro-cat' procatID="+u+"><div procatID="+u+" class='VA005-cat-img'><img procatID="+u+" style='height: 100%;width: 100%;' src=''> <\/div> <div class='VA005-cat-caption'> <p procatID="+u+"> "+y+" <\/p> <p style='display:none;width:100%;height:100%;'><input procatID="+u+" type='text' value='"+y+"'><\/p><\/div><\/li>");n.close()}function br(){s=t("<div class='vis-apanel-busy'>");s.css({position:"absolute",width:"98%",height:"97%","text-align":"center"});s[0].style.visibility="visible";n.append(s)}var yi,pi;this.frame;this.windowNo;var r=this,n=t("<div class='vis-forms-container'>"),i=null,kt=null,s=null,dt=null,ut=null,y="",u=0,p=0,gt=0,ni="",o=null,ir=null,ai=0,ht="",h=null,f=null,ct=null,lt=null,g=null,vt=null,yt=null,pt=null,e=null,ti=null,a=null,nt=null,tt=null,w=null,it=null,b=null,k=null,d=null,rr=null,ur=null,v=null,wt=null,et=null,rt=null,ki=null,fr=null,ot=null,ii=!1,st=0,bt=0,vi=50,c=[],ri="",ui=0,fi="",ei="",oi="",si=0,hi=0,ci="",at=null,l={Attribute:"N",Tax:"N",Asset:"N"};var sr=function(){w.append('<option value="E">'+VIS.Msg.getMsg("VA005_Expense")+'<\/option><option selected="selected" value="I">'+VIS.Msg.getMsg("VA005_Item")+'<\/option><option value="R">'+VIS.Msg.getMsg("VA005_Resource")+'<\/option><option value="S">'+VIS.Msg.getMsg("VA005_Service")+"<\/option>")},hr=function(){it.append('<option value="F">'+VIS.Msg.getMsg("VA005_Fifo")+'<\/option><option selected="selected" value="L">'+VIS.Msg.getMsg("VA005_Lifo")+"<\/option>")},di=function(){b.empty();var n="SELECT M_AttributeSet_ID,Name FROM M_AttributeSet WHERE IsActive = 'Y' AND AD_Client_ID = "+VIS.context.getAD_Client_ID();VIS.DB.executeReader(n.toString(),null,cr)};yi=function(){k.empty();var n="SELECT C_TaxCategory_ID,Name FROM C_TaxCategory WHERE IsActive = 'Y' AND AD_Client_ID = "+VIS.context.getAD_Client_ID();VIS.DB.executeReader(n.toString(),null,lr)};pi=function(){d.empty();var n="SELECT A_Asset_Group_ID,Name FROM A_Asset_Group WHERE IsActive = 'Y' AND AD_Client_ID = "+VIS.context.getAD_Client_ID();VIS.DB.executeReader(n.toString(),null,ar)};var vr=function(){function n(n,t){var r={to:i.find("li:eq(1)"),className:"wsp-ui-effects-transfer"};n.effect("transfer",r,600,t)}if(w.change(function(){w.val()=="I"&&li()?(v.css({display:"block"}),wt.css({display:"block"})):(v.css({display:"none"}),wt.css({display:"none"}),v.prop("checked",!1));e.removeAttr("disabled").css("opacity",1);f.removeAttr("disabled").css("opacity",1)}),et!=null)et.on("change",function(){rt.show();var t=et[0].files[0],n=new FileReader;return n.onload=function(n){rt.removeAttr("src").attr("src",n.target.result)},n.readAsDataURL(t),ii=!0,e.removeAttr("disabled").css("opacity",1),f.removeAttr("disabled").css("opacity",1),n=null,t=null,!1});a.change(function(){e.removeAttr("disabled").css("opacity",1);f.removeAttr("disabled").css("opacity",1)});tt.change(function(){e.removeAttr("disabled").css("opacity",1);f.removeAttr("disabled").css("opacity",1)});nt.change(function(){e.removeAttr("disabled").css("opacity",1);f.removeAttr("disabled").css("opacity",1)});a.on("keydown",function(){e.removeAttr("disabled").css("opacity",1);f.removeAttr("disabled").css("opacity",1)});tt.on("keydown",function(){e.removeAttr("disabled").css("opacity",1);f.removeAttr("disabled").css("opacity",1)});nt.on("keydown",function(){e.removeAttr("disabled").css("opacity",1);f.removeAttr("disabled").css("opacity",1)});if(b.change(function(){e.removeAttr("disabled").css("opacity",1);f.removeAttr("disabled").css("opacity",1)}),d.change(function(){e.removeAttr("disabled").css("opacity",1);f.removeAttr("disabled").css("opacity",1)}),it.change(function(){e.removeAttr("disabled").css("opacity",1);f.removeAttr("disabled").css("opacity",1)}),k.change(function(){e.removeAttr("disabled").css("opacity",1);f.removeAttr("disabled").css("opacity",1)}),v.change(function(){e.removeAttr("disabled").css("opacity",1);f.removeAttr("disabled").css("opacity",1)}),i!=null){i.on("click","li",function(){h=t(this);h.is(":first-child")?(yr(),n(h)):(u=h.find("input").attr("procatID"),p=h.find("p").attr("procatID"),ni=h.find("p[procatid='"+p+"']").text(),ot.prop("checked")?i.find("li[procatid='"+p+"']").hasClass("VA005-highlighted")?(i.find("li[procatid='"+p+"']").removeClass("VA005-highlighted"),c.splice(c.indexOf(p),1)):(i.find("li[procatid='"+p+"']").addClass("VA005-highlighted"),c.push(p)):(gt!=u&&(gt=u,ft(u)),i.find("li[procatid='"+p+"']").hasClass("VA005-highlighted")&&bi(!0,h),i.find("li").removeClass("VA005-highlighted"),i.find("li[procatid='"+p+"']").addClass("VA005-highlighted"),c=[],VIS.Utility.Util.getValueOfInt(p)>0&&c.push(p)))});i.on("keydown","input",function(n){(n.keyCode==13||n.keyCode==9)&&(h!=null&&(bi(!1,h),y=n.target.value,u=t(n.target).attr("procatID"),ni!=y&&(gi(u,y,h),ft(u))),h=null)});i.on("focusout","input",function(){h!=null&&(bi(!1,h),y=event.target.value,u=t(event.target).attr("procatID"),ni!=y&&(gi(u,y,h),ft(u)));h=null});i.on("scroll",function(){t(this).scrollTop()+t(this).innerHeight()>=this.scrollHeight&&(bt++,tr(bt,vi))})}if(f!=null)f.on("click",function(){if(VIS.Utility.Util.getValueOfString(w.val())==""){VIS.ADialog.error("VA005_ProductType");return}if(s[0].style.visibility="visible",ii){var r=new XMLHttpRequest,n=new FormData;n.append("file",et[0].files[0]);n.append("isDatabaseSave",!1);n.append("ad_image_id",st);r.open("POST",VIS.Application.contextUrl+"ProductCategory/SaveImage",!0);r.send(n);r.addEventListener("load",function(n){var r=n.target.response;r=JSON.parse(r);st=r.result;t.ajax({type:"POST",url:VIS.Application.contextUrl+"ProductCategory/Update1",dataType:"json",data:{id:u,Name:a.val(),Value:nt.val(),ProductType:w.val(),MatPolicy:it.val(),Desc:tt.val(),attrSet:VIS.Utility.Util.getValueOfInt(b.val()),taxcat:VIS.Utility.Util.getValueOfInt(k.val()),assetGrp:VIS.Utility.Util.getValueOfInt(d.val()),consumable:v.prop("checked"),imageId:st},success:function(n){var e=n.result,r,t,f;if(e&&(ii=!1,i!=null)){var o=i.find("input[procatid='"+u+"']"),h=i.find("p[procatid='"+u+"']"),c=i.find("img[procatid='"+u+"']");o.attr("value",a.val());h.text(a.val());r="SELECT ImageUrl FROM AD_Image WHERE AD_Image_ID = "+st;t=VIS.Utility.Util.getValueOfString(VIS.DB.executeScalar(r.toString()));t!=""&&(t=t.substring(t.lastIndexOf("/")+1,t.length),f=new Date,c.removeAttr("src").attr("src",VIS.Application.contextUrl+"Images/Thumb140x120/"+t+"?"+f.getTime()))}s[0].style.visibility="hidden"},error:function(n,t){console.log(t);s[0].style.visibility="hidden";alert("RecordNotSaved");return}})},!0)}else t.ajax({type:"POST",url:VIS.Application.contextUrl+"ProductCategory/Update1",dataType:"json",contentType:"application/json; charset=utf-8",data:JSON.stringify({id:u,Name:a.val(),Value:nt.val(),ProductType:w.val(),MatPolicy:it.val(),Desc:tt.val(),attrSet:VIS.Utility.Util.getValueOfInt(b.val()),taxcat:VIS.Utility.Util.getValueOfInt(k.val()),assetGrp:VIS.Utility.Util.getValueOfInt(d.val()),consumable:v.prop("checked"),imageId:st}),success:function(n){var f=n.result,t,r;f&&i!=null&&(t=i.find("input[procatid='"+u+"']"),r=i.find("p[procatid='"+u+"']"),t.attr("value",a.val()),r.text(a.val()));s[0].style.visibility="hidden"},error:function(n,t){console.log(t);s[0].style.visibility="hidden";alert("RecordNotSaved");return}});e.attr("disabled","disabled").css("opacity",.6);f.attr("disabled","disabled").css("opacity",.6)});if(lt!=null)lt.on("click",function(){var n,t,r,u;if(c.length>0&&VIS.ADialog.confirm("DeleteRecord?")){s[0].style.visibility="visible";for(n in c)t="DELETE FROM M_Product_Category WHERE M_Product_Category_ID = "+c[n],r=VIS.DB.executeQuery(t.toString(),null,null),r<=0?VIS.ADialog.error("VA005_ProductCategory"):(u=i.find("li[procatid='"+c[n]+"']"),u.remove(),nr());c=[];i.find("li").removeClass("VA005-highlighted");i.find("li:eq(1)").addClass("VA005-highlighted");ft(i.find("li:eq(1)").attr("procatid"))}s[0].style.visibility="hidden"});if(g!=null)g.on("click",function(){g.hasClass("VA005-btn-Multiple-on")?(g.removeClass("VA005-btn-Multiple-on"),g.addClass("VA005-btn-Multiple"),c=[],ot.prop("checked",!1),i.find("li:eq(0)").show(),f.show(),e.show(),dt.animate({width:"61%"},500),ut.animate({width:"39%"},500),i.find("li").removeClass("VA005-highlighted"),t(".VA005-effect-off").fadeIn(),t(".VA005-effect-off").fadeOut(2e3),i.find("li:eq(1)").addClass("VA005-highlighted"),ft(i.find("li:eq(1)").attr("procatid"))):(g.removeClass("VA005-btn-Multiple"),g.addClass("VA005-btn-Multiple-on"),ot.prop("checked",!0),nr(),gt=0,i.find("li:eq(0)").hide(),f.hide(),e.hide(),dt.animate({width:"100%"},500),ut.animate({width:"0%"},500),t(".VA005-effect-on").fadeIn(),t(".VA005-effect-on").fadeOut(2e3))});if(e!=null)e.on("click",function(){if(ft(i.find("li:eq(1)").attr("procatid")),s[0].style.visibility="visible",a.val(ht),nt.val(ri),tt.val(ei),b.val(ui),w.val(fi),it.val(oi),k.val(si),d.val(hi),ci=="Y"?v.prop("checked",!0):v.prop("checked",!1),o!=""){o=o.substring(o.lastIndexOf("/")+1,o.length);var n=new Date;rt.removeAttr("src").attr("src",VIS.Application.contextUrl+"Images/Thumb140x120/"+o+"?"+n.getTime())}else rt.removeAttr("src").attr("src",VIS.Application.contextUrl+"Areas/VA005/Images/img-defult.png");et.val("");e.attr("disabled","disabled").css("opacity",.6);f.attr("disabled","disabled").css("opacity",.6);s[0].style.visibility="hidden"});if(vt!=null)vt.on("click",function(n){l.Attribute="Y";l.Asset="N";l.Tax="N";vt.w2overlay(at.clone(!0));n.stopPropagation()});if(yt!=null)yt.on("click",function(n){l.Attribute="N";l.Asset="N";l.Tax="Y";yt.w2overlay(at.clone(!0));n.stopPropagation()});if(pt!=null)pt.on("click",function(n){l.Attribute="N";l.Asset="Y";l.Tax="N";pt.w2overlay(at.clone(!0));n.stopPropagation()});if(ti!=null)ti.on("click",function(){var r,n,t,i;r="select ad_window_id from ad_window where name = 'Product Category'";n=0;try{t=VIS.DB.executeDataReader(r);t.read()&&(n=t.getInt(0));t.dispose();n>0&&(i=new VIS.Query,i.addRestriction("M_Product_Category_ID",VIS.Query.prototype.EQUAL,VIS.Utility.Util.getValueOfInt(u)),i.setRecordCount(1),VIS.viewManager.startWindow(n,i))}catch(f){console.log(f)}});if(ct!=null)ct.on("click",function(){r.dispose()});if(at!=null)at.on("click","LI",function(n){var i=t(n.target).data("action");i==VIS.Actions.refresh?l.Attribute=="Y"?di():l.Tax=="Y"?yi():l.Asset=="Y"&&pi():i==VIS.Actions.zoom&&(l.Attribute=="Y"?wi(VIS.Utility.Util.getValueOfInt(b.val()),"Attribute Set"):l.Tax=="Y"?wi(VIS.Utility.Util.getValueOfInt(k.val()),"Tax Category"):l.Asset=="Y"&&wi(VIS.Utility.Util.getValueOfInt(d.val()),"Asset Group"))})},wi=function(n,t){var f,r,u,i;f="select ad_window_id from ad_window where name = '"+t+"'";r=0;try{u=VIS.DB.executeDataReader(f);u.read()&&(r=u.getInt(0));u.dispose();r>0&&(i=new VIS.Query,t=="Attribute Set"?i.addRestriction("M_AttributeSet_ID",VIS.Query.prototype.EQUAL,n):t=="Tax Category"?i.addRestriction("C_TaxCategory_ID",VIS.Query.prototype.EQUAL,n):t=="Asset Group"&&i.addRestriction("A_Asset_Gruoup_ID",VIS.Query.prototype.EQUAL,n),i.setRecordCount(1),VIS.viewManager.startWindow(r,i))}catch(e){console.log(e)}},yr=function(){var n="SELECT Count(*) FROM M_Product_Category WHERE IsActive = 'Y' AND AD_Client_ID = "+VIS.Env.getCtx().getAD_Client_ID();ai=VIS.Utility.Util.getValueOfInt(VIS.DB.executeScalar(n.toString()))+1;ht="Category-"+ai;t.ajax({type:"POST",url:VIS.Application.contextUrl+"ProductCategory/Save",dataType:"json",async:!1,data:{Name:ht},success:function(n){n=jQuery.parseJSON(n);var t=n.Key,r=n.Name;t!=""&&(i!=null&&i.find("li:eq(0)").after("<li class='VA005-pro-cat' procatID="+t+"><div procatID="+t+" class='VA005-cat-img'><img style='height: 100%;width: 100%;' procatID="+t+" src=''> <\/div> <div class='VA005-cat-caption'> <p procatID="+t+" > "+r+" <\/p> <p style='display:none;width:100%;height:100%;'><input procatID="+t+" type='text' value='"+r+"'><\/p><\/div><\/li>"),ot.prop("checked")||(ft(t),i.find("li").removeClass("VA005-highlighted"),i.find("li[procatid='"+t+"']").addClass("VA005-highlighted"),u=t,c=[],c.push(t)))},error:function(n,t){console.log(t);returnValue}})},ft=function(n){if(VIS.Utility.Util.getValueOfInt(n)>0){u=n;s[0].style.visibility="visible";ut.removeClass("VA005-web_dialog_overlay");ut.find("input, textarea, button, select").removeAttr("disabled");var t="";t=li()?"SELECT pc.Name,pc.Value,pc.M_AttributeSet_ID,pc.ProductType,pc.MMPolicy,pc.Description,pc.C_TaxCategory_ID,pc.A_Asset_Group_ID,pc.DTD001_IsConsumable,pc.AD_Image_ID,img.ImageUrl,img.BinaryData FROM M_Product_Category pc LEFT JOIN AD_Image img ON pc.AD_Image_ID = img.AD_Image_ID WHERE pc.M_Product_Category_ID = "+n:"SELECT pc.Name,pc.Value,pc.M_AttributeSet_ID,pc.ProductType,pc.MMPolicy,pc.Description,pc.C_TaxCategory_ID,pc.A_Asset_Group_ID,pc.AD_Image_ID,img.ImageUrl,img.BinaryData FROM M_Product_Category pc LEFT JOIN AD_Image img ON pc.AD_Image_ID = img.AD_Image_ID WHERE pc.M_Product_Category_ID = "+n;VIS.DB.executeReader(t.toString(),null,pr)}};var gi=function(n,r,u){var f=u.find("p").eq(0),e=u.find("input");t.ajax({type:"POST",url:VIS.Application.contextUrl+"ProductCategory/Update",dataType:"json",contentType:"application/json; charset=utf-8",data:JSON.stringify({ID:n,Name:r}),success:function(n){var t=n.result;t&&i!=null&&f.text(r)},error:function(n,t){console.log(t);t}})},bi=function(n,t){var r=t.find("p").eq(0),i=t.find("p").eq(1);n?ot.prop("checked")||(r.css({display:"none"}),i.css({display:"block"}),i.find("input").focus(),i.find("input").select()):(r.css({display:"block"}),i.css({display:"none"}))},li=function(){var n=VIS.Utility.Util.getValueOfInt(VIS.DB.executeScalar("SELECT AD_Column_ID FROM AD_Column WHERE AD_Table_ID = 209 AND ColumnName = 'DTD001_IsConsumable'".toString(),null,null));return n>0?!0:!1},nr=function(){u=0;a.val("");tt.val("");nt.val("");d.val(-1);b.val(-1);it.val("F");w.val("I");k.val(-1);rt.removeAttr("src").attr("src",VIS.Application.contextUrl+"Areas/VA005/Images/Img-defult.png");ut.addClass("VA005-web_dialog_overlay");ut.find("input, textarea, button, select").attr("disabled","disabled")},tr=function(n,t){var i="SELECT pc.Name,pc.M_Product_Category_ID,img.ImageUrl,img.BinaryData FROM M_Product_Category pc LEFT JOIN AD_Image img ON pc.AD_Image_ID = img.AD_Image_ID WHERE pc.IsActive='Y' AND pc.AD_Client_ID = "+VIS.Env.getCtx().getAD_Client_ID();VIS.DB.executeDataReaderPaging(i.toString(),n,t,null,wr)};this.Initialize=function(){er()};this.getRoot=function(){return n};this.disposeComponent=function(){r=null;n&&n.remove();n=null;f&&f.off("click");ct&&ct.off("click");lt&&lt.off("click");g&&g.off("click");kt&&kt.off("click");i&&(i.off("click"),i.remove());$busyDiv=null;dt=null;ut=null;ot=null;a=null;i=null;kt=null;s=null;y="";u=0;p=0;gt=0;ni="";o=null;ir=null;ai=0;ht="";h=null;f=null;lt=null;ct=null;g=null;e=null;vt=null;yt=null;pt=null;a=null;nt=null;tt=null;w=null;it=null;b=null;k=null;d=null;rr=null;ur=null;v=null;et=null;rt=null;ki=null;fr=null;ii=!1;st=0;bt=0;vi=0;ri="";ui=0;fi="";ei="";oi="";si=0;hi=0;ci="";this.getRoot=null;this.disposeComponent=null}};n.ProductCategoryForm.prototype.init=function(n,t){this.frame=t;this.windowNo=n;var i=this.Initialize();this.frame.getContentGrid().append(this.getRoot());this.frame.hideHeader(!0)};n.ProductCategoryForm.prototype.dispose=function(){this.disposeComponent();this.frame&&this.frame.dispose();this.frame=null}}(VA005,jQuery);VA005=window.VA005||{},function(n,t){function i(n,i,r,u,f,e,o,s,h,c,l){function ti(n){var r=n,i;l[0].style.visibility="visible";i={attributeID:n};t.ajax({url:VIS.Application.contextUrl+"Attribute/DeleteAttributeValue",type:"Post",async:!1,datatype:"Json",cache:!1,data:i,success:function(i){var u,f,e,o;i=JSON.parse(i);u=i;u==""?(g.data("kendoGrid").dataSource.remove(g.data("kendoGrid").select().closest("tr")),f=-1,t.grep(rt,function(t,i){t.attributevalueid==n&&(f=i)}),rt.splice(f,1),e="SELECT COUNT(*) FROM M_AttributeValue WHERE M_Attribute_ID="+w,SQL=VIS.MRole.addAccessSQL(e,"M_AttributeValue",!0,!0),o=VIS.DB.executeScalar(e),c.removeatttvaluewithgrid(r,w,o),g.data("kendoGrid").dataSource.read(),tt.attributevallueonattributeclick(w)):(VIS.ADialog.error(u),l[0].style.visibility="hidden")},error:function(n){alert(n);l[0].style.visibility="hidden"}});l[0].style.visibility="hidden"}function st(){l[0].style.visibility="visible";dt={attributevalueid:w};var n=/ipad|iphone|ipod/i.test(navigator.userAgent.toLowerCase()),i=250;n&&(i=210);t.ajax({url:VIS.Application.contextUrl+"Attribute/ShowGrideData",dataType:"json",type:"POST",async:!0,data:dt,success:function(r){var f,e,u,s,o;for(l[0].style.visibility="visible",f={},e=r.result,rt=[],u=0;u<e.length;u++)f={},f.name=e[u].name,f.searchkey=e[u].searchkey,f.attributevalueid=e[u].attributevalueid,rt.push(f),ii=e[u].attributevalueid;s=!1;o=new kendo.data.DataSource({batch:!0,pageSize:10,schema:{model:{id:"attributevalueid",fields:{attributevalueid:{editable:!1,nullable:!1},name:{validation:{required:!0}},searchkey:{}}}},transport:{read:function(n){l[0].style.visibility="visible";n.success(rt);l[0].style.visibility="hidden"},update:function(n){var i="update m_attributevalue set name='"+n.data.models[0].name+"',value='"+n.data.models[0].searchkey+"' where m_attributevalue_id="+n.data.models[0].attributevalueid,r;VIS.DB.executeDataSet(i,null);r=t.grep(rt,function(t){return t.attributevalueid==n.data.models[0].attributevalueid&&(t.name=n.data.models[0].name,t.searchkey=n.data.models[0].searchkey!=null?n.data.models[0].searchkey:n.data.models[0].name),""});g.data("kendoGrid").dataSource.read();tt.attributevallueonattributeclick(w);tt.updateatttvalueintree(n.data.models[0].attributevalueid,n.data.models[0].name)},create:function(n){l[0].style.visibility="visible";var i={searchkey:VIS.Utility.encodeText(n.data.models[0].searchkey),secname:VIS.Utility.encodeText(n.data.models[0].name),attributeID:w};t.ajax({url:VIS.Application.contextUrl+"Attribute/SelectionSavemodel",type:"Post",async:!1,datatype:"Json",cache:!1,data:i,success:function(t){$getidfromattributeset=JSON.parse(t);var i={searchkey:n.data.models[0].searchkey,name:n.data.models[0].name,attributevalueid:$getidfromattributeset};rt.push(i);tt.addatttvaluewithgrid(w,n.data.models[0].name,$getidfromattributeset);st();v.cmboonclick();tt.attributevallueonattributeclick(w)},error:function(){l[0].style.visibility="hidden"}});g.data("kendoGrid").dataSource.read();tt.attributevallueonattributeclick(w);l[0].style.visibility="hidden"},parameterMap:function(n,t){return l[0].style.visibility="visible",t!=="read"&&n.models?{models:kendo.stringify(n.models)}:void 0}}});g&&(g.data("kendoGrid").destroy(),g=null,a.empty());g=a.kendoGrid({dataSource:o,change:si,pageable:!0,resizable:!0,scrollable:!0,selectable:" ",edit:function(n){n.container.find("input[name=name]").attr("maxlength",28)},dataBound:function(){a.find(".k-grid-edit").addClass("VA005-gridallbtn");a.find(".k-grid-delete").addClass("VA005-gridallbtn");a.find(".k-grid-cancel").addClass("VA005-gridallbtn");a.find(".k-grid-update").addClass("VA005-gridallbtn");a.find(".k-grid-header-wrap").css("position","inherit");a.find(".k-grid-pager").css("position","inherit");n?(a.find(".k-pager-numbers").css({position:"inherit",float:"left","margin-top":"2px"}),a.find(".k-pager-nav").css({position:"inherit",float:"left","margin-top":"2px"}),t(a.find(".k-pager-numbers").siblings()[2]).css({"margin-left":"1px","margin-top":"2px"}),a.find(".k-grid-content").css({height:"100px"}),a.find(".k-pager-nav").css({width:"1px"}),a.find(".k-pager-info").css({"font-size":"11px",padding:"0px"}),a.find(".k-pager-nav").css({width:"1px"}),a.find(".k-label").css({"font-size":"10px",padding:"0px","margin-top":"4px"})):(a.find(".k-pager-numbers").css({position:"inherit"}),a.find(".k-pager-wrap").css("position","inherit"));a.find(".k-widget").css("position","inherit");a.find(".k-pager-nav").css("position","inherit");a.find(".k-grid-content").css("position","inherit");a.find(".k-grid-add").on("click",function(){window.setTimeout(function(){a.find(".k-grid-cancel").addClass("VA005-gridallbtn");a.find(".k-grid-update").addClass("VA005-gridallbtn")},1)});a.find("div").find(".deltemp").on("click",function(){ft=t(t(t(this.parentElement).siblings()).get(2)).html();var n=""+VIS.Msg.getMsg("VA005_DeleteIt")+"",i=VIS.ADialog.ask(n);if(i==!0)ti(ft);else return})},height:i,toolbar:["create"],columns:[{field:"name",title:VIS.Msg.getMsg("Name"),format:"{0:c}"},{field:"searchkey",title:VIS.Msg.getMsg("Value")},{field:"attributevalueid",hidden:!0,title:VIS.Msg.getMsg("attributevalueid")},{command:[{name:"edit",text:{edit:" ",cancel:" ",update:" "},click:function(){a.find(".k-grid-update").css({"min-width":"10px",width:"27px",height:"27px"});a.find(".k-grid-cancel").css({"min-width":"10px",width:"27px",height:"27px"});a.find(".k-grid-cancel").on("click",function(){window.setTimeout(function(){a.find(".k-grid-edit").css({"min-width":"10px",width:"27px",height:"27px"});a.find(".k-grid-delete").css({"min-width":"10px",width:"27px",height:"27px"});a.find("div").find(".deltemp").on("click",function(){ft=t(t(t(this.parentElement).siblings()).get(2)).html();var n=""+VIS.Msg.getMsg("VA005_DeleteIt")+"",i=VIS.ADialog.ask(n);if(i==!0)ti(ft);else return})},1)})}},{name:"Delete",text:" ",template:"<div  class='deltemp' style='float:right'><a  class='VA005-gridallbtn k-button k-button-icontext'><span  class='k-icon k-delete'><\/span><\/a><\/div>"}],title:"&nbsp;",width:85}],editable:"inline"});l[0].style.visibility="hidden"}});l[0].style.visibility="hidden"}function si(){ft=t(g.data("kendoGrid").select().closest("tr").find("td").get(2)).html()}function hi(){st()}function ci(){var i="select ad_table_id from ad_table where tablename='M_Attribute'",f="SELECT fieldlength, columnname FROM ad_column WHERE ad_table_id=("+i+") AND COLUMNNAME='Name' AND isActive ='Y'",e=VIS.DB.executeDataSet(f.toString(),null),r,t,n;ri=VIS.Utility.Util.getValueOfInt(e.tables[0].rows[0].cells.fieldlength);r="SELECT fieldlength FROM ad_column WHERE ad_table_id=("+i+") AND COLUMNNAME='Description' AND isActive ='Y'";n=VIS.DB.executeDataSet(r.toString(),null);bt=VIS.Utility.Util.getValueOfInt(n.tables[0].rows[0].cells.fieldlength);nt.attr("maxlength",bt);var u="select ad_table_id from ad_table where tablename='M_AttributeValue'",t="SELECT fieldlength FROM ad_column WHERE ad_table_id=("+u+") AND  COLUMNNAME  ='Name' AND isActive ='Y'",n=VIS.DB.executeDataSet(t.toString(),null);wt=VIS.Utility.Util.getValueOfInt(n.tables[0].rows[0].cells.fieldlength);k.attr("maxlength",wt);t="SELECT fieldlength FROM ad_column WHERE ad_table_id=("+u+") AND  COLUMNNAME  ='Value' AND isActive ='Y'";n=VIS.DB.executeDataSet(t.toString(),null);kt=VIS.Utility.Util.getValueOfInt(n.tables[0].rows[0].cells.fieldlength);k.attr("maxlength",kt)}function li(){it.on("click",function(){v.$getvalueonchange=!0});b.on("click",function(){v.$getvalueonchange=!0;v.$activechkbox=b.is(":checked")?!0:!1});p.on("change",function(){p.val()=="L"?(st(),a.show(),lt.hide()):(a.hide(),lt.show(),s.empty());v.$getvalueonchange=!0;v.$activechkbox=!0;v.$activechkbox=b.is(":checked")?!0:!1;v.$cmbovaluecheck=p.val()});ct.on("click",function(){k.val().trim().length>0&&vi()});y.on("change",function(){v.$getvalueonchange=!0;v.$activechkbox=b.is(":checked")?!0:!1;y.val().trim().length<=0?y.css("background-color","pink"):y.css("background-color","white")});nt.on("change",function(){v.$getvalueonchange=!0;v.$activechkbox=b.is(":checked")?!0:!1});y.on("keydown",function(){v.$getvalueonchange=!0;v.$activechkbox=b.is(":checked")?!0:!1});nt.on("keydown",function(){v.$getvalueonchange=!0;v.$activechkbox=b.is(":checked")?!0:!1});k.on("change",function(){k.val().trim().length<=0?k.css("background-color","pink"):k.css("background-color","white")});fi.on("click",function(){if(k.val().trim().length>0&&y.val().trim().length>0)at(),ot.val(""),k.val(""),i();else return VIS.ADialog.info("VA005_NameMandatory"),!1;et.css("display","inherit");o=1});ei.on("click",function(){ot.val("");k.val("");r.animate({width:"0%"});r.css("display","none");ut.animate({width:"50%"});u.animate({width:"50%"});i();et.animate({width:"50%"});o=1});gt.on("click",function(){if(v.$getvalueonchange==!0){if(y.val().trim().length>0)window.setTimeout(function(){c.updateSelectedAttribute(y.val());b.is(":checked")?c.updatetextcolor(y.val(),!0):c.updatetextcolor(y.val(),!1);at();c.$idgetforattribute&&i();v.$getvalueonchange=!1;v.$activechkbox=!1;ht();t(".VA005-attributedivstatic").parent().attr("VA005_plusimg","N")},200);else return VIS.ADialog.info("VA005_FieldMandatory"),!1;p.val()!="L"?s.empty():tt.attributevallueonattributeclick(w);ht&&ht();ut.css("display","none");et.css("display","inherit")}});ni.on("click",function(){l[0].style.visibility="visible";ut.css("display","none");et.css("display","inherit");r.animate({width:"0%"});r.css("display","none");et.animate({width:"50%"});u.animate({width:"50%"});ut.animate({width:"50%"});t(".VA005-attributedivstatic").parent().attr("VA005_plusimg","N");v.$getvalueonchange=!1;l[0].style.visibility="hidden"})}function ai(){d.append(t("<div>").append(ui));d.append(t("<div>").append('<label style="margin-bottom:0">'+VIS.Msg.getMsg("Name")+"<\/label>")).append(t("<div>").append(y));d.append(t("<div>").append('<label style="margin-bottom:0">'+VIS.Msg.getMsg("Description")+"<\/label>")).append(t("<div>").append(nt));d.append(t("<div>").append('<label style="margin-bottom:0">'+VIS.Msg.getMsg("VA005_AttributeType")+"<\/label>")).append(t('<div style="float:left;width:100%;">').append(p));d.append(t('<div style="width:100%;float:left">').append(it).append('<label style="margin-right:3%">'+VIS.Msg.getMsg("VA005_Mandatory")+"<\/label>").append(b).append('<label style="margin-bottom:0">'+VIS.Msg.getMsg("VA005_Active")+"<\/label>"));d.append(a);d.append(t('<div style="float: right;">').append(gt).append(ni));ut.append(d);pt.append(d);y.focus()}function at(){l[0].style.visibility="visible";vt=it.is(":checked")?!0:!1;yt=b.is(":checked")?!0:!1;var n={name:VIS.Utility.encodeText(y.val().toString().trim()),description:VIS.Utility.encodeText(nt.val().toString().trim()),attributetype:p.val(),mandatory:vt,isactivefield:yt,istanceattribute:!0,ID:w};t.ajax({url:VIS.Application.contextUrl+"Attribute/SaveAttributemodel",type:"Post",datatype:"Json",data:n,success:function(n){tt.isSaveOnItemFocus||(w=JSON.parse(n))},error:function(n){console.log(n);l[0].style.visibility="hidden"}});v.$textnametextvalue=y.val();l[0].style.visibility="hidden"}function vi(){var n={searchkey:VIS.Utility.encodeText(ot.val().toString().trim()),secname:VIS.Utility.encodeText(k.val().toString().trim()),attributeID:w};t.ajax({url:VIS.Application.contextUrl+"Attribute/SelectionSavemodel",type:"Post",async:!1,datatype:"Json",cache:!1,data:n,success:function(){},error:function(){}})}function yi(){var r,n,u,i;if(p.empty(),r="SELECT a.name,a.value FROM ad_ref_list a INNER JOIN ad_reference b ON a.ad_reference_id=b.ad_reference_id where b.name='M_Attribute Value Type' and a.isactive='Y'",n=VIS.DB.executeReader(r.toString(),null),n!=null){for(i=null;n.read();)i=n.getString(0),u=n.getString(1),p.append(t("<Option value="+u+">"+i+"<\/option>"));n.close()}}function pi(){p.off("change");ct.off("click");y.off("change");k.off("change");d.remove();y.remove();nt.remove();p.remove();ot.remove();k.remove();ct.remove()}var rt,ii,ft;this.windowNo;this.frame;var h=h,et=n,u=u,s=s,f=f,e=e,o=o,r=r,ut=t("<div class='VA005-left-wrap-div-openattributre vis-forms-container' >"),pt=t("<div>"),v=this,ri=null,wt=null,bt=null,kt=null,ht=null,w=0,dt={},g=null,tt=c,vt=!1,yt=!0;this.$cmbovaluecheck=null;var ui=t('<div class="VA005-att-tree-vieww"><h4 style="float:left;color:#1aa0ed">'+VIS.Msg.getMsg("VA005_EditAttribute")+"<\/h4><\/div>"),d=t('<div style="height:100%">'),y=t('<input class="VA005-text-color-att-text" style="background-color:white;margin-bottom:6px" type="text" maxlength="20" >'),nt=t('<input style="margin-bottom:6px" class="VA005-text-color-att-text"  type="text">'),p=t('<select class="VA005-cmb-select">'),it=t('<input type="checkbox" style="margin:0 1% 0 0;" >'),b=t('<input type="checkbox" style="margin-right:1%" checked>'),ot=t('<input  class="VA005-text-color-att-text" type="text">'),k=t('<input   class="VA005-text-color-att-text" style="background-color:pink" type="text">'),ct=t('<input type="button" value="Save">'),gt=t('<input style="position:inherit;padding: 5.5px 14px !important;" type="button" class="ui-button ui-widget ui-state-default ui-corner-all ui-button-text-only" value="'+VIS.Msg.getMsg("Ok")+'" >'),ni=t('<input style="position:inherit;padding: 5.5px 14px !important;" type="button"  class="ui-button ui-widget ui-state-default ui-corner-all ui-button-text-only" value="'+VIS.Msg.getMsg("Cancel")+' ">'),fi=t('<input style="padding: 5.5px 14px !important;" type="button" class="ui-button ui-widget ui-state-default ui-corner-all ui-button-text-only" value="OK" >'),ei=t('<input style="padding: 5.5px 14px !important;" type="button"  class="ui-button ui-widget ui-state-default ui-corner-all ui-button-text-only" value="Cancel">'),wi=t('<h4 style="color:#1aa0ed">'+VIS.Msg.getMsg("VA005_AddAttributeValue")+"<\/h4>"),a=t('<div  style="position:inherit;float:left;height:50px;width:100%;margin-top:10px;">'),lt=t('<div style="display:none;background-color:white;opacity:0.7;height: 32px;width:28px;float: right;position: absolute;right: 0;">'),oi=null;ai();yi();ci();li();this.attributecount=function(n){y.val(n)};this.gridkendo=function(){st()};rt=[];ii=0;ft=0;this.cmboonclick=function(){p.val()=="L"?(st(),a.show(),lt.hide()):(a.hide(),lt.show(),s.empty());v.$cmbovaluecheck=p.val()};this.cleartext=function(){y.val("");nt.val("");s.empty();y.val().trim().length<=0?y.css("background-color","pink"):y.css("background-color","white");a.hide();p.attr("disabled",!0);it.attr("disabled",!0);b.attr("disabled",!0)};this.editAttribute=function(n,t){var u,i,r;if(ht=t,w=n,u="SELECT a.name,  a.description,a.isactive, a.ismandatory,  a.ATTRIBUTEVALUETYPE,  m.name,  m.value  FROM m_attribute a LEFT OUTER  JOIN m_attributevalue m  ON a.m_attribute_id  =m.m_attribute_id WHERE a.m_attribute_id ="+n+"",i=VIS.DB.executeDataSet(u,null,null),i!=null){if(i.tables[0].rows.length>0)for(r=0;r<i.tables[0].rows.length;r++)y.val(i.tables[0].rows[0].cells.name.toString().trim()),i.tables[0].rows[0].cells.description!=null&&nt.val(i.tables[0].rows[0].cells.description.toString().trim()),i.tables[0].rows[0].cells.attributevaluetype!=null&&p.val(i.tables[0].rows[0].cells.attributevaluetype),i.tables[0].rows[0].cells.isactive=="Y"?(b.val(i.tables[0].rows[0].cells.isactive),b.prop("checked",!0)):b.prop("checked",!1),i.tables[0].rows[0].cells.ismandatory=="Y"?(it.val(i.tables[0].rows[0].cells.ismandatory),it.prop("checked",!0)):it.prop("checked",!1);hi()}y.val().trim().length<=0?y.css("background-color","pink"):y.css("background-color","white");p.attr("disabled",!1);it.attr("disabled",!1);b.attr("disabled",!1);a.show()};this.saveAttributedata=function(){at()};this.onchangesaveattribute=function(){at()};this.initialize=function(){};this.getRoot=function(){return ut};this.getRoot2=function(){return pt};this.disposeComponent=function(){pi();w=null;d=null;y=null;nt=null;p=null;ot=null;k=null;ct=null;oi=null}}n.AForms=n.AForms||{};n.AForms.attribute=i}(VA005,jQuery);VA005=window.VA005||{},function(n,t){function i(){function nf(){h=t("<div style='height:100%' >");ir="<div id='"+i.windowNo+"leftboxdivwidth' class='VA005-right-wrap-leftboxdiv'><div class='top-wrap-treedesign'><h4 style='margin-top:11px'>"+VIS.Msg.getMsg("VA005_Attribute")+"<\/h4><div class='VA005-top-right-treedesign'><div id='"+i.windowNo+"hideshoweditbutton' style=';height: 29px;width: 26px;position: absolute;'><\/div><span style='float:left;cursor:pointer;margin-top:3px;font-size:20px'  id='"+i.windowNo+"editattributeboxes' class='glyphicon glyphicon-edit' title='"+VIS.Msg.getMsg("VA005_EditAttribute")+"'   ><\/span><span style='cursor:pointer;font-size:18px;margin:7px 0 0 10px' id='"+i.windowNo+"delattributeboxes' class='glyphicon glyphicon-trash' title='"+VIS.Msg.getMsg("VA005_DeleteAttribute")+"' ><\/span><\/div><\/div><div class='VA005-att-tree-vieww'><\/div><div id='"+i.windowNo+"leftboxbackdivforspliter'  style='height:52%;margin-top:46px;'><div style='float:left;width:100%;border-bottom:1px solid #ccc;overflow-y:auto;overflow-x:none;height:101%' class='VA005_maindivleft' id='"+i.windowNo+"attributedivleftdragdrop'><\/div><\/div><div id='"+i.windowNo+"leftboxattvaluebelow'  style='height:53%;margin-top:4px'><div id='"+i.windowNo+"AttributeValuegetid' class='VA005-att-tree-vieww' style='margin-bottom: 10px;'><h5>"+VIS.Msg.getMsg("VA005_AttributeValue")+"<\/h5><\/div><div style='float:left'><\/div><div style='margin-left:0px;overflow:auto;height:76%;float:left' id='"+i.windowNo+"attributevaluedivleftdragdrop'><\/div><\/div><\/div><div id='"+i.windowNo+"middivforattributevalue'  style='overflow:auto;display:none;height:100%;width: 30%;min-width:30%;padding:12px;float: left;border-right:1px solid #ccc;'><\/div><div id='"+i.windowNo+"btndiv' class='VA005-right-wrap-div-setlisting-top'><div class='VA005-top-wrap-div-h'><h4 style='float:left;color:#1aa0ed'>"+VIS.Msg.getMsg("VA005_AttributeSetListing")+"<\/h4><div style='position:relative' class='VA005-top-right-div-openattset'><span id='"+i.windowNo+"openattributeset' class='glyphicon glyphicon-plus' style='cursor:pointer;margin:8px 10px 0 0;font-size:20px;' title='"+VIS.Msg.getMsg("VA005_OpenAttributeSet")+"'   ><\/span><span id='"+i.windowNo+"deleteattribute' class='VA005-disabled glyphicon glyphicon-trash' style='cursor:pointer;font-size:18px;' title='"+VIS.Msg.getMsg("VA005_DeleteAttributeSet")+"' ><\/span><\/div><\/div><div style='z-index:999999' class='VA005-att-tree-div-showtree'  ><div  id='"+i.windowNo+"showtree' style='min-width:420px;-webkit-overflow-scrolling:touch;' ><\/div><\/div><\/div><span id='"+i.windowNo+"deletemsz' style='display:none;color:red'>"+VIS.Msg.getMsg("VA005_DeletSuccessfully")+"<\/span><\/div>";h.append(ir);pu=h.find("#"+i.windowNo+"deletemsz");tu=h.find("#"+i.windowNo+"AttributeValuegetid");bu=h.find("#"+i.windowNo+"leftboxattvaluebelow");yu=h.find("#"+i.windowNo+"VA005_splitter");ui=h.find("#"+i.windowNo+"leftboxbackdivforspliter");vu=h.find("#"+i.windowNo+"hideshoweditbutton");et=h.find("#"+i.windowNo+"leftboxdivwidth");b=h.find("#"+i.windowNo+"editattributeboxes");nt=h.find("#"+i.windowNo+"delattributeboxes");w=h.find("#"+i.windowNo+"middivforattributevalue");wi=h.find("#"+i.windowNo+"addnewattribute");r=h.find("#"+i.windowNo+"attributedivleftdragdrop");lu=h.find("#"+i.windowNo+"attributedivleftdragdrop_header");rt=h.find("#"+i.windowNo+"attributevaluedivleftdragdrop");ht=h.find("#"+i.windowNo+"showtree");au=h.find("#"+i.windowNo+"hideshowrightdiv");ni=h.find("#"+i.windowNo+"openattributeset");ti=h.find("#"+i.windowNo+"deleteattribute");gt.append(h);a=h.find("#"+i.windowNo+"btndiv")}function ci(){var e,u,n,f;r.empty();n="<div style='cursor:pointer' class='VA005-attributedivstatic  VA005-divboxtarget-design-hover' title='"+VIS.Msg.getMsg("VA005_AddAttribute")+"' ><span style='cursor:pointer'><img src='"+VIS.Application.contextUrl+"Areas/VA005/Images/add.png' id='"+i.windowNo+"addnewattribute'><\/img><\/span><\/div><div class='VA005-innerattrb'><\/div>";r.append(t(n));r.find(".VA005-attributedivstatic").on("click",uf);if(uu=r.find(".VA005-attributedivstatic"),e="SELECT NAME, M_Attribute_ID,isactive FROM M_Attribute  ORDER BY M_Attribute_ID DESC",e=VIS.MRole.addAccessSQL(e,"M_Attribute",!0,!0),u=VIS.DB.executeDataSet(e,null,null),u!=null){for(n="",f=0;f<u.tables[0].rows.length;f++)n+=fu(VIS.Utility.Util.getValueOfInt(u.tables[0].rows[f].cells.m_attribute_id),VIS.Utility.encodeText(u.tables[0].rows[f].cells.name),u.tables[0].rows[f].cells.isactive);r.append(t(n));r.find(".VA005-attributediv").on(VIS.Events.onTouchStartOrClick,di);r.find(".VA005-attributediv").draggable({revert:"invalid",helper:"clone",containment:gt,start:function(){iu=t(this).find("label");du=t(this).attr("data-id");st=!0},drag:function(){if(t(this).data("isactive")=="N")return st=!1,!1},stop:function(){st=!1}})}}function tf(){ht.find(".k-in").droppable({drop:function(n,i){f[0].style.visibility="visible";ru=t(i.draggable).data("id");ki=t(this).children().eq(0).attr("NID");rf(ru,ki)}})}function rf(n){f[0].style.visibility="visible";var i={attributsetid:n,lablename:ki};t.ajax({url:VIS.Application.contextUrl+"Attribute/SaveAttributeuses",type:"Post",async:!1,datatype:"Json",data:i,success:function(n){var t=JSON.parse(n);yt();f[0].style.visibility="hidden"},error:function(){}})}function uf(){var n,i,h;b.removeClass("VA005-disabled");o.$getvalueonchange==!0&&(n=""+VIS.Msg.getMsg("VA005_SaveAttributeIt")+"",i=VIS.ADialog.ask(n),i==!0?(o.onchangesaveattribute(),o.$getvalueonchange=!1):o.$getvalueonchange=!1);f[0].style.visibility="visible";nt.removeClass("VA005-disabled");u=0;s=[];ff();et.animate({width:"40%"});e.css("display","none");a.animate({width:"30%"});a.css("display","inherit");o.cleartext();w.animate({width:"30%"});w.css({display:"inherit",width:"30%"});o.attributecount(si);r.find(".VA005-attributediv").draggable("destroy");h=fu(u,VIS.Msg.getMsg("VA005_Attribute")+si,"Y");r.find(".VA005-innerattrb").prepend(t(h));ot();r.attr("VA005_plusimg","Y");r.find(".VA005-divboxtarget-design").removeClass("VA005-divboxtarget-design");t(r.children()).find("div .VA005-checkboxonleftdiv").removeAttr("checked");t(r.find(".VA005-innerattrb").children("div")[0]).addClass("VA005-divboxtarget-design");t(r.find(".VA005-innerattrb").children("div")[0]).find(".VA005-checkboxonleftdiv").prop("checked",!0);t(t(r.children()).find("label")).removeClass("VA005-textcolorchange-onedit");tt=t(r.find(".VA005-innerattrb").children("div")[0]).find("label");s.push(u);r.find(".VA005-attributediv").off(VIS.Events.onTouchStartOrClick,di);r.find(".VA005-attributediv").on(VIS.Events.onTouchStartOrClick,di);r.find(".VA005-attributediv").draggable({start:function(){st=!0;iu=t(this).find("label")},drag:function(){if(t(this).data("isactive")=="N")return st=!1,!1},stop:function(){st=!1},revert:"invalid",helper:"clone",containment:gt});f[0].style.visibility="hidden"}function fu(n,t,r){return str="<div data-isActive='"+r+"' data-id='"+n+"' title='"+t+"' style='word-break:break-word;line-height:20px;cursor:pointer;' id='"+i.windowNo+"divappendinleftsideboxes_header' class='VA005-attributediv  VA005-divboxtarget-design-hover'><div style='float: left; width: 100%;'><input attid='"+n+"' class='VA005-checkboxonleftdiv' type='checkbox' style='float: left;'><\/div>",str+=r=="Y"?"<label class='VA005-textoverfllowhidden'>"+t+"<\/label>":"<label class='VA005-textoverfllowhidden-lightcolor'>"+t+"<\/label>",str+="<\/div>"}function ff(){var n="SELECT count(name) as Name FROM M_Attribute WHERE isactive='Y'",r,f;n=VIS.MRole.addAccessSQL(n,"M_Attribute",!0,!0);r=VIS.DB.executeDataSet(n,null,null);si=r.tables[0].rows[0].cells.name+1;f={name:VIS.Msg.getMsg("VA005_Attribute")+" "+si,isactivefield:!0,mandatory:!1,istanceattribute:!0};t.ajax({url:VIS.Application.contextUrl+"Attribute/SaveAttributemodel",type:"Post",async:!1,datatype:"Json",data:f,success:function(n){u=JSON.parse(n);i.getidfromdivboxesselect=u+"_2_"+i.windowNo},error:function(){}})}function di(n){var h,c,f;n.stopPropagation();i.isSaveOnItemFocus=!1;o.$getvalueonchange==!0&&(h=""+VIS.Msg.getMsg("VA005_SaveAttributeIt")+"",c=VIS.ADialog.ask(h),c==!0?(i.isSaveOnItemFocus=!0,o.onchangesaveattribute(),o.cmboonclick(),i.attributevallueonattributeclick(u),tt.is("label")||(tt=tt.hasClass("VA005-attributediv")?tt.find("label"):tt.siblings()[0]),tt.text(o.$textnametextvalue),tt.addClass("VA005-textoverfllowhidden"),yt(),o.$activechkbox?tt.css("color","black"):tt.css("color","#AFA5A5")):o.$getvalueonchange=!1);nt.removeClass("VA005-disabled");f=t(n.target);tt=f;f.hasClass("VA005-checkboxonleftdiv")?(f.prop("disabled",!0),window.setTimeout(function(){b.removeClass("VA005-disabled");u=VIS.Utility.Util.getValueOfInt(f.attr("attid"));getidfromattboxexforaddnode=u;f.prop("checked")?(s.push(u),f.parent().parent().addClass("VA005-divboxtarget-design"),s.length==1?(ot(),o.cmboonclick(),i.attributevallueonattributeclick(u),b.removeClass("VA005-disabled"),nt.removeClass("VA005-disabled")):rt.empty()):(s.length==1&&(b.removeClass("VA005-disabled"),nt.removeClass("VA005-disabled")),s.splice(s.indexOf(u),1),f.parent().parent().removeClass("VA005-divboxtarget-design"),bi=s,bi.length==1&&(u=s[0],ot(),o.cmboonclick(),i.attributevallueonattributeclick(bi)));(s.length==0||s.length>1)&&(rt.empty(),b.addClass("VA005-disabled"),w.is(":visible")&&(et.animate({width:"50%"}),w.css({display:"none",width:"0%"}),a.animate({width:"50%"}),a.css("display","inherit"),e.animate({width:"50%"}),o.cleartext()));t(r.children().find("label")).removeClass("VA005-textcolorchange-onedit");f.prop("disabled",!1)},200)):f.is("label")?(s=[],f=f.parent(),u=f.data("id"),getidfromattboxexforaddnode=u,s.push(u),t(r.children()).removeClass("VA005-divboxtarget-design"),r.find(".VA005-divboxtarget-design").removeClass("VA005-divboxtarget-design"),f.addClass("VA005-divboxtarget-design"),ot(),o.cmboonclick(),i.attributevallueonattributeclick(u),t(r.children()).find("div .VA005-checkboxonleftdiv").removeAttr("checked"),f.find("div .VA005-checkboxonleftdiv").prop("checked","true"),b.removeClass("VA005-disabled"),t(r.children().find("label")).removeClass("VA005-textcolorchange-onedit")):f.hasClass("VA005-attributediv")?(s=[],u=f.data("id"),getidfromattboxexforaddnode=u,s.push(u),t(r.children()).removeClass("VA005-divboxtarget-design"),r.find(".VA005-divboxtarget-design").removeClass("VA005-divboxtarget-design"),f.addClass("VA005-divboxtarget-design"),ot(),o.cmboonclick(),i.attributevallueonattributeclick(u),t(r.children()).find("div .VA005-checkboxonleftdiv").removeAttr("checked"),f.find("div .VA005-checkboxonleftdiv").prop("checked","true"),b.removeClass("VA005-disabled"),t(r.children().find("label")).removeClass("VA005-textcolorchange-onedit")):f.parent().hasClass("VA005-attributediv")&&(s=[],f=f.parent(),u=f.data("id"),getidfromattboxexforaddnode=u,s.push(u),t(r.children()).removeClass("VA005-divboxtarget-design"),r.find(".VA005-divboxtarget-design").removeClass("VA005-divboxtarget-design"),f.addClass("VA005-divboxtarget-design"),ot(),o.cmboonclick(),i.attributevallueonattributeclick(u),t(r.children()).find("div .VA005-checkboxonleftdiv").removeAttr("checked"),f.find("div .VA005-checkboxonleftdiv").prop("checked","true"),b.removeClass("VA005-disabled"),t(r.children().find("label")).removeClass("VA005-textcolorchange-onedit"));o.$getvalueonchange=!1}function ef(){e=t("<div  class='VA005-left-wrap-div-openattributre' style='display:none;height:500px;overflow: scroll;'>");gr="<div class='VA005-att-tree-vieww'><h4 style='float:left;color:#1aa0ed'>"+VIS.Msg.getMsg("VA005_AddAttributeSet")+"<\/h4><\/div><div><table style='width:100%;table-layout: fixed; '><tr><td colspan='2' style='width:100%'>"+VIS.Msg.getMsg("Name")+" <\/td><\/tr><tr><td colspan='2'><input style='width:100%;margin:0px 0px 10px 0;background-color:pink' id='"+i.windowNo+"txtname' type='text' /><\/td><\/tr><tr><td style='width:110px'>"+VIS.Msg.getMsg("Description")+"<\/td><\/tr><tr><td colspan='2'><input style='width:100%;margin:0px 0px 10px 0' id='"+i.windowNo+"txtdes'  type='text'/><\/td><\/tr><tr><td style='width:110px'>"+VIS.Msg.getMsg("VA005_MandatoryType")+"<\/td><\/tr><tr><td colspan='2'><select style='width:100%;margin:0px 0px 18px 0' id='"+i.windowNo+"mandatorysec'><\/select><\/td><\/tr><tr><td  style='width:110px'><\/td><\/tr><div style='margin-top: 5px;'><\/div><tr><td><input style='margin:0 0 13px 0' type='checkbox'  id='"+i.windowNo+"expirydate' /><span style='margin-left: 8px;'>"+VIS.Msg.getMsg("VA005_ExpiryDate")+"<\/span><\/td><td><input style='margin:0' type='checkbox' disabled id='"+i.windowNo+"mandatoryexpdate' /><span style='margin-left: 8px;'>"+VIS.Msg.getMsg("VA005_MandatoryExpiryDate")+"<\/span><\/td><\/tr><tr><td style='width:110px'><\/td><\/tr><div style='margin-top: 20px;'><\/div><tr><td><input style='margin:5px 0 10px 0' id='"+i.windowNo+"lot'  type='checkbox'   /><span style='margin-left: 8px;'>"+VIS.Msg.getMsg("VA005_Lot")+"<\/span><\/td><td><input style='margin:5px 0 10px 0' id='"+i.windowNo+"serial' type='checkbox'   /><span style='margin-left: 8px;'>"+VIS.Msg.getMsg("VA005_Serial")+"<\/span><\/td><\/tr><tr><td style='width:110px;'><label style='float:left;margin:0px;margin-top:2px;font-weight:normal;margin-bottom:-2px' id='"+i.windowNo+"lotandserialname'>"+VIS.Msg.getMsg("VA005_Lot&Serial")+"<\/label><\/td><\/tr><div style='margin-top: 15px;'><\/div><tr><td colspan='2' style='width:80%;margin:0 9px 3px 0'><select class='VA005-selectattsetcmb' id='"+i.windowNo+"lotandserialdatadropdown'><\/select>&nbsp;&nbsp;   <span> <div title='"+VIS.Msg.getMsg("VA005_Edit")+"'  id='"+i.windowNo+"editbtn' style='cursor:pointer;font-size:18px;' class='VA005-disabled glyphicon glyphicon-edit'><\/div>   <div style='cursor:pointer;font-size:21px;margin-left:7px' title='"+VIS.Msg.getMsg("VA005_AddLotSerial")+"'    class='VA005-disabled glyphicon glyphicon-plus'  id='"+i.windowNo+"addbtn'><\/div>        <\/span>                                 <\/td><\/tr><tr><td style='width:70px'><\/td><\/tr><tr><td colspan='2'><div style='float:right;'><input id='"+i.windowNo+"okbtnattributeset' class='ui-button ui-widget ui-state-default ui-corner-all ui-button-text-only' style='padding: 5.5px 14px !important' type='button'  value='"+VIS.Msg.getMsg("OK")+"'/><input id='"+i.windowNo+"cancelbtnattributeset' class='ui-button ui-widget ui-state-default ui-corner-all ui-button-text-only' style='padding: 5.5px 14px !important;' type='button'  value='"+VIS.Msg.getMsg("Cancel")+"'/><\/div><\/td><\/tr><\/table><\/div>";e.append(gr);h.append(e);c=e.find("#"+i.windowNo+"txtname");ct=e.find("#"+i.windowNo+"txtdes");lt=e.find("#"+i.windowNo+"mandatorysec");k=e.find("#"+i.windowNo+"expirydate");d=e.find("#"+i.windowNo+"mandatoryexpdate");l=e.find("#"+i.windowNo+"lot");v=e.find("#"+i.windowNo+"serial");pt=e.find("#"+i.windowNo+"lotandserialname");y=e.find("#"+i.windowNo+"lotandserialdatadropdown");g=e.find("#"+i.windowNo+"addbtn");vi=e.find("#"+i.windowNo+"divhideandshow");vt=e.find("#"+i.windowNo+"editbtn");cr=e.find("#"+i.windowNo+"okbtnattributeset");lr=e.find("#"+i.windowNo+"cancelbtnattributeset");lf()}function of(){ft=t("<div>");dr="<div id='"+i.windowNo+"divhideandshow' style='height:auto;width:100%;><table style='width:100%'><tr><td>"+VIS.Msg.getMsg("Name")+"<\/td><\/tr><tr><td><input style='width:100%;background-color:pink;margin:4px 0 8px 0;' id='"+i.windowNo+"divnametxt' type='text' /><\/td><\/tr><tr><td>"+VIS.Msg.getMsg("VA005_StartNo")+"<\/td><\/tr><tr><td><input style='width:100%;margin:4px 0 8px 0;' id='"+i.windowNo+"divstarttext' type='number' value='100' /><\/td><\/tr><tr><td>"+VIS.Msg.getMsg("VA005_CurrentNext")+"<\/td><\/tr><tr><td><input style='width:100%;margin:4px 0 8px 0;' id='"+i.windowNo+"divcurrenttext' type='number'  value='100' /><\/td><\/tr><tr><td>"+VIS.Msg.getMsg("VA005_Increment")+"<\/td><\/tr><tr><td><input style='width:100%;margin:4px 0 8px 0;' id='"+i.windowNo+"incrementtext' type='number'  value='1' /><\/td><\/tr><tr><td>"+VIS.Msg.getMsg("VA005_Prefix")+"<\/td><\/tr><tr><td><input style='width:100%;margin:4px 0 8px 0;' id='"+i.windowNo+"prefixtxt' type='text' /><\/td><\/tr><tr><td>"+VIS.Msg.getMsg("VA005_Suffix")+"<\/td><\/tr><tr><td><input style='width:100%;margin:4px 0 8px 0;' id='"+i.windowNo+"serfixtxt' type='text' /><\/td><\/tr><\/table><\/div>";ft.append(dr);it=ft.find("#"+i.windowNo+"divnametxt");wt=ft.find("#"+i.windowNo+"divstarttext");bt=ft.find("#"+i.windowNo+"divcurrenttext");kt=ft.find("#"+i.windowNo+"incrementtext");at=ft.find("#"+i.windowNo+"prefixtxt");ii=ft.find("#"+i.windowNo+"serfixtxt")}function sf(){of();ee();var n=new VIS.ChildDialog;n.setHeight(500);n.setWidth(450);n.setEnableResize(!1);l.prop("checked")?n.setTitle(VIS.Msg.getMsg("VA005_AddLot")):n.setTitle(VIS.Msg.getMsg("VA005_AddSerial"));n.setModal(!0);n.setContent(ft);n.show();n.onClose=function(){nr()};n.onOkClick=function(){if(it.val().trim().length>0)l.prop("checked")&&(re(),li()),v.prop("checked")&&(ue(),gi());else return VIS.ADialog.info("VA005_NameFieldRequired"),!1;nr()};n.onCancelClick=function(){nr()}}function hf(){o=new n.AForms.attribute(a,ci,w,et,nt,b,nu,rt,uu,i,f);ei=o.getRoot();h.append(ei);ur=o.getRoot2();w.append(ur);ei.css("display","none")}function ot(){o.editAttribute(u,yt);ei.css("display","inherit")}function cf(){t.ajax({url:VIS.Application.contextUrl+"AttributeListing/DeleteAttributeFromData",type:"Post",async:!1,datatype:"Json",contentType:"application/json",data:JSON.stringify({values:s}),success:function(n){rt.empty();n.value!=""&&alert(n.value)},error:function(n){n.value!=null&&alert(n.value)}})}function lf(){ut>0?ou(ut):ai();c.val().trim().length<=0?c.css("background-color","pink"):c.css("background-color","white")}function af(){g.prop("disabled",!1)}function vf(){var r,n,u,i;if(lt.empty(),r="SELECT  AD_Ref_list.Name, AD_Ref_list.value FROM AD_Ref_list JOIN AD_Reference ON AD_Ref_List.AD_Reference_ID=AD_Reference.AD_Reference_ID WHERE AD_Reference.Name='M_AttributeSet MandatoryType' AND ad_ref_list.isactive='Y'",n=VIS.DB.executeReader(r.toString(),null),n!=null){for(i=null;n.read();)i=n.getString(0),u=n.getString(1),lt.append(t("<Option value="+u+">"+i+"<\/option>"));n.close()}}function li(){var i,n,u,r;if(y.empty(),i="SELECT M_LotCtl_id,Name FROM M_LotCtl WHERE isActive='Y'",i=VIS.MRole.addAccessSQL(i,"M_LotCtl",!0,!0),n=VIS.DB.executeReader(i.toString(),null),n!=null){for(r=null,y.append(t("<Option value=''> <\/option>"));n.read();)r=n.getString(1),u=VIS.Utility.Util.getValueOfInt(n.getString(0)),y.append(t("<Option value="+u+">"+VIS.Utility.encodeText(r)+"<\/option>"));n.close()}}function gi(){var i,n,u,r;if(y.empty(),i="SELECT M_SerNoCtl_id,Name FROM M_SerNoCtl WHERE isActive='Y'",i=VIS.MRole.addAccessSQL(i,"M_SerNoCtl",!0,!0),n=VIS.DB.executeReader(i.toString(),null),n!=null){for(r=null,y.append(t("<Option value=''> <\/option>"));n.read();)r=n.getString(1),u=VIS.Utility.Util.getValueOfInt(n.getString(0)),y.append(t("<Option value="+u+">"+VIS.Utility.encodeText(r)+"<\/option>"));n.close()}}function yf(){l.is(":checked")?(or=y.val(),yi="true"):yi="false";v.is(":checked")?(sr=y.val(),pi="true"):pi="false";var n={name:VIS.Utility.encodeText(c.val()),description:VIS.Utility.encodeText(ct.val()),mandatorytype:lt.val(),IsGuaranteeDate:k.prop("checked"),IsGuaranteeDateMandatory:d.prop("checked"),lotvalue:or,serialvalue:sr,islotcheck:yi,isserialcheck:pi,ID:ut};t.ajax({url:VIS.Application.contextUrl+"AttributeListing/SaveAttributeSetValue",type:"Post",async:!1,datatype:"Json",cache:!1,data:n,success:function(n){cu=JSON.parse(n)},error:function(){}})}function ou(n){var r,t,i;if(ai(),r="Select NAME,DESCRIPTION,MANDATORYTYPE,ISGUARANTEEDATE,ISGUARANTEEDATEMANDATORY,M_LOTCTL_ID,M_SERNOCTL_ID,IsLot,IsSerNo FROM M_AttributeSet WHERE M_Attributeset_ID="+n,t=VIS.DB.executeDataSet(r,null,null),t!=null&&t.tables[0].rows.length>0)for(i=0;i<t.tables[0].rows.length;i++)c.val(t.tables[0].rows[0].cells.name.toString().trim()),ct.val(t.tables[0].rows[0].cells.description),lt.val(t.tables[0].rows[0].cells.mandatorytype),k.val(t.tables[0].rows[0].cells.isguaranteedate),t.tables[0].rows[0].cells.isguaranteedate=="Y"?(k.prop("checked",!0),d.prop("disabled",!1)):k.prop("checked",!1),d.val(t.tables[0].rows[0].cells.isguaranteedatemandatory),t.tables[0].rows[0].cells.isguaranteedatemandatory=="Y"?(d.attr("disabled",!1),d.prop("checked",!0)):d.prop("checked",!1),l.val(t.tables[0].rows[0].cells.m_lotctl_id),t.tables[0].rows[0].cells.islot=="Y"?(l.prop("checked",!0),li(),y.val(t.tables[0].rows[0].cells.m_lotctl_id),ri=t.tables[0].rows[0].cells.m_lotctl_id):l.prop("checked",!1),v.val(t.tables[0].rows[0].cells.m_sernoctl_id),t.tables[0].rows[0].cells.isserno=="Y"?(v.prop("checked",!0),gi(),y.val(t.tables[0].rows[0].cells.m_sernoctl_id),dt=t.tables[0].rows[0].cells.m_sernoctl_id):v.prop("checked",!1);g.prop("disabled",!0);c.val().trim().length<=0?c.css("background-color","pink"):c.css("background-color","white")}function pf(){f=t("<div>");f.css("position","absolute");f.css("bottom","0");f.css("background","url('"+VIS.Application.contextUrl+"Areas/VIS/Images/busy.gif') no-repeat");f.css("background-position","center center");f.css("width","98%");f.css("height","98%");f.css("text-align","center");f.css("z-index","1000");f[0].style.visibility="visible";gt.append(f)}function wf(){p.data("kendoTreeView").wrapper.find(".va005-parentss").parent().on({mouseenter:function(){if(st==!0){var n=t(this).find(".classforgetnod");n.length>0?t(this).find(".va005-parentss").addClass("VA005-classforgetnod"):t(this).css({cursor:"not-allowed"})}},mouseleave:function(){if(st==!0){var n=t(this).find(".classforgetnod");n.length>0?t(this).find(".va005-parentss").removeClass("VA005-classforgetnod"):t(this).css({cursor:"auto"})}}})}function bf(n){var r=t(this).data("nodeid"),i;n.preventDefault();i=p.data("kendoTreeView");i.remove(t(this).closest(".k-item"));var u=t(this).data("parentid"),f="DELETE FROM M_Attributeuse WHERE M_Attribute_ID="+r+" and M_Attributeset_id="+u,e=VIS.DB.executeDataSet(f,null,null)}function df(){var n=t(this).data("dtype");n=="1"?(f[0].style.visibility="visible",ut=t(this).data("nodeid"),a.css("display","none"),et.animate({width:"50%"}),w.animate({width:"0%"}),w.css({display:"none",width:"0%"}),e.animate({width:"50%"}),e.css("display","inherit"),ou(ut),o.gridkendo(),t(r.children()).find("div .VA005-checkboxonleftdiv").removeAttr("checked"),r.find(".VA005-divboxtarget-design").removeClass("VA005-divboxtarget-design"),s=[],nt.addClass("VA005-disabled"),f[0].style.visibility="hidden"):n=="2"&&(a.animate({width:"30%"}),f[0].style.visibility="visible",b.addClass("VA005-disabled"),u=t(this).data("nodeid"),getidfromattboxexforaddnode=u,tt=t(r.find("[data-id='"+u+"']")).find("label"),i.$idgetforattribute=!0,ot(),w.is(":visible")||(et.animate({width:"40%"}),e.css("display","none"),a.animate({width:"30%"}),w.animate({width:"30%"}),w.css({display:"inherit",width:"30%"})),r.find(".VA005-divboxtarget-design").removeClass("VA005-divboxtarget-design"),t(r.children()).find("div .VA005-checkboxonleftdiv").removeAttr("checked"),nt.addClass("VA005-disabled"),s=[],ht.css("overflow","auto"),o.cmboonclick(),i.attributevallueonattributeclick(u),f[0].style.visibility="hidden")}function gf(){var n,i,r,u,e;f[0].style.visibility="visible";n=p.data("kendoTreeView").select();ut=t(n.find(".data-id ")).data("nodeid");i=t(n.find(".data-id ")).data("dtype");i=="1"&&(r=""+VIS.Msg.getMsg("VA005_DeleteIt")+"",u=VIS.ADialog.ask(r),u==!0&&(e={attributesetdelID:ut},t.ajax({url:VIS.Application.contextUrl+"AttributeListing/DeleteAttributeSetValue",type:"Post",async:!1,datatype:"Json",cache:!1,data:e,success:function(t){t=JSON.parse(t);var i=t;i==""?p.data("kendoTreeView").remove(n.closest(".k-item")):VIS.ADialog.error(i)},error:function(n){n!=null&&VIS.ADialog.error(n)}})));f[0].style.visibility="hidden"}function ne(){oi=t("<div>");fr="<div style='height:auto;width:100%'><ul style='font-size: 17px;line-height: 1.7em;padding:0;margin:0' id='"+i.windowNo+"iconUi'><\/ul><\/div>";oi.append(fr);er=oi.find("#"+i.windowNo+"iconUi")}function te(n){var r="select mas.Name from m_attributeuse masu JOIN m_attributeset mas on masu.m_attributeset_id=mas.m_attributeset_id where masu.m_attribute_id="+n,i=VIS.DB.executeReader(r.toString(),null);if(i!=null){while(i.read())er.append(t("<li  style='font-size: 14px;color: #666; margin-left: 25px;'>"+VIS.Utility.Util.getValueOfString(i.getString(0))+"<\/li>"));i.close()}}function ie(){rr=t(this).data("nodeid");ne();te(rr);var n=new VIS.ChildDialog;n.setHeight(300);n.setWidth(350);n.setEnableResize(!1);n.setTitle(VIS.Msg.getMsg("VA005_LinkAttributeSetAndAttribute"));n.setModal(!0);n.setContent(oi);n.show();n.onClose=function(){};n.onOkClick=function(){};n.onCancelClick=function(){}}function re(){var n={Name:VIS.Utility.encodeText(it.val()),StartNo:VIS.Utility.encodeText(wt.val()),CurrentNext:VIS.Utility.encodeText(bt.val()),Increment:VIS.Utility.encodeText(kt.val()),prefix:VIS.Utility.encodeText(at.val()),Suffix:VIS.Utility.encodeText(ii.val()),IsLot:!0};t.ajax({url:VIS.Application.contextUrl+"AttributeListing/SaveLotData",type:"Post",async:!1,datatype:"Json",cache:!1,data:n,success:function(n){ar=JSON.parse(n)},error:function(){}});ri=ar}function nr(){it.val("");wt.val("");bt.val("");kt.val("");at.val("");ii.val("");it.trigger("change")}function ue(){var n={name:it.val(),startno:wt.val(),currentnext:bt.val(),incrementno:kt.val(),prefix:at.val(),sufix:ii.val(),IsLot:!0};t.ajax({url:VIS.Application.contextUrl+"AttributeListing/saveSerialData",type:"Post",async:!1,datatype:"Json",cache:!1,data:n,success:function(n){tr=JSON.parse(n)},error:function(){}});dt=tr}function ai(){c.val("");ct.val("");k.prop("checked",!1);d.prop("checked",!1);d.prop("disabled",!0);l.prop("checked",!1);v.prop("checked",!1);y.empty()}function fe(){var n="select ad_table_id from ad_table where tablename='M_AttributeSet'",r="SELECT fieldlength FROM ad_column WHERE ad_table_id=("+n+") AND COLUMNNAME='Name'  AND isActive ='Y'",u=VIS.DB.executeReader(r.toString(),null),t,i;hr=VIS.Utility.Util.getValueOfInt(u.tables[0].rows[0].cells.fieldlength);c.attr("maxlength",hr);t="SELECT fieldlength FROM ad_column WHERE ad_table_id=("+n+") AND COLUMNNAME ='Description'  AND isActive ='Y'";i=VIS.DB.executeReader(t.toString(),null);columndesLength=VIS.Utility.Util.getValueOfInt(i.tables[0].rows[0].cells.fieldlength);ct.attr("maxlength",columndesLength)}function ee(){it.on("change",function(){it.val().trim().length<=0?it.css("background-color","pink"):it.css("background-color","white")});oe()}function oe(){var n="select ad_table_id from ad_table where tablename='M_LotCtl'",l="SELECT fieldlength FROM ad_column WHERE ad_table_id=("+n+") AND COLUMNNAME='Name' AND isActive  ='Y'",a=VIS.DB.executeReader(l.toString(),null),t,i,r,u,f,e,o,s,h,c;vr=VIS.Utility.Util.getValueOfInt(a.tables[0].rows[0].cells.fieldlength);it.attr("maxlength",vr);t="SELECT fieldlength FROM ad_column WHERE ad_table_id=("+n+") AND COLUMNNAME='StartNo' AND isActive  ='Y'";i=VIS.DB.executeReader(t.toString(),null);yr=VIS.Utility.Util.getValueOfInt(i.tables[0].rows[0].cells.fieldlength);wt.attr("maxlength",yr);r="SELECT fieldlength FROM ad_column WHERE ad_table_id=("+n+") AND COLUMNNAME='CurrentNext' AND isActive  ='Y'";u=VIS.DB.executeReader(r.toString(),null);pr=VIS.Utility.Util.getValueOfInt(u.tables[0].rows[0].cells.fieldlength);bt.attr("maxlength",pr);f="SELECT fieldlength FROM ad_column WHERE ad_table_id=("+n+") AND COLUMNNAME='IncrementNo' AND isActive  ='Y'";e=VIS.DB.executeReader(f.toString(),null);wr=VIS.Utility.Util.getValueOfInt(e.tables[0].rows[0].cells.fieldlength);kt.attr("maxlength",wr);o="SELECT fieldlength FROM ad_column WHERE ad_table_id=("+n+") AND COLUMNNAME='Prefix' AND isActive  ='Y'";s=VIS.DB.executeReader(o.toString(),null);br=VIS.Utility.Util.getValueOfInt(s.tables[0].rows[0].cells.fieldlength);at.attr("maxlength",br);h="SELECT fieldlength FROM ad_column WHERE ad_table_id=("+n+") AND COLUMNNAME='Suffix' AND isActive  ='Y'";c=VIS.DB.executeReader(h.toString(),null);kr=VIS.Utility.Util.getValueOfInt(c.tables[0].rows[0].cells.fieldlength);at.attr("maxlength",kr)}function se(){ni.off("click");l.off("click");v.off("click");g.off("click");k.off("click");c.off("click");h.remove();ht.remove();ni.remove();e.remove();c.remove();ct.remove();lt.remove();k.remove();d.remove();l.remove();v.remove();pt.remove();y.remove();g.remove()}var fi,eu,yt,kf,tr,dt;this.windowNo;this.frame;var i=this,gt=t("<div class='vis-forms-container' style='height:100%;background-color:white;' >"),f=null,h=null,ir=null,a=null,ht=null,ni=null,ti=null,e=null,c=null,ct=null,lt=null,k=null,d=null,l=null,v=null,pt=null,y=null,g=null,su=null,it=null,wt=null,bt=null,kt=null,at=null,ii=null,hu=null,vi=null,p=null,cu=null,u=0,ut=0,rr=0,o=null,ei=null,ur=null,oi=null,fr=null,er=null,or=null,sr=null,hr=null,cr=null,lr=null,ar=null,ri=null,vr=null,yr=null,pr=null,wr=null,br=null,kr=null,dr=null,ft=null,yi=!1,pi=!1,gr=null,vt=null,wi=null,r=null,lu=null,rt=null,w=null,et=null,au=null,nt=null,nu=null;this.flag=1;nu=1;var b=null,vu=null,ui=null,yu=null,pu=null,st=!1,si=null,s=[],wu=null,bu=null,tu=null,ku=null,tt=null,iu=null;this.Expandable=!1;this.getidfromattboxexforaddnode=null;this.getidfromdivboxesselect=null;this.isSaveOnItemFocus=!1;var du=0,hi=null,bi=0,gu=!0;this.initialize=function(){pf();nf();yt();ef();vf();fe();hf();eu();ci();window.setTimeout(function(){i.formSizeChanged()},200)};this.ShowDialog=function(){};this.getRoot=function(){return gt};var ru=null,ki=null,uu=null;this.updateSelectedAttribute=function(n){t(r.find(".VA005-divboxtarget-design").find("label")).text(n);t(r.find(".VA005-divboxtarget-design").find("label")).css({"word-break":"break-word","line-height":"20px"})};this.updatetextcolor=function(n,i){i?(t(r.find(".VA005-divboxtarget-design").find("label")).text(n),hi=t(r.find(".VA005-divboxtarget-design").find("label")).text(n),hi.css("color","black"),t(t(r.find(".VA005-divboxtarget-design").find("label")).parent()).data("isactive","Y")):(t(r.find(".VA005-divboxtarget-design").find("label")).text(n),hi=t(r.find(".VA005-divboxtarget-design").find("label")).text(n),hi.css("color","#AFA5A5"),t(t(r.find(".VA005-divboxtarget-design").find("label")).parent()).data("isactive","N"))};fi=0;this.attributevallueonattributeclick=function(n){var f,i,u,r;if(o.$cmbovaluecheck=="L"&&(rt.empty(),f="SELECT M_ATTRIBUTEVALUE_ID, name, M_ATTRIBUTE_ID FROM m_attributevalue WHERE M_ATTRIBUTE_ID="+n,i=VIS.DB.executeDataSet(f,null,null),i!=null)){for(u="",r=0;r<i.tables[0].rows.length;r++)u+="<div data-id='"+VIS.Utility.Util.getValueOfInt(i.tables[0].rows[r].cells.m_attributevalue_id)+"' class='VA005-attributediv  VA005-divboxtarget-design-hover'><label class='VA005-textoverfllowhidden2' title='"+VIS.Utility.encodeText(i.tables[0].rows[r].cells.name)+"'>"+VIS.Utility.encodeText(i.tables[0].rows[r].cells.name)+"<\/label><\/div>";rt.append(t(u))}};eu=function(){s.length==0&&nt.addClass("VA005-disabled");b.addClass("VA005-disabled");nt.on("click",function(){var t,i,n;if(f[0].style.visibility="visible",s.length>0)if(t=VIS.ADialog.ask("VA005_DeleteIt"),t==!0){for(i="",n=0;n<s.length;n++)i+=n==0?s[n]:","+s[n];cf();yt();ci();f[0].style.visibility="hidden";nt.addClass("VA005-disabled");o.cleartext();s=[];b.addClass("VA005-disabled")}else nt.removeClass("VA005-disabled");f[0].style.visibility="hidden"});l.is(":checked")&&(pt.text(VIS.Msg.getMsg("VA005_LotValue")),li());ui.resizable({});ui.on("resize",function(n,t){var u=t.size.height,i;r.css("height",u);r.css("overflow-x","none");r.css("overflow-y","auto");r.css("width","100%");ui.css("width","100%");i=null;i=et.height()-(tu.height()+10);r.css("max-height",i);ui.css("max-height",i)});b.on("click",function(){(ku=u,o.$getvalueonchange!=!0)&&s.length==1&&(ot(),w.is(":visible")||(et.animate({width:"40%"}),w.animate({width:"30%"}),w.css({display:"inherit",width:"30%"}),a.animate({width:"30%"}),a.css("display","inherit"),e.animate({width:"30%"})),o.cmboonclick())});ti.on("click",function(){gf()});ni.on("click",function(){ut=0;l.attr("checked",!1);v.attr("checked",!1);a.css("display","none");e.css("display","inherit");c.trigger("change");c.val("");w.animate({width:"0%"});w.css({display:"none",width:"0%"});et.animate({width:"50%"});e.animate({width:"50%"});rt.empty()});ut==null&&k.prop("checked",!1);k.attr("checked")&&k.trigger("click");l.prop("checked")&&l.trigger("click");v.prop("checked")&&v.trigger("click");g.prop("disabled",!0);l.off("off");l.on("click",function(){l.is(":checked")?(v.prop("checked",!1),vt.removeClass("VA005-disabled"),g.removeClass("VA005-disabled"),li()):(vt.addClass("VA005-disabled"),g.addClass("VA005-disabled"),y.empty());pt.text(VIS.Msg.getMsg("VA005_LotValue"))});v.on("click",function(){vt.removeClass("VA005-disabled");g.removeClass("VA005-disabled");v.is(":checked")?(l.prop("checked",!1),vt.removeClass("VA005-disabled"),g.removeClass("VA005-disabled"),gi()):(vt.addClass("VA005-disabled"),g.addClass("VA005-disabled"),y.empty());pt.text(VIS.Msg.getMsg("VA005_SerialValue"));af()});g.on("click",function(n){(l.is(":checked")||v.is(":checked"))&&(n.stopPropagation(),vi.toggle(),sf())});k.on("click",function(){k.prop("checked")?d.attr("disabled",!1):(d.attr("disabled",!0),d.attr("checked",!1))});c.on("change",function(){c.val().trim().length<=0?c.css("background-color","pink"):c.css("background-color","white")});cr.on("click",function(){if(c.val().trim().length>0)yf(),ai(),a.css("display","inherit"),e.css("display","none"),a.animate({width:"50%"});else return VIS.ADialog.info("VA005_NameFieldRequired"),!1;c.trigger("change");yt();c.trigger("change");a.css("display","inherit");e.css("display","none")});lr.on("click",function(){ai();c.trigger("change");a.css("display","inherit");e.css("display","none");a.animate({width:"50%"});t(".VA005-attributedivstatic").parent().attr("VA005_plusimg","N");ci();s=[];b.addClass("VA005-disabled");nt.addClass("VA005-disabled")});vt.on("click",function(){if(ri!="null"||dt!="null"){if(l.is(":checked")){var t="select ad_window_id from ad_window where name='Lot Control'",i=VIS.DB.executeDataSet(t,null,null),r=VIS.Utility.Util.getValueOfInt(i.tables[0].rows[0].cells.ad_window_id),n=new VIS.Query;n.addRestriction("M_LotCtl_ID",VIS.Query.prototype.EQUAL,ri);VIS.viewManager.startWindow(r,n)}if(v.is(":checked")){var t="select ad_window_id from ad_window where name='Serial No Control'",i=VIS.DB.executeDataSet(t,null,null),r=VIS.Utility.Util.getValueOfInt(i.tables[0].rows[0].cells.ad_window_id),n=new VIS.Query;n.addRestriction("M_SerNoCtl_ID",VIS.Query.prototype.EQUAL,dt);VIS.viewManager.startWindow(r,n)}}else VIS.ADialog.info("VA005_Selectlotorserialcheck")});y.on("change",function(){l.is(":checked")?ri=y.val():v.is(":checked")&&(dt=y.val())});wi.off("click");wi.on("click",function(){u=0;a.animate({width:"20%"});w.css({display:"inherit",width:"30%"});ot();o.cleartext();e.css("display","inherit");var n="";n="<div id='"+i.windowNo+"divappendinleftsideboxes' class='VA005-attributediv  VA005-divboxtarget-design-hover'><label>"+VIS.Msg.getMsg("VA005_AddAttribute")+"<\/label><\/div>";r.prepend(t(n))})};this.removeatttvaluewithgrid=function(n,r,u){var h,o,e,s;for(f[0].style.visibility="visible",h=n+"_3_"+i.windowNo,o=t(p.find(".k-group").find("div[id='"+n+"_3_"+i.windowNo+"']")),e=0;e<o.length;e++)u<=0&&(s=t(p.find("div[id='"+n+"_3_"+i.windowNo+"']").parent().parent().parent().parent().parent()).find(".k-minus"),s.remove()),t(o[e]).parent().parent().parent().remove(),t(o[e]).remove();f[0].style.visibility="hidden"};this.updateatttvalueintree=function(n,t){var f,r,u;for(f=n+"_3_"+i.windowNo,r=p.find("div[id='"+f+"']"),u=0;u<r.length;u++)r.find("p").text(t)};this.addatttvaluewithgrid=function(n,r,u){var s,o,e,f;for(s=u+"_3_"+i.windowNo,n=n+"_2_"+i.windowNo,o=p.find("div[id='"+n+"']"),e=0;e<o.length;e++)f=p.data("kendoTreeView").append({text:r,NodeID:u,UID:s},t(o[e])),f.find("p").css({margin:"7px 12px 0px 67px"}),f.find("img").css("display","none"),t(f.find(".va005-editiconattvaluehide")).css("display","none"),f.find(".k-in").css("height","33px"),t(f.find(".va005-editiconattinfoclosehide")).css("display","none")};yt=function(){f[0].style.visibility="visible";t.ajax({url:VIS.Application.contextUrl+"AttributeListing/TreeViewForAttributeSetListing",type:"Get",async:!1,data:{Expend:i.windowNo},success:function(n){var i=JSON.parse(n);p&&p.data("kendoTreeView")!=undefined&&(p.data("kendoTreeView").destroy(),p.empty());p=ht.kendoTreeView({dragAndDrop:!1,dataSource:i,dataBound:function(){},select:function(n){gu=!1;var r=t(n.node),i=t(r.find(".data-id ")).data("dtype");i==1?(wu=i,ti.removeClass("VA005-disabled")):i==2?ti.addClass("VA005-disabled"):i==3&&ti.addClass("VA005-disabled")},template:"<div  id='#= item.UID #'  nid='#= item.NID #'  class='va005-parentss'><div class='#= item.classforgetnod #' style='margin:#= item.margin #;float:left'><div  class='va005_mouseover' style='float:left'><img   src='"+VIS.Application.contextUrl+"#= item.ImageSource #' style='vertical-align: text-top;float: left;margin: 6px 16px 0px 15px;display:#= item.visibility #''><p style='color:black;margin:0 0 0 9px;border-radius:4px;padding:#= item.padding #'>#= item.text #<\/p><\/div><\/div><div style='margin: 0;float:left' class='va005-editiconattvaluehide'  ><div style='float:left;display:#= item.visibility #'><a  style='color:gray;font-size:19px;margin:5px;cursor:pointer;display:#= item.visibility #' data-nodeid='#= item.NodeID #' data-dType= '#= item.Type #' class='data-id va005_editSet glyphicon glyphicon-edit va005-editattributecls' ><\/a><\/div><\/div><div style='margin: 0;float:left' class='va005-editiconattinfoclosehide'><div style='width:58px;float:right;display:#= item.ShowInfo #'><a style='cursor:pointer;display:#= item.ShowInfo #'><span  data-nodeid='#= item.NodeID #' class='va005_editattribute  glyphicon glyphicon-italic'  style='color:gray;vertical-align: text-top;float: left;margin: 9px 0px 10px 9px;display:#= item.ShowInfo #''><\/span><\/a><a style='cursor:pointer;display:#= item.ShowInfo #'><span  data-parentid='#= item.ParentID #'  data-nodeid='#= item.NodeID #' class='va005_remove  glyphicon glyphicon-remove'  style='color:gray;vertical-align: text-top;float: left;margin: 9px 0px 10px 9px;display:#= item.ShowInfo #''><\/span><\/a><\/div><\/div><\/div>"});p.off(VIS.Events.onTouchStartOrClick,".va005_editSet");p.on(VIS.Events.onTouchStartOrClick,".va005_editSet",df);p.off(VIS.Events.onTouchStartOrClick,".va005_editattribute");p.on(VIS.Events.onTouchStartOrClick,".va005_editattribute",ie);p.on(VIS.Events.onTouchStartOrClick,".va005_remove",bf);f[0].style.visibility="hidden";tf()},error:function(n){alert(n);f[0].style.visibility="hidden"}});wf()};kf=!1;tr=null;dt=null;this.disposeComponent=function(){o.disposeComponent();se();h=null;ht=null;ni=null;e=null;c=null;ct=null;lt=null;k=null;d=null;l=null;v=null;pt=null;y=null;g=null;su=null;it=null;wt=null;bt=null;kt=null;at=null;ii=null;hu=null;vi=null};this.formSizeChanged=function(){ht.height(a.height()-(a.find(".VA005-top-wrap-div-h").height()+10))};this.sizeChanged=function(n,t){this.formSizeChanged(n,t)}}i.prototype.init=function(n,t){this.windowNo=n;this.frame=t;var i=this.initialize();this.frame.getContentGrid().append(this.getRoot());this.formSizeChanged()};i.prototype.sizeChanged=function(n,t){this.formSizeChanged(n,t)};i.prototype.refresh=function(){this.formSizeChanged()};i.prototype.dispose=function(){this.disposeComponent();this.frame&&this.frame.dispose();this.frame=null};n.AForms=n.AForms||{};n.AForms.AttributeSetListing=i}(VA005,jQuery);VA005=window.VA005||{},function(n,t){n.uploadImage=function(n,i,r,u,f,e){function br(){cr();ci();lr();b();p.val("1.0");vr()}function cr(){o=t("<div><\/div>");st=t('<div class="demo-section k-header"><\/div>');vt=t('<input name="files" id="files" type="file" capture="camera" accept="image/*"/>');st.append(vt);o.append(st);y=t('<div"><\/div>');nt=t("<div><\/div>");tt=t('<div style="float:left"><\/div>');it=t('<div style="float:left;margin-left:60px;"><\/div>');rt=t('<div style="margin-top:80px;"><\/div>');gt=t("<p>"+VIS.Msg.getMsg("VADMS_DocName")+"<p>");ni=t('<input type="text" style="width:100%;"><\/input>');ti=t("<p>"+VIS.Msg.getMsg("VADMS_MetaDataName")+"<p>");ii=t('<input type="text" style="width:350px;"><\/input>');ri=t("<p>"+VIS.Msg.getMsg("VADMS_FileType")+"<p>");ui=t('<input type="text" style="width:350px;"><\/input>');fi=t("<p>"+VIS.Msg.getMsg("VADMS_Description")+"<p>");ei=t('<textarea type="text" style="width:100%;"><\/textarea>');nt.append(gt);nt.append(ni);tt.append(ti);tt.append(ii);it.append(ri);it.append(ui);rt.append(fi);rt.append(ei);y.append(nt);y.append(tt);y.append(it);y.append(rt);y.css("display","none");w=t("<div><\/div>");ut=t('<div style="margin-top:10px;"><\/div>');ft=t('<div style="float:right;margin-left:428px;margin-top:-50px;"><\/div>');et=t('<div style="margin-top:10px;"><\/div>');ot=t('<div style="float:right;margin-top:-50px;"><\/div>');yt=t('<p style="display:none">'+VIS.Msg.getMsg("VADMS_DocType")+"<p>");d=t('<select style="width:320px;display:none"><\/select>');d.append(oi);pt=t('<p style="display:none">'+VIS.Msg.getMsg("VADMS_Version")+"<\/p>");p=t('<input type="text" style="width:320px;display:none" maxlength="10" pattern="[0-9.]*"><\/input>');wt=t('<p style="display:none">'+VIS.Msg.getMsg("VADMS_IskeepVersion")+"<\/p>");ht=t('<select style="width:320px;display:none"><\/select>');bt=t('<p style="display:none">'+VIS.Msg.getMsg("VADMS_SaveIn")+"<\/p>");dt=t('<div style="display:none"><\/div>');ut.append(yt);ut.append(d);ft.append(pt);ft.append(p);et.append(wt);et.append(ht);ot.append(bt);ot.append(dt);w.append(ut);w.append(ft);w.append(et);w.append(ot);k=t('<div class="VA005-doc_information" style="float: left;width: 100%;"><\/div>');g=t('<div style="float:right;margin-top:10px;width:100%;"><\/div>');c=t('<input type="submit" class="VA005-upload-buttons" value='+VIS.Msg.getMsg("OK")+' style="background-color:rgba(var(--v-c-primary), 1);color: rgba(var(--v-c-on-primary), 1);font-weight: 200;font-family: helvetica;float:right;font-size: 14px;margin-right:10px;padding: 10px 15px;width:100px !Important;"><\/input>');ct=t('<input type="submit" style="background-color:rgba(var(--v-c-primary), 1);color: rgba(var(--v-c-on-primary), 1);font-weight: 200;font-family: helvetica;font-size: 14px;padding: 10px 15px;width:100px !Important;float:right;" value='+VIS.Msg.getMsg("Cancel")+"><\/input>");g.append(ct);g.append(c);k.append(y);k.append(w);k.append(g);o.append(k);var n=t('<script id="fileTemplate" type="text/x-kendo-template"> <span class="k-progress"><\/span>  <div class="file-wrapper" style="margin-top:5px;"> <div class="VA005-attach-file-top"><a class="file-close-ico"><\/a><\/div> <div class="VA005-attach-file-content">  <div class="VA005-file-icon #=addExtensionClass(files[0].extension)#"><\/div> <div class="VA005-attach-file-text" style="margin-bottom:10px">   <h4 class="file-heading file-name-heading">#=CheckName(files[0].name)#<\/h4>  <h4 class="file-heading file-size-heading">#=size# bytes<\/h4>  <h4 class="file-heading file-size-heading" style="display: none;">#=getUID(files[0].uid)#<\/h4><\/div><\/div>  <button type="button" class="k-upload-action"><\/button> <\/div>  <\/script>');o.append(n);o.append(t('<script>function addExtensionClass(extension) {switch (extension) {  case ".jpg": case ".img": case ".png":  case ".gif":     return "VA005-img-file";  case ".doc": case ".docx":     return "vadms-doc-file"; case ".xls": case ".xlsx":     return "vadms-xls-file"; case ".pdf":     return "vadms-pdf-file"; case ".txt":     return "vadms-text-file";case ".zip":case ".rar":   return "vadms-zip-file";default:   return "vadms-default-file";}}<\/script>'));o.append(t("<script> function CheckName(name) {var lblFName = $(\"<p>\");if (name.length > 17) {var shortName = name.toString().substr(0, 17);lblFName.append(shortName); var aFName = $(\"<a class='VIS_Pref_tooltip'>\").append('...');var span = $(\"<span style='top:40px'>\");span.append($(\"<img class='VIS_Pref_callout'>\").attr('src', VIS.Application.contextUrl + 'Areas/VIS/Images/ccc.png').append('ToolTip Text'));span.append($(\"<label class='VIS_Pref_Label_Font'>\").append(name));aFName.append(span);lblFName.append(aFName)}else {lblFName.append(name);}return lblFName.html();}<\/script>"));o.append(t("<script>function getUID(uid) {return uid;}<\/script>"));c.prop("disabled",!0)}function lr(){function r(n){lt+=1;b();sr=t(".file-close-ico");f();var i=n.files;s>0&&lt==v&&c.prop("disabled",!1)}function n(n){n>3&&l.css("height","442px");n==0?(l.css("height","247px"),t(".k-upload-files").css("overflow","hidden")):n>6?(t(".k-upload-files").css("overflow","scroll"),l.css("height","453px")):n>0&&n<=3&&(l.css("height","347px"),t(".k-upload-files").css("overflow","hidden"))}function u(t){v=v-1;for(var i=0;i<a.length;i++)a[i].name==t.files[0].name&&(at=jQuery.grep(at,function(n){return n!==a[i].folderKey}),a.splice(i,1),s--);n(s);lt==v&&c.prop("disabled",!1)}function f(){sr.on("click",function(){var r=t(t(t(t(this).parent()).parent()).children()[4]).text(),n=t(t(t(this).parent()).parent()).parent(),i;n.css("display","none");i=n.html();s==1&&t(t(t(t(this).parent()).parent()).parent()).parent().remove();n.remove();n.empty();n=null;i!=null&&s>0&&s--;t.ajax({async:!1,type:"GET",url:VIS.Application.contextUrl+"VA005/ProductManagement/RemoveFile?uid="+r,dataType:"Json",success:function(){},error:function(n){console.log(n)}});s==0&&(l.css("height","252px"),t(".k-upload-files").css("height","0px"),c.prop("disabled",!0),t(".k-upload-files").css("overflow","hidden"),t(t(t("#files").parent()).parent()).children()[2].remove());s>3?l.css("height","442px"):s>0&&s<=3&&(l.css("height","347px"),t(".k-upload-files").css("overflow","hidden"));s>6&&(t(".k-upload-files").css("overflow","scroll"),l.css("height","453px"))})}function e(n){var t;hr=n.files;c.prop("disabled",!0);t=lt;lt=0;v=hr.length;b()}var i=VIS.Application.contextUrl+"VA005/ProductManagement/SaveImages";t("#files").kendoUpload({async:{saveUrl:i,autoUpload:!0,localization:{select:"customSelect"}},select:e,upload:function(i){var e=i.files[0].extension,o=e.toLowerCase(),r,u,f;if(t.inArray(o,[".jpg",".jpeg",".gif",".png",".img",".bmp",".tiff",".bpg",".thumb",".psd"])==-1){v=v-1;i.preventDefault();hi>0&&c.prop("disabled",!1);return}for(r=0;r<a.length;r++)if(i.files[0].name==a[r].name){v=v-1;i.preventDefault();hi>0&&c.prop("disabled",!1);return}for(u=(new Date).getTime(),i.data={folderKey:u},b(),hi++,f=0;f<i.files.length;f++)a[s]=i.files[f],t(a[s]).attr("folderKey",u),at[s]=u,s++;n(s)},success:r,cancel:u,error:function(){b()},progress:function(){b()},template:kendo.template(t("#fileTemplate").html())});si=t("#files").data("kendoUpload")}function b(){o.find(".k-file").css("display","-webkit-inline-box");o.find(".k-file").css("width","194px");o.find(".k-file").css("margin","9px 11px 0px 0px");o.find(".k-file").css("float","left");o.find(".k-button").css("color","rgba(var(--v-c-on-primary), 1)");o.find(".k-button").css("background-color","rgba(var(--v-c-primary), 1)");o.find(".k-button").css("background-image","none");o.find(".k-button").css("border","none");o.find(".k-button").css("margin-left","-3px");o.find(".k-header").css("background-color","white");o.find(".k-upload-files").css("max-height","200px");o.find(".k-upload-empty").css("border-width","1px");o.find(".k-upload-files").css("overflow","hidden");o.find(".k-upload-files").css("background","white");o.find(".k-upload-files").css("margin-left","10px");o.find(".k-upload-files.k-reset").css({"margin-left":"0px",overflow:"hidden","max-height":"200px",background:"white",float:"left",width:"100%","box-sizing":"border-box",padding:"0 10px"});o.find(".k-widget.k-upload.k-header").css({float:"left",width:"100%"});o.find(".k-progress").css("background-color","#ddffd0")}function ar(){t.ajax({async:!0,type:"POST",url:VIS.Application.contextUrl+"VA005/ProductManagement/Remove",dataType:"Json",contentType:"application/json; charset=utf-8",data:JSON.stringify({fKey:at,cancle:li}),success:function(){},error:function(n){console.log(n)}});at=[]}function ci(){h=new VIS.ChildDialog;h.setContent(o);h.setHeight(280);h.setWidth(705);h.setTitle(VIS.Msg.getMsg("VA005_UploadImage"));h.setEnableResize(!1);h.setModal(!0);l=h.show();h.hidebuttons()}function vr(){c.on("click",function(){pr.GetImages();h.close()});p.on("keypress",function(n){n.stopPropagation();var t=n.keyCode?n.keyCode:n.which;if(!/^[0-9. ]*$/.test(String.fromCharCode(n.keyCode))&&t!=13){n.preventDefault();return}});ct.on("click",function(){li=!0;h.close();ar();yr()});ci.onClose=function(){yr()}}function yr(){o=null;st=null;vt=null;k=null;vi=null;yi=null;pi=null;wi=null;bi=null;ki=null;yt=null;d=null;pt=null;p=null;di=null;gi=null;nr=null;tr=null;ir=null;wt=null;ht=null;bt=null;kt=null;g=null;c=null;ct=null;oi=null;rr=null;ur=null;fr=null;er=null;h=null;dt=null;or=null;y=null;nt=null;tt=null;it=null;rt=null;gt=null;ni=null;ti=null;ii=null;ri=null;ui=null;fi=null;ei=null;w=null;ut=null;ft=null;et=null;ot=null;s=0;si.destroy()}var li=!1,pr=e,ai=f,kr=VIS.Logging.VLogger.getVLogger("UploadDocument"),dr=this,o=null,st=null,vt=null,k=null,vi=null,yi=null,pi=null,wi=null,bi=null,ki=null,yt=null,d=null,pt=null,p=null,di=null,gi=null,nr=null,tr=null,ir=null,wt=null,ht=null,bt=null,kt=null,g=null,c=null,ct=null,oi="",rr="",ur="",fr=null,er=null,s=0,a=[],h=null,si=null,dt=null,or=null,sr=null,hr=null,l=null,v=null,lt=0,hi=0,y=null,nt=null,tt=null,it=null,rt=null,gt=null,ni=null,ti=null,ii=null,ri=null,ui=null,fi=null,ei=null,w=null,ut=null,ft=null,et=null,ot=null,at=[],wr;this.FileArray=[];wr=0;br();this.initialize=function(){cr();ci();lr();b();p.val("1.0");vr()};t(window).on("resize",function(){});this.disposeComponent=function(){o=null;st=null;vt=null;k=null;vi=null;yi=null;pi=null;wi=null;bi=null;ki=null;yt=null;d=null;pt=null;p=null;di=null;gi=null;nr=null;tr=null;ir=null;wt=null;ht=null;bt=null;kt=null;g=null;c=null;ct=null;oi=null;rr=null;ur=null;fr=null;er=null;h=null;ar();dt=null;or=null;y=null;nt=null;tt=null;it=null;rt=null;gt=null;ni=null;ti=null;ii=null;ri=null;ui=null;fi=null;ei=null;w=null;ut=null;ft=null;et=null;ot=null;s=0;si.destroy()}};n.uploadImage.prototype.init=function(n,t){this.frame=t;this.windowNo=n};n.uploadImage.prototype.dispose=function(){this.disposeComponent();this.frame&&this.frame.dispose();this.frame=null}}(VA005,jQuery);VA005=window.VA005||{},function(n,t){n.StickerProduct=function(){};n.StickerProduct.prototype.create=function(n,i,r){function e(){var l,s;var h={output:"css",bgColor:"#FFFFFF",color:"#000000",barWidth:1,barHeight:30,moduleSize:2,addQuietZone:1},f=0,a=0,v=0,y=0,p=0,w="",k="",b="",u="",e=null,c=t("#VA005_Barcode"),d="SELECT cur.iso_code FROM M_PriceList_Version plv INNER JOIN M_PriceList pl ON plv.M_PriceList_ID= pl.M_PriceList_ID INNER JOIN C_Currency cur ON pl.C_Currency_ID = cur.C_Currency_ID WHERE plv.M_PriceList_Version_ID="+i;b=VIS.Utility.Util.getValueOfString(VIS.DB.executeScalar(d));for(item in r)if(a=VIS.Utility.Util.getValueOfInt(r[item].product_ID),k=VIS.Utility.Util.getValueOfString(r[item].product),u=VIS.Utility.Util.getValueOfString(r[item].UPC),v=VIS.Utility.Util.getValueOfInt(r[item].C_Uom_ID),y=VIS.Utility.Util.getValueOfInt(r[item].attribute_ID),p=VIS.Utility.Util.getValueOfInt(r[item].Qty),o(u)!=!0&&u.indexOf(":")==-1&&u.indexOf(";")==-1&&u.indexOf("!")==-1&&u.indexOf("~")==-1)for(w=VIS.Utility.Util.getValueOfString(VIS.DB.executeScalar(" SELECT  pr.PriceList FROM M_ProductPrice pr INNER JOIN M_PriceList_Version plv ON pr.M_PriceList_Version_ID = plv.M_PriceList_Version_ID WHERE pr.M_PriceList_Version_ID="+i+" AND pr.M_Product_ID = "+a+" AND pr.C_UOM_ID = "+v+" AND pr.M_AttributeSetInstance_ID = "+y)),l=0;l<p;l++)f=f+1,e=f==1?u.length==13?'<div style="text-align: center;width:100%;margin-left: -13px;margin-top: 0px  " >':'<div style="text-align: center;width:100%;margin-left: -4px;margin-top: 0px  " >':u.length==13?'<div style="text-align: center;width:100%;margin-top: 20px;margin-left: -13px; " >':'<div style="text-align: center;width:100%;margin-top: 20px;margin-left: -4px; " >',e+=n!=null?"<div id=VA005_Header"+f+' style="font-size: small;width:100%;">'+n+"<\/div>":"<div id=VA005_Header"+f+' style="font-size: small;width:100%;"> &nbsp; <\/div>',e+="<div id=VA005_Bars"+f+' style="margin: 0 auto;"><\/div>',e+="<div id=VA005_Price"+f+' style="font-size: small;width:100%">'+w+" "+b+"<\/div>",e+="<\/div>",c.append(e),e=null,u.length==12?t("#VA005_Bars"+f).html("").show().barcode(u,"ean13",h):u.length==7?t("#VA005_Bars"+f).html("").show().barcode(u,"ean8",h):u.length==4?t("#VA005_Bars"+f).html("").show().barcode(u,"code39",h):t("#VA005_Bars"+f).html("").show().barcode(u,"code128",h);s=window.open();s.document.write("<html><head>");s.document.write("<\/head><body >");s.document.write(c.html());s.document.write("<\/body><\/html>");s.print();s.close();c.empty()}function o(n){return/[@#$%^&*()_\\"|?/`,.<>{}+=]/.test(n)}var f,u;f=t('<div style="width: 100%;" >');f=t('<div id="VA005_Barcode" style="width:112px"><\/div>');f.append(t("<\/div>"));u=new VIS.ChildDialog;u.setContent(f);u.setTitle(VIS.Msg.getMsg("VA005_GenerateSticker"));u.setWidth("40%");u.setEnableResize(!1);u.setModal(!0);u.show();u.onOkClick=function(){e()}}}(VA005,jQuery),function(n){var u=n(window),o={},f=[],e=[],h,s=null,c="_open",v="_close",i=[],l=null,a,y=/(iPad|iPhone|iPod)/g.test(navigator.userAgent),p="a[href], area[href], input:not([disabled]), select:not([disabled]), textarea:not([disabled]), button:not([disabled]), iframe, object, embed, *[tabindex], *[contenteditable]",t={_init:function(i){var r=n(i),u=r.data("popupoptions");e[i.id]=!1;f[i.id]=0;r.data("popup-initialized")||(r.attr("data-popup-initialized","true"),t._initonce(i));u.autoopen&&setTimeout(function(){t.show(i,0)},0)},_initonce:function(i){var u=n(i),v=n("body"),f,r=u.data("popupoptions"),o,p,w,a,e;if(s=parseInt(v.css("margin-right"),10),l=document.body.style.webkitTransition!==undefined||document.body.style.MozTransition!==undefined||document.body.style.msTransition!==undefined||document.body.style.OTransition!==undefined||document.body.style.transition!==undefined,r.type=="tooltip"&&(r.background=!1,r.scrolllock=!1),r.backgroundactive&&(r.background=!1,r.blur=!1,r.scrolllock=!1),r.scrolllock&&typeof h=="undefined"&&(p=n('<div style="width:50px;height:50px;overflow:auto"><div/><\/div>').appendTo("body"),w=p.children(),h=w.innerWidth()-w.height(99).innerWidth(),p.remove()),u.attr("id")||u.attr("id","j-popup-"+parseInt(Math.random()*1e8,10)),u.addClass("popup_content"),v.prepend(i),u.wrap('<div id="'+i.id+'_wrapper" class="popup_wrapper" />'),f=n("#"+i.id+"_wrapper"),f.css({opacity:0,visibility:"hidden",position:"absolute"}),y&&f.css("cursor","pointer"),r.type=="overlay"&&f.css("overflow","auto"),u.css({opacity:0,visibility:"hidden",display:"inline-block"}),r.setzindex&&!r.autozindex&&f.css("z-index","100001"),r.outline||u.css("outline","none"),r.transition&&(u.css("transition",r.transition),f.css("transition",r.transition)),u.attr("aria-hidden",!0),r.background&&!n("#"+i.id+"_background").length&&(v.prepend('<div id="'+i.id+'_background" class="popup_background"><\/div>'),a=n("#"+i.id+"_background"),a.css({opacity:0,visibility:"hidden",backgroundColor:r.color,position:"fixed",top:0,right:0,bottom:0,left:0}),r.setzindex&&!r.autozindex&&a.css("z-index","100000"),r.transition&&a.css("transition",r.transition)),r.type=="overlay"&&(u.css({textAlign:"left",position:"relative",verticalAlign:"middle"}),o={position:"fixed",width:"100%",height:"100%",top:0,left:0,textAlign:"center"},r.backgroundactive&&(o.position="relative",o.height="0",o.overflow="visible"),f.css(o),f.append('<div class="popup_align" />'),n(".popup_align").css({display:"inline-block",verticalAlign:"middle",height:"100%"})),u.attr("role","dialog"),e=r.openelement?r.openelement:"."+i.id+c,n(e).each(function(t,i){n(i).attr("data-popup-ordinal",t);i.id||n(i).attr("id","open_"+parseInt(Math.random()*1e8,10))}),u.attr("aria-labelledby")||u.attr("aria-label")||u.attr("aria-labelledby",n(e).attr("id")),r.action=="hover"){r.keepfocus=!1;n(e).on("mouseenter",function(){t.show(i,n(this).data("popup-ordinal"))});n(e).on("mouseleave",function(){t.hide(i)})}else n(document).on("click",e,function(r){r.preventDefault();var u=n(this).data("popup-ordinal");setTimeout(function(){t.show(i,u)},0)});r.closebutton&&t.addclosebutton(i);r.detach?u.hide().detach():f.hide()},show:function(o,c){var p=n(o),k,b;if(!p.data("popup-visible")){p.data("popup-initialized")||t._init(o);p.attr("data-popup-initialized","true");var d=n("body"),y=p.data("popupoptions"),w=n("#"+o.id+"_wrapper"),nt=n("#"+o.id+"_background");if(r(o,c,y.beforeopen),e[o.id]=c,setTimeout(function(){i.push(o.id)},0),y.autozindex){var tt=document.getElementsByTagName("*"),it=tt.length,g=0;for(k=0;k<it;k++)b=n(tt[k]).css("z-index"),b!=="auto"&&(b=parseInt(b,10),g<b&&(g=b));f[o.id]=g;y.background&&f[o.id]>0&&n("#"+o.id+"_background").css({zIndex:f[o.id]+1});f[o.id]>0&&w.css({zIndex:f[o.id]+2})}if(y.detach?(w.prepend(o),p.show()):w.show(),a=setTimeout(function(){w.css({visibility:"visible",opacity:1});n("html").addClass("popup_visible").addClass("popup_visible_"+o.id);w.addClass("popup_wrapper_visible")},20),y.scrolllock&&(d.css("overflow","hidden"),d.height()>u.height()&&d.css("margin-right",s+h)),y.backgroundactive&&p.css({top:(u.height()-(p.get(0).offsetHeight+parseInt(p.css("margin-top"),10)+parseInt(p.css("margin-bottom"),10)))/2+"px"}),p.css({visibility:"visible",opacity:1}),y.background&&(nt.css({visibility:"visible",opacity:y.opacity}),setTimeout(function(){nt.css({opacity:y.opacity})},0)),p.data("popup-visible",!0),t.reposition(o,c),p.data("focusedelementbeforepopup",document.activeElement),y.keepfocus&&(p.attr("tabindex",-1),setTimeout(function(){y.focuselement==="closebutton"?n("#"+o.id+" ."+o.id+v+":first").focus():y.focuselement?n(y.focuselement).focus():p.focus()},y.focusdelay)),n(y.pagecontainer).attr("aria-hidden",!0),p.attr("aria-hidden",!1),r(o,c,y.onopen),l)w.one("transitionend",function(){r(o,c,y.opentransitionend)});else r(o,c,y.opentransitionend)}},hide:function(t,u){var c=n.inArray(t.id,i);if(c!==-1){a&&clearTimeout(a);var v=n("body"),f=n(t),o=f.data("popupoptions"),h=n("#"+t.id+"_wrapper"),y=n("#"+t.id+"_background");if(f.data("popup-visible",!1),i.length===1?n("html").removeClass("popup_visible").removeClass("popup_visible_"+t.id):n("html").hasClass("popup_visible_"+t.id)&&n("html").removeClass("popup_visible_"+t.id),i.splice(c,1),h.hasClass("popup_wrapper_visible")&&h.removeClass("popup_wrapper_visible"),o.keepfocus&&!u&&setTimeout(function(){n(f.data("focusedelementbeforepopup")).is(":visible")&&f.data("focusedelementbeforepopup").focus()},0),h.css({visibility:"hidden",opacity:0}),f.css({visibility:"hidden",opacity:0}),o.background&&y.css({visibility:"hidden",opacity:0}),n(o.pagecontainer).attr("aria-hidden",!1),f.attr("aria-hidden",!0),r(t,e[t.id],o.onclose),l&&f.css("transition-duration")!=="0s")f.one("transitionend",function(){f.data("popup-visible")||(o.detach?f.hide().detach():h.hide());o.scrolllock&&setTimeout(function(){v.css({overflow:"visible","margin-right":s})},10);r(t,e[t.id],o.closetransitionend)});else o.detach?f.hide().detach():h.hide(),o.scrolllock&&setTimeout(function(){v.css({overflow:"visible","margin-right":s})},10),r(t,e[t.id],o.closetransitionend)}},toggle:function(i,r){n(i).data("popup-visible")?t.hide(i):setTimeout(function(){t.show(i,r)},0)},reposition:function(t,i){var s=n(t),r=s.data("popupoptions"),f=n("#"+t.id+"_wrapper"),h=n("#"+t.id+"_background"),o,e;i=i||0;r.type=="tooltip"?(f.css({position:"absolute"}),o=r.tooltipanchor?n(r.tooltipanchor):r.openelement?n(r.openelement).filter('[data-popup-ordinal="'+i+'"]'):n("."+t.id+c+'[data-popup-ordinal="'+i+'"]'),e=o.offset(),r.horizontal=="right"?f.css("left",e.left+o.outerWidth()+r.offsetleft):r.horizontal=="leftedge"?f.css("left",e.left+o.outerWidth()-o.outerWidth()+r.offsetleft):r.horizontal=="left"?f.css("right",u.width()-e.left-r.offsetleft):r.horizontal=="rightedge"?f.css("right",u.width()-e.left-o.outerWidth()-r.offsetleft):f.css("left",e.left+o.outerWidth()/2-s.outerWidth()/2-parseFloat(s.css("marginLeft"))+r.offsetleft),r.vertical=="bottom"?f.css("top",e.top+o.outerHeight()+r.offsettop):r.vertical=="bottomedge"?f.css("top",e.top+o.outerHeight()-s.outerHeight()+r.offsettop):r.vertical=="top"?f.css("bottom",u.height()-e.top-r.offsettop):r.vertical=="topedge"?f.css("bottom",u.height()-e.top-s.outerHeight()-r.offsettop):f.css("top",e.top+o.outerHeight()/2-s.outerHeight()/2-parseFloat(s.css("marginTop"))+r.offsettop)):r.type=="overlay"&&(r.horizontal?f.css("text-align",r.horizontal):f.css("text-align","center"),r.vertical?s.css("vertical-align",r.vertical):s.css("vertical-align","middle"))},addclosebutton:function(t){var i;i=n(t).data("popupoptions").closebuttonmarkup?n(o.closebuttonmarkup).addClass(t.id+"_close"):'<button class="popup_close '+t.id+'_close" title="Close" aria-label="Close"><span aria-hidden="true">×<\/span><\/button>';$el.data("popup-initialized")&&$el.append(i)}},r=function(t,i,r){var u=n(t).data("popupoptions"),f=u.openelement?u.openelement:"."+t.id+c,e=n(f+'[data-popup-ordinal="'+i+'"]');typeof r=="function"&&r.call(n(t),t,e)};n(document).on("keydown",function(r){if(i.length){var f=i[i.length-1],u=document.getElementById(f);n(u).data("popupoptions").escape&&r.keyCode==27&&t.hide(u)}});n(document).on("click",function(r){if(i.length){var f=i[i.length-1],u=document.getElementById(f),e=n(u).data("popupoptions").closeelement?n(u).data("popupoptions").closeelement:"."+u.id+v;n(r.target).closest(e).length&&(r.preventDefault(),t.hide(u));n(u).data("popupoptions").blur&&!n(r.target).closest("#"+f).length&&r.which!==2&&n(r.target).is(":visible")&&(n(u).data("popupoptions").background?(t.hide(u),r.preventDefault()):t.hide(u,!0))}});n(document).on("keydown",function(t){if(i.length&&t.which==9){var o=i[i.length-1],f=document.getElementById(o),s=n(f).find("*"),r=s.filter(p).filter(":visible"),h=n(":focus"),u=r.length,e=r.index(h);u===0?(n(f).focus(),t.preventDefault()):t.shiftKey?e===0&&(r.get(u-1).focus(),t.preventDefault()):e==u-1&&(r.get(0).focus(),t.preventDefault())}});n.fn.popup=function(i){return this.each(function(){var r=n(this),u;typeof i=="object"?(u=n.extend({},n.fn.popup.defaults,i),r.data("popupoptions",u),o=r.data("popupoptions"),t._init(this)):typeof i=="string"?(r.data("popupoptions")||(r.data("popupoptions",n.fn.popup.defaults),o=r.data("popupoptions")),t[i].call(this,this)):(r.data("popupoptions")||(r.data("popupoptions",n.fn.popup.defaults),o=r.data("popupoptions")),t._init(this))})};n.fn.popup.defaults={type:"overlay",autoopen:!1,background:!0,backgroundactive:!1,color:"black",opacity:"0.5",horizontal:"center",vertical:"middle",offsettop:0,offsetleft:0,escape:!0,blur:!0,setzindex:!0,autozindex:!1,scrolllock:!1,closebutton:!1,closebuttonmarkup:null,keepfocus:!0,focuselement:null,focusdelay:50,outline:!1,pagecontainer:null,detach:!1,openelement:null,closeelement:null,transition:null,tooltipanchor:null,beforeopen:null,onclose:null,onopen:null,opentransitionend:null,closetransitionend:null}}(jQuery)